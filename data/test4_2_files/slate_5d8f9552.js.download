(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return Pe})),n.d(t,"b",(function(){return Ne})),n.d(t,"c",(function(){return Be})),n.d(t,"d",(function(){return Me})),n.d(t,"e",(function(){return Le})),n.d(t,"f",(function(){return Ke})),n.d(t,"g",(function(){return Je})),n.d(t,"h",(function(){return je})),n.d(t,"i",(function(){return Ye})),n.d(t,"j",(function(){return lt})),n.d(t,"k",(function(){return pe}));var r=n(1187),o=n(1729);function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[H]}function s(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&Function.toString.call(n)===X}(e)||Array.isArray(e)||!!e[V]||!!e.constructor[V]||h(e)||p(e))}function c(e,t,n){void 0===n&&(n=!1),0===u(e)?(n?Object.keys:Y)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function u(e){var t=e[H];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:h(e)?2:p(e)?3:0}function l(e,t){return 2===u(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){return 2===u(e)?e.get(t):e[t]}function f(e,t,n){var r=u(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function v(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e){return K&&e instanceof Map}function p(e){return U&&e instanceof Set}function y(e){return e.o||e.t}function m(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Z(e);delete t[H];for(var n=Y(t),r=0;r<n.length;r++){var o=n[r],a=t[o];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){return void 0===t&&(t=!1),b(e)||i(e)||!s(e)||(u(e)>1&&(e.set=e.add=e.clear=e.delete=k),Object.freeze(e),t&&c(e,(function(e,t){return g(t,!0)}),!0)),e}function k(){a(2)}function b(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function O(e){var t=G[e];return t||a(18,e),t}function w(){return z}function x(e,t){t&&(O("Patches"),e.u=[],e.s=[],e.v=t)}function A(e){C(e),e.p.forEach(N),e.p=null}function C(e){e===z&&(z=e.l)}function E(e){return z={p:[],l:z,h:e,m:!0,_:0}}function N(e){var t=e[H];0===t.i||1===t.i?t.j():t.g=!0}function T(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||O("ES5").S(t,e,r),r?(n[H].P&&(A(t),a(4)),s(e)&&(e=S(t,e),t.l||P(t,e)),t.u&&O("Patches").M(n[H],e,t.u,t.s)):e=S(t,n,[]),A(t),t.u&&t.v(t.u,t.s),e!==J?e:void 0}function S(e,t,n){if(b(t))return t;var r=t[H];if(!r)return c(t,(function(o,a){return F(e,r,t,o,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return P(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=m(r.k):r.o;c(3===r.i?new Set(o):o,(function(t,a){return F(e,r,o,t,a,n)})),P(e,o,!1),n&&e.u&&O("Patches").R(r,n,e.u,e.s)}return r.o}function F(e,t,n,r,o,a){if(i(o)){var c=S(e,o,a&&t&&3!==t.i&&!l(t.D,r)?a.concat(r):void 0);if(f(n,r,c),!i(c))return;e.m=!1}if(s(o)&&!b(o)){if(!e.h.F&&e._<1)return;S(e,o),t&&t.A.l||P(e,o)}}function P(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&g(t,n)}function j(e,t){var n=e[H];return(n?y(n):e)[t]}function D(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function B(e){e.P||(e.P=!0,e.l&&B(e.l))}function R(e){e.o||(e.o=m(e.t))}function _(e,t,n){var r=h(t)?O("MapSet").N(t,n):p(t)?O("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:w(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,a=$;n&&(o=[r],a=Q);var i=Proxy.revocable(o,a),s=i.revoke,c=i.proxy;return r.k=c,r.j=s,c}(t,n):O("ES5").J(t,n);return(n?n.A:w()).p.push(r),r}function M(e){return i(e)||a(22,e),function e(t){if(!s(t))return t;var n,r=t[H],o=u(t);if(r){if(!r.P&&(r.i<4||!O("ES5").K(r)))return r.t;r.I=!0,n=L(t,o),r.I=!1}else n=L(t,o);return c(n,(function(t,o){r&&d(r.t,t)===o||f(n,t,e(o))})),3===o?new Set(n):n}(e)}function L(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return m(e)}var I,z,q="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),K="undefined"!=typeof Map,U="undefined"!=typeof Set,W="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,J=q?Symbol.for("immer-nothing"):((I={})["immer-nothing"]=!0,I),V=q?Symbol.for("immer-draftable"):"__$immer_draftable",H=q?Symbol.for("immer-state"):"__$immer_state",X=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Y="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Z=Object.getOwnPropertyDescriptors||function(e){var t={};return Y(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},G={},$={get:function(e,t){if(t===H)return e;var n=y(e);if(!l(n,t))return function(e,t,n){var r,o=D(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!s(r)?r:r===j(e.t,t)?(R(e),e.o[t]=_(e.A.h,r,e)):r},has:function(e,t){return t in y(e)},ownKeys:function(e){return Reflect.ownKeys(y(e))},set:function(e,t,n){var r=D(y(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var o=j(y(e),t),a=null==o?void 0:o[H];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(v(n,o)&&(void 0!==n||l(e.t,t)))return!0;R(e),B(e)}return e.o[t]===n&&"number"!=typeof n||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==j(e.t,t)||t in e.t?(e.D[t]=!1,R(e),B(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=y(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){a(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){a(12)}},Q={};c($,(function(e,t){Q[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Q.deleteProperty=function(e,t){return $.deleteProperty.call(this,e[0],t)},Q.set=function(e,t,n){return $.set.call(this,e[0],t,n,e[0])};var ee=new(function(){function e(e){var t=this;this.O=W,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var i=t;return function(e){var t=this;void 0===e&&(e=o);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return i.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var c;if("function"!=typeof n&&a(6),void 0!==r&&"function"!=typeof r&&a(7),s(e)){var u=E(t),l=_(t,e,void 0),d=!0;try{c=n(l),d=!1}finally{d?A(u):C(u)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then((function(e){return x(u,r),T(e,u)}),(function(e){throw A(u),e})):(x(u,r),T(c,u))}if(!e||"object"!=typeof e){if((c=n(e))===J)return;return void 0===c&&(c=e),t.F&&g(c,!0),c}a(21,e)},this.produceWithPatches=function(e,n){return"function"==typeof e?function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(o))}))}:[t.produce(e,n,(function(e,t){r=e,o=t})),r,o];var r,o},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){s(e)||a(8),i(e)&&(e=M(e));var t=E(this),n=_(this,e,void 0);return n[H].C=!0,C(t),n},t.finishDraft=function(e,t){var n=(e&&e[H]).A;return x(n,t),T(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!W&&a(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var o=O("Patches").$;return i(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(n+1))}))},e}()),te=ee.produce,ne=(ee.produceWithPatches.bind(ee),ee.setAutoFreeze.bind(ee),ee.setUseProxies.bind(ee),ee.applyPatches.bind(ee),ee.createDraft.bind(ee)),re=ee.finishDraft.bind(ee),oe=n(1746),ae=n.n(oe);function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=new WeakMap,ce=new WeakMap,ue=new WeakMap,le=new WeakMap,de=new WeakMap,fe=new WeakMap;function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=()=>{var e={children:[],operations:[],selection:null,marks:null,isInline:()=>!1,isVoid:()=>!1,onChange:()=>{},apply:t=>{for(var n of Pe.pathRefs(e))Ie.transform(n,t);for(var r of Pe.pointRefs(e))Ue.transform(r,t);for(var o of Pe.rangeRefs(e))Ve.transform(o,t);var a=new Set,i=[],s=e=>{if(e){var t=e.join(",");a.has(t)||(a.add(t),i.push(e))}},c=se.get(e)||[],u=ye(t);for(var l of c){s(Le.transform(l,t))}for(var d of u)s(d);se.set(e,i),lt.transform(e,t),e.operations.push(t),Pe.normalize(e),"set_selection"===t.type&&(e.marks=null),ce.get(e)||(ce.set(e,!0),Promise.resolve().then(()=>{ce.set(e,!1),e.onChange(),e.operations=[]}))},addMark:(t,n)=>{var{selection:r}=e;if(r)if(Je.isExpanded(r))lt.setNodes(e,{[t]:n},{match:Ye.isText,split:!0});else{var o=he(he({},Pe.marks(e)||{}),{},{[t]:n});e.marks=o,ce.get(e)||e.onChange()}},deleteBackward:t=>{var{selection:n}=e;n&&Je.isCollapsed(n)&&lt.delete(e,{unit:t,reverse:!0})},deleteForward:t=>{var{selection:n}=e;n&&Je.isCollapsed(n)&&lt.delete(e,{unit:t})},deleteFragment:t=>{var{selection:n}=e;n&&Je.isExpanded(n)&&lt.delete(e,{reverse:"backward"===t})},getFragment:()=>{var{selection:t}=e;return t?Be.fragment(e,t):[]},insertBreak:()=>{lt.splitNodes(e,{always:!0})},insertFragment:t=>{lt.insertFragment(e,t)},insertNode:t=>{lt.insertNodes(e,t)},insertText:t=>{var{selection:n,marks:r}=e;if(n){if(Je.isCollapsed(n)){var o=Pe.above(e,{match:t=>Pe.isInline(e,t),mode:"highest"});if(o){var[,a]=o;if(Pe.isEnd(e,n.anchor,a)){var i=Pe.after(e,a);lt.setSelection(e,{anchor:i,focus:i})}}}if(r){var s=he({text:t},r);lt.insertNodes(e,s)}else lt.insertText(e,t);e.marks=null}},normalizeNode:t=>{var[n,r]=t;if(!Ye.isText(n))if(Ne.isElement(n)&&0===n.children.length){lt.insertNodes(e,{text:""},{at:r.concat(0),voids:!0})}else for(var o=!Pe.isEditor(n)&&(Ne.isElement(n)&&(e.isInline(n)||0===n.children.length||Ye.isText(n.children[0])||e.isInline(n.children[0]))),a=0,i=0;i<n.children.length;i++,a++){var s=Be.get(e,r);if(!Ye.isText(s)){var c=n.children[i],u=s.children[a-1],l=i===n.children.length-1;if((Ye.isText(c)||Ne.isElement(c)&&e.isInline(c))!==o)lt.removeNodes(e,{at:r.concat(a),voids:!0}),a--;else if(Ne.isElement(c)){if(e.isInline(c))if(null!=u&&Ye.isText(u)){if(l){lt.insertNodes(e,{text:""},{at:r.concat(a+1),voids:!0}),a++}}else{lt.insertNodes(e,{text:""},{at:r.concat(a),voids:!0}),a++}}else null!=u&&Ye.isText(u)&&(Ye.equals(c,u,{loose:!0})?(lt.mergeNodes(e,{at:r.concat(a),voids:!0}),a--):""===u.text?(lt.removeNodes(e,{at:r.concat(a-1),voids:!0}),a--):l&&""===c.text&&(lt.removeNodes(e,{at:r.concat(a),voids:!0}),a--))}}},removeMark:t=>{var{selection:n}=e;if(n)if(Je.isExpanded(n))lt.unsetNodes(e,t,{match:Ye.isText,split:!0});else{var r=he({},Pe.marks(e)||{});delete r[t],e.marks=r,ce.get(e)||e.onChange()}}};return e},ye=e=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":var{path:t}=e;return Le.levels(t);case"insert_node":var{node:n,path:r}=e;return[...Le.levels(r),...Ye.isText(n)?[]:Array.from(Be.nodes(n),e=>{var[,t]=e;return r.concat(t)})];case"merge_node":var{path:o}=e;return[...Le.ancestors(o),Le.previous(o)];case"move_node":var{path:a,newPath:i}=e;if(Le.equals(a,i))return[];var s=[],c=[];for(var u of Le.ancestors(a)){var l=Le.transform(u,e);s.push(l)}for(var d of Le.ancestors(i)){var f=Le.transform(d,e);c.push(f)}var v=c[c.length-1],h=i[i.length-1],p=v.concat(h);return[...s,...c,p];case"remove_node":var{path:y}=e;return[...Le.ancestors(y)];case"split_node":var{path:m}=e;return[...Le.levels(m),Le.next(m)];default:return[]}};function me(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ge=/\s/,ke=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,be=/['\u2018\u2019]/,Oe=e=>{for(var t=0,n=null,r=e.charCodeAt(0);r;)if(xe(r)){var o=Ae(r,e,t);if("SURR"===n||"BMP"===n)break;t+=2,n=o?"MOD":"SURR",r=e.charCodeAt(t)}else if(8205!==r)if(Ee(r)){if(n&&"ZWJ"!==n&&"VAR"!==n)break;t+=1,n="BMP",r=e.charCodeAt(t)}else{if(!Ce(r)){if("MOD"===n){t+=1;break}break}if(n&&"ZWJ"!==n)break;t+=1,n="VAR",r=e.charCodeAt(t)}else t+=1,n="ZWJ",r=e.charCodeAt(t);return t||1},we=(e,t)=>{if(ge.test(e))return!1;if(be.test(e)){var n=t.charAt(0),r=Oe(n);n=t.slice(0,r);var o=t.slice(r);if(we(n,o))return!0}return!ke.test(e)},xe=e=>55296<=e&&e<=57343,Ae=(e,t,n)=>{if(55356===e){var r=t.charCodeAt(n+1);return r<=57343&&r>=57339}return!1},Ce=e=>e<=65039&&e>=65024,Ee=e=>10084===e||9794===e||9792===e||9760===e||9877===e||9992===e||9711===e,Ne={isAncestor:e=>Object(r.a)(e)&&Be.isNodeList(e.children),isElement:e=>Object(r.a)(e)&&Be.isNodeList(e.children)&&!Pe.isEditor(e),isElementList:e=>Array.isArray(e)&&e.every(e=>Ne.isElement(e)),isElementProps:e=>void 0!==e.children,matches(e,t){for(var n in t)if("children"!==n&&e[n]!==t[n])return!1;return!0}};function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe=new WeakMap,Pe={above(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{voids:n=!1,mode:r="lowest",at:o=e.selection,match:a}=t;if(o){var i=Pe.path(e,o),s="lowest"===r;for(var[c,u]of Pe.levels(e,{at:i,voids:n,match:a,reverse:s}))if(!Ye.isText(c)&&!Le.equals(i,u))return[c,u]}},addMark(e,t,n){e.addMark(t,n)},after(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={anchor:Pe.point(e,t,{edge:"end"}),focus:Pe.end(e,[])},{distance:a=1}=r,i=0;for(var s of Pe.positions(e,Se(Se({},r),{},{at:o}))){if(i>a)break;0!==i&&(n=s),i++}return n},before(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={anchor:Pe.start(e,[]),focus:Pe.point(e,t,{edge:"start"})},{distance:a=1}=r,i=0;for(var s of Pe.positions(e,Se(Se({},r),{},{at:o,reverse:!0}))){if(i>a)break;0!==i&&(n=s),i++}return n},deleteBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:n="character"}=t;e.deleteBackward(n)},deleteForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:n="character"}=t;e.deleteForward(n)},deleteFragment(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{direction:n="forward"}=t;e.deleteFragment(n)},edges:(e,t)=>[Pe.start(e,t),Pe.end(e,t)],end:(e,t)=>Pe.point(e,t,{edge:"end"}),first(e,t){var n=Pe.path(e,t,{edge:"start"});return Pe.node(e,n)},fragment(e,t){var n=Pe.range(e,t);return Be.fragment(e,n)},hasBlocks:(e,t)=>t.children.some(t=>Pe.isBlock(e,t)),hasInlines:(e,t)=>t.children.some(t=>Ye.isText(t)||Pe.isInline(e,t)),hasTexts:(e,t)=>t.children.every(e=>Ye.isText(e)),insertBreak(e){e.insertBreak()},insertFragment(e,t){e.insertFragment(t)},insertNode(e,t){e.insertNode(t)},insertText(e,t){e.insertText(t)},isBlock:(e,t)=>Ne.isElement(t)&&!e.isInline(t),isEditor(e){if(!Object(r.a)(e))return!1;var t=Fe.get(e);if(void 0!==t)return t;var n="function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteBackward&&"function"==typeof e.deleteForward&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isInline&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&(null===e.marks||Object(r.a)(e.marks))&&(null===e.selection||Je.isRange(e.selection))&&Be.isNodeList(e.children)&&Me.isOperationList(e.operations);return Fe.set(e,n),n},isEnd(e,t,n){var r=Pe.end(e,n);return Ke.equals(t,r)},isEdge:(e,t,n)=>Pe.isStart(e,t,n)||Pe.isEnd(e,t,n),isEmpty(e,t){var{children:n}=t,[r]=n;return 0===n.length||1===n.length&&Ye.isText(r)&&""===r.text&&!e.isVoid(t)},isInline:(e,t)=>Ne.isElement(t)&&e.isInline(t),isNormalizing(e){var t=ue.get(e);return void 0===t||t},isStart(e,t,n){if(0!==t.offset)return!1;var r=Pe.start(e,n);return Ke.equals(t,r)},isVoid:(e,t)=>Ne.isElement(t)&&e.isVoid(t),last(e,t){var n=Pe.path(e,t,{edge:"end"});return Pe.node(e,n)},leaf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Pe.path(e,t,n);return[Be.leaf(e,r),r]},*levels(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:n=e.selection,reverse:r=!1,voids:o=!1}=t,{match:a}=t;if(null==a&&(a=()=>!0),n){var i=[],s=Pe.path(e,n);for(var[c,u]of Be.levels(e,s))if(a(c,u)&&(i.push([c,u]),!o&&Pe.isVoid(e,c)))break;r&&i.reverse(),yield*i}},marks(e){var{marks:t,selection:n}=e;if(!n)return null;if(t)return t;if(Je.isExpanded(n)){var[r]=Pe.nodes(e,{match:Ye.isText});if(r){var[o]=r;return me(o,["text"])}return{}}var{anchor:a}=n,{path:i}=a,[s]=Pe.leaf(e,i);if(0===a.offset){var c=Pe.previous(e,{at:i,match:Ye.isText}),u=Pe.above(e,{match:t=>Pe.isBlock(e,t)});if(c&&u){var[l,d]=c,[,f]=u;Le.isAncestor(f,d)&&(s=l)}}return me(s,["text"])},next(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:n="lowest",voids:r=!1}=t,{match:o,at:a=e.selection}=t;if(a){var i=Pe.after(e,a,{voids:r});if(i){var[,s]=Pe.last(e,[]),c=[i.path,s];if(Le.isPath(a)&&0===a.length)throw new Error("Cannot get the next node from the root node!");if(null==o)if(Le.isPath(a)){var[u]=Pe.parent(e,a);o=e=>u.children.includes(e)}else o=()=>!0;var[l]=Pe.nodes(e,{at:c,match:o,mode:n,voids:r});return l}}},node(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Pe.path(e,t,n);return[Be.get(e,r),r]},*nodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:n=e.selection,mode:r="all",universal:o=!1,reverse:a=!1,voids:i=!1}=t,{match:s}=t;if(s||(s=()=>!0),n){var c,u;if(je.isSpan(n))c=n[0],u=n[1];else{var l=Pe.path(e,n,{edge:"start"}),d=Pe.path(e,n,{edge:"end"});c=a?d:l,u=a?l:d}var f,v=Be.nodes(e,{reverse:a,from:c,to:u,pass:t=>{var[n]=t;return!i&&Pe.isVoid(e,n)}}),h=[];for(var[p,y]of v){var m=f&&0===Le.compare(y,f[1]);if("highest"!==r||!m)if(s(p,y))if("lowest"===r&&m)f=[p,y];else{var g="lowest"===r?f:[p,y];g&&(o?h.push(g):yield g),f=[p,y]}else if(o&&!m&&Ye.isText(p))return}"lowest"===r&&f&&(o?h.push(f):yield f),o&&(yield*h)}},normalize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{force:n=!1}=t,r=e=>se.get(e)||[];if(Pe.isNormalizing(e)){if(n){var o=Array.from(Be.nodes(e),e=>{var[,t]=e;return t});se.set(e,o)}0!==r(e).length&&Pe.withoutNormalizing(e,()=>{for(var t of r(e))if(Be.has(e,t)){var[n,o]=Pe.node(e,t);if(Ne.isElement(n)&&0===n.children.length){lt.insertNodes(e,{text:""},{at:t.concat(0),voids:!0})}}for(var a=42*r(e).length,i=0;0!==r(e).length;){if(i>a)throw new Error("\n            Could not completely normalize the editor after ".concat(a," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          "));var s=r(e).pop();if(Be.has(e,s)){var c=Pe.node(e,s);e.normalizeNode(c)}i++}})}},parent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Pe.path(e,t,n),o=Le.parent(r);return Pe.node(e,o)},path(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{depth:r,edge:o}=n;if(Le.isPath(t))if("start"===o){var[,a]=Be.first(e,t);t=a}else if("end"===o){var[,i]=Be.last(e,t);t=i}return Je.isRange(t)&&(t="start"===o?Je.start(t):"end"===o?Je.end(t):Le.common(t.anchor.path,t.focus.path)),Ke.isPoint(t)&&(t=t.path),null!=r&&(t=t.slice(0,r)),t},hasPath:(e,t)=>Be.has(e,t),pathRef(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:r="forward"}=n,o={current:t,affinity:r,unref(){var{current:t}=o;return Pe.pathRefs(e).delete(o),o.current=null,t}};return Pe.pathRefs(e).add(o),o},pathRefs(e){var t=le.get(e);return t||(t=new Set,le.set(e,t)),t},point(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{edge:r="start"}=n;if(Le.isPath(t)){var o;if("end"===r){var[,a]=Be.last(e,t);o=a}else{var[,i]=Be.first(e,t);o=i}var s=Be.get(e,o);if(!Ye.isText(s))throw new Error("Cannot get the ".concat(r," point in the node at path [").concat(t,"] because it has no ").concat(r," text node."));return{path:o,offset:"end"===r?s.text.length:0}}if(Je.isRange(t)){var[c,u]=Je.edges(t);return"start"===r?c:u}return t},pointRef(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:r="forward"}=n,o={current:t,affinity:r,unref(){var{current:t}=o;return Pe.pointRefs(e).delete(o),o.current=null,t}};return Pe.pointRefs(e).add(o),o},pointRefs(e){var t=de.get(e);return t||(t=new Set,de.set(e,t)),t},*positions(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:n=e.selection,unit:r="offset",reverse:a=!1,voids:i=!1}=t;if(n){var s=Pe.range(e,n),[c,u]=Je.edges(s),l=a?u:c,d=!1,f="",v=0,h=0,p=0;for(var[y,m]of Pe.nodes(e,{at:n,reverse:a,voids:i})){if(Ne.isElement(y)){if(!i&&e.isVoid(y)){yield Pe.start(e,m);continue}if(e.isInline(y))continue;if(Pe.hasInlines(e,y)){var g=Le.isAncestor(m,u.path)?u:Pe.end(e,m),k=Le.isAncestor(m,c.path)?c:Pe.start(e,m);f=Pe.string(e,{anchor:k,focus:g},{voids:i}),f=a?Object(o.reverse)(f):f,d=!0}}if(Ye.isText(y)){var b=Le.equals(m,l.path);for(b?(h=a?l.offset:y.text.length-l.offset,p=l.offset):(h=y.text.length,p=a?h:0),(b||d||"offset"===r)&&(yield{path:m,offset:p},d=!1);;){if(0===v){if(""===f)break;v=O(f,r),f=f.slice(v)}if(p=a?p-v:p+v,(h-=v)<0){v=-h;break}v=0,yield{path:m,offset:p}}}}}function O(e,t){return"character"===t?Oe(e):"word"===t?(e=>{for(var t,n=0,r=0,o=!1;t=e.charAt(r);){var a=Oe(t);t=e.slice(r,r+a);var i=e.slice(r+a);if(we(t,i))o=!0,n+=a;else{if(o)break;n+=a}r+=a}return n})(e):"line"===t||"block"===t?e.length:1}},previous(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:n="lowest",voids:r=!1}=t,{match:o,at:a=e.selection}=t;if(a){var i=Pe.before(e,a,{voids:r});if(i){var[,s]=Pe.first(e,[]),c=[i.path,s];if(Le.isPath(a)&&0===a.length)throw new Error("Cannot get the previous node from the root node!");if(null==o)if(Le.isPath(a)){var[u]=Pe.parent(e,a);o=e=>u.children.includes(e)}else o=()=>!0;var[l]=Pe.nodes(e,{reverse:!0,at:c,match:o,mode:n,voids:r});return l}}},range:(e,t,n)=>Je.isRange(t)&&!n?t:{anchor:Pe.start(e,t),focus:Pe.end(e,n||t)},rangeRef(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:r="forward"}=n,o={current:t,affinity:r,unref(){var{current:t}=o;return Pe.rangeRefs(e).delete(o),o.current=null,t}};return Pe.rangeRefs(e).add(o),o},rangeRefs(e){var t=fe.get(e);return t||(t=new Set,fe.set(e,t)),t},removeMark(e,t){e.removeMark(t)},start:(e,t)=>Pe.point(e,t,{edge:"start"}),string(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:r=!1}=n,o=Pe.range(e,t),[a,i]=Je.edges(o),s="";for(var[c,u]of Pe.nodes(e,{at:o,match:Ye.isText,voids:r})){var l=c.text;Le.equals(u,i.path)&&(l=l.slice(0,i.offset)),Le.equals(u,a.path)&&(l=l.slice(a.offset)),s+=l}return s},unhangRange(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:r=!1}=n,[o,a]=Je.edges(t);if(0!==o.offset||0!==a.offset||Je.isCollapsed(t))return t;var i=Pe.above(e,{at:a,match:t=>Pe.isBlock(e,t)}),s=i?i[1]:[],c={anchor:Pe.start(e,[]),focus:a},u=!0;for(var[l,d]of Pe.nodes(e,{at:c,match:Ye.isText,reverse:!0,voids:r}))if(u)u=!1;else if(""!==l.text||Le.isBefore(d,s)){a={path:d,offset:l.text.length};break}return{anchor:o,focus:a}},void(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Pe.above(e,Se(Se({},t),{},{match:t=>Pe.isVoid(e,t)}))},withoutNormalizing(e,t){var n=Pe.isNormalizing(e);ue.set(e,!1);try{t()}finally{ue.set(e,n)}Pe.normalize(e)}},je={isSpan:e=>Array.isArray(e)&&2===e.length&&e.every(Le.isPath)},De=new WeakMap,Be={ancestor(e,t){var n=Be.get(e,t);if(Ye.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(n));return n},*ancestors(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var r of Le.ancestors(t,n)){var o=[Be.ancestor(e,r),r];yield o}},child(e,t){if(Ye.isText(e))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(e)));var n=e.children[t];if(null==n)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(JSON.stringify(e)));return n},*children(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{reverse:r=!1}=n,o=Be.ancestor(e,t),{children:a}=o,i=r?a.length-1:0;r?i>=0:i<a.length;){var s=Be.child(o,i),c=t.concat(i);yield[s,c],i=r?i-1:i+1}},common(e,t,n){var r=Le.common(t,n);return[Be.get(e,r),r]},descendant(e,t){var n=Be.get(e,t);if(Pe.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(n));return n},*descendants(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[n,r]of Be.nodes(e,t))0!==r.length&&(yield[n,r])},*elements(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[n,r]of Be.nodes(e,t))Ne.isElement(n)&&(yield[n,r])},extractProps:e=>Ne.isAncestor(e)?me(e,["children"]):me(e,["text"]),first(e,t){for(var n=t.slice(),r=Be.get(e,n);r&&!Ye.isText(r)&&0!==r.children.length;)r=r.children[0],n.push(0);return[r,n]},fragment(e,t){if(Ye.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(e)));return te({children:e.children},e=>{var[n,r]=Je.edges(t),o=Be.nodes(e,{reverse:!0,pass:e=>{var[,n]=e;return!Je.includes(t,n)}});for(var[,a]of o){if(!Je.includes(t,a)){var i=Be.parent(e,a),s=a[a.length-1];i.children.splice(s,1)}if(Le.equals(a,r.path)){var c=Be.leaf(e,a);c.text=c.text.slice(0,r.offset)}if(Le.equals(a,n.path)){var u=Be.leaf(e,a);u.text=u.text.slice(n.offset)}}Pe.isEditor(e)&&(e.selection=null)}).children},get(e,t){for(var n=e,r=0;r<t.length;r++){var o=t[r];if(Ye.isText(n)||!n.children[o])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(JSON.stringify(e)));n=n.children[o]}return n},has(e,t){for(var n=e,r=0;r<t.length;r++){var o=t[r];if(Ye.isText(n)||!n.children[o])return!1;n=n.children[o]}return!0},isNode:e=>Ye.isText(e)||Ne.isElement(e)||Pe.isEditor(e),isNodeList(e){if(!Array.isArray(e))return!1;var t=De.get(e);if(void 0!==t)return t;var n=e.every(e=>Be.isNode(e));return De.set(e,n),n},last(e,t){for(var n=t.slice(),r=Be.get(e,n);r&&!Ye.isText(r)&&0!==r.children.length;){var o=r.children.length-1;r=r.children[o],n.push(o)}return[r,n]},leaf(e,t){var n=Be.get(e,t);if(!Ye.isText(n))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(n));return n},*levels(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var r of Le.levels(t,n)){var o=Be.get(e,r);yield[o,r]}},matches:(e,t)=>Ne.isElement(e)&&Ne.isElementProps(t)&&Ne.matches(e,t)||Ye.isText(e)&&Ye.isTextProps(t)&&Ye.matches(e,t),*nodes(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{pass:n,reverse:r=!1}=t,{from:o=[],to:a}=t,i=new Set,s=[],c=e;!a||!(r?Le.isBefore(s,a):Le.isAfter(s,a));)if(i.has(c)||(yield[c,s]),i.has(c)||Ye.isText(c)||0===c.children.length||null!=n&&!1!==n([c,s])){if(0===s.length)break;if(!r){var u=Le.next(s);if(Be.has(e,u)){s=u,c=Be.get(e,s);continue}}if(r&&0!==s[s.length-1])s=Le.previous(s),c=Be.get(e,s);else s=Le.parent(s),c=Be.get(e,s),i.add(c)}else{i.add(c);var l=r?c.children.length-1:0;Le.isAncestor(s,o)&&(l=o[s.length]),s=s.concat(l),c=Be.get(e,s)}},parent(e,t){var n=Le.parent(t),r=Be.get(e,n);if(Ye.isText(r))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return r},string:e=>Ye.isText(e)?e.text:e.children.map(Be.string).join(""),*texts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[n,r]of Be.nodes(e,t))Ye.isText(n)&&(yield[n,r])}};function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me={isNodeOperation:e=>Me.isOperation(e)&&e.type.endsWith("_node"),isOperation(e){if(!Object(r.a)(e))return!1;switch(e.type){case"insert_node":return Le.isPath(e.path)&&Be.isNode(e.node);case"insert_text":return"number"==typeof e.offset&&"string"==typeof e.text&&Le.isPath(e.path);case"merge_node":return"number"==typeof e.position&&Le.isPath(e.path)&&Object(r.a)(e.properties);case"move_node":return Le.isPath(e.path)&&Le.isPath(e.newPath);case"remove_node":return Le.isPath(e.path)&&Be.isNode(e.node);case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&Le.isPath(e.path);case"set_node":return Le.isPath(e.path)&&Object(r.a)(e.properties)&&Object(r.a)(e.newProperties);case"set_selection":return null===e.properties&&Je.isRange(e.newProperties)||null===e.newProperties&&Je.isRange(e.properties)||Object(r.a)(e.properties)&&Object(r.a)(e.newProperties);case"split_node":return Le.isPath(e.path)&&"number"==typeof e.position&&Object(r.a)(e.properties);default:return!1}},isOperationList:e=>Array.isArray(e)&&e.every(e=>Me.isOperation(e)),isSelectionOperation:e=>Me.isOperation(e)&&e.type.endsWith("_selection"),isTextOperation:e=>Me.isOperation(e)&&e.type.endsWith("_text"),inverse(e){switch(e.type){case"insert_node":return _e(_e({},e),{},{type:"remove_node"});case"insert_text":return _e(_e({},e),{},{type:"remove_text"});case"merge_node":return _e(_e({},e),{},{type:"split_node",path:Le.previous(e.path)});case"move_node":var{newPath:t,path:n}=e;if(Le.equals(t,n))return e;if(Le.isSibling(n,t))return _e(_e({},e),{},{path:t,newPath:n});var r=Le.transform(n,e),o=Le.transform(Le.next(n),e);return _e(_e({},e),{},{path:r,newPath:o});case"remove_node":return _e(_e({},e),{},{type:"insert_node"});case"remove_text":return _e(_e({},e),{},{type:"insert_text"});case"set_node":var{properties:a,newProperties:i}=e;return _e(_e({},e),{},{properties:i,newProperties:a});case"set_selection":var{properties:s,newProperties:c}=e;return _e(_e({},e),{},null==s?{properties:c,newProperties:null}:null==c?{properties:null,newProperties:s}:{properties:c,newProperties:s});case"split_node":return _e(_e({},e),{},{type:"merge_node",path:Le.next(e.path)})}}},Le={ancestors(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=t,r=Le.levels(e,t);return r=n?r.slice(1):r.slice(0,-1)},common(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var o=e[r];if(o!==t[r])break;n.push(o)}return n},compare(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter(e,t){var n=e.length-1,r=e.slice(0,n),o=t.slice(0,n),a=e[n],i=t[n];return Le.equals(r,o)&&a>i},endsAt(e,t){var n=e.length,r=e.slice(0,n),o=t.slice(0,n);return Le.equals(r,o)},endsBefore(e,t){var n=e.length-1,r=e.slice(0,n),o=t.slice(0,n),a=e[n],i=t[n];return Le.equals(r,o)&&a<i},equals:(e,t)=>e.length===t.length&&e.every((e,n)=>e===t[n]),hasPrevious:e=>e[e.length-1]>0,isAfter:(e,t)=>1===Le.compare(e,t),isAncestor:(e,t)=>e.length<t.length&&0===Le.compare(e,t),isBefore:(e,t)=>-1===Le.compare(e,t),isChild:(e,t)=>e.length===t.length+1&&0===Le.compare(e,t),isCommon:(e,t)=>e.length<=t.length&&0===Le.compare(e,t),isDescendant:(e,t)=>e.length>t.length&&0===Le.compare(e,t),isParent:(e,t)=>e.length+1===t.length&&0===Le.compare(e,t),isPath:e=>Array.isArray(e)&&(0===e.length||"number"==typeof e[0]),isSibling(e,t){if(e.length!==t.length)return!1;var n=e.slice(0,-1),r=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&Le.equals(n,r)},levels(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=t,r=[],o=0;o<=e.length;o++)r.push(e.slice(0,o));return n&&r.reverse(),r},next(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},parent(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!Le.isAncestor(t,e)&&!Le.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return te(e,r=>{var{affinity:o="forward"}=n;if(0!==e.length)switch(t.type){case"insert_node":var{path:a}=t;(Le.equals(a,r)||Le.endsBefore(a,r)||Le.isAncestor(a,r))&&(r[a.length-1]+=1);break;case"remove_node":var{path:i}=t;if(Le.equals(i,r)||Le.isAncestor(i,r))return null;Le.endsBefore(i,r)&&(r[i.length-1]-=1);break;case"merge_node":var{path:s,position:c}=t;Le.equals(s,r)||Le.endsBefore(s,r)?r[s.length-1]-=1:Le.isAncestor(s,r)&&(r[s.length-1]-=1,r[s.length]+=c);break;case"split_node":var{path:u,position:l}=t;if(Le.equals(u,r)){if("forward"===o)r[r.length-1]+=1;else if("backward"!==o)return null}else Le.endsBefore(u,r)?r[u.length-1]+=1:Le.isAncestor(u,r)&&e[u.length]>=l&&(r[u.length-1]+=1,r[u.length]-=l);break;case"move_node":var{path:d,newPath:f}=t;if(Le.equals(d,f))return;if(Le.isAncestor(d,r)||Le.equals(d,r)){var v=f.slice();return Le.endsBefore(d,f)&&d.length<f.length&&(v[d.length-1]-=1),v.concat(r.slice(d.length))}Le.isSibling(d,f)&&(Le.isAncestor(f,r)||Le.equals(f,r))?Le.endsBefore(d,r)?r[d.length-1]-=1:r[d.length-1]+=1:Le.endsBefore(f,r)||Le.equals(f,r)||Le.isAncestor(f,r)?(Le.endsBefore(d,r)&&(r[d.length-1]-=1),r[f.length-1]+=1):Le.endsBefore(d,r)&&(Le.equals(f,r)&&(r[f.length-1]+=1),r[d.length-1]-=1)}})}},Ie={transform(e,t){var{current:n,affinity:r}=e;if(null!=n){var o=Le.transform(n,t,{affinity:r});e.current=o,null==o&&e.unref()}}};function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ke={compare(e,t){var n=Le.compare(e.path,t.path);return 0===n?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter:(e,t)=>1===Ke.compare(e,t),isBefore:(e,t)=>-1===Ke.compare(e,t),equals:(e,t)=>e.offset===t.offset&&Le.equals(e.path,t.path),isPoint:e=>Object(r.a)(e)&&"number"==typeof e.offset&&Le.isPath(e.path),transform(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return te(e,e=>{var{affinity:r="forward"}=n,{path:o,offset:a}=e;switch(t.type){case"insert_node":case"move_node":e.path=Le.transform(o,t,n);break;case"insert_text":Le.equals(t.path,o)&&t.offset<=a&&(e.offset+=t.text.length);break;case"merge_node":Le.equals(t.path,o)&&(e.offset+=t.position),e.path=Le.transform(o,t,n);break;case"remove_text":Le.equals(t.path,o)&&t.offset<=a&&(e.offset-=Math.min(a-t.offset,t.text.length));break;case"remove_node":if(Le.equals(t.path,o)||Le.isAncestor(t.path,o))return null;e.path=Le.transform(o,t,n);break;case"split_node":if(Le.equals(t.path,o)){if(t.position===a&&null==r)return null;(t.position<a||t.position===a&&"forward"===r)&&(e.offset-=t.position,e.path=Le.transform(o,t,qe(qe({},n),{},{affinity:"forward"})))}else e.path=Le.transform(o,t,n)}})}},Ue={transform(e,t){var{current:n,affinity:r}=e;if(null!=n){var o=Ke.transform(n,t,{affinity:r});e.current=o,null==o&&e.unref()}}};function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Je={edges(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=t,{anchor:r,focus:o}=e;return Je.isBackward(e)===n?[r,o]:[o,r]},end(e){var[,t]=Je.edges(e);return t},equals:(e,t)=>Ke.equals(e.anchor,t.anchor)&&Ke.equals(e.focus,t.focus),includes(e,t){if(Je.isRange(t)){if(Je.includes(e,t.anchor)||Je.includes(e,t.focus))return!0;var[n,r]=Je.edges(e),[o,a]=Je.edges(t);return Ke.isBefore(n,o)&&Ke.isAfter(r,a)}var[i,s]=Je.edges(e),c=!1,u=!1;return Ke.isPoint(t)?(c=Ke.compare(t,i)>=0,u=Ke.compare(t,s)<=0):(c=Le.compare(t,i.path)>=0,u=Le.compare(t,s.path)<=0),c&&u},intersection(e,t){var n=me(e,["anchor","focus"]),[r,o]=Je.edges(e),[a,i]=Je.edges(t),s=Ke.isBefore(r,a)?a:r,c=Ke.isBefore(o,i)?o:i;return Ke.isBefore(c,s)?null:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({anchor:s,focus:c},n)},isBackward(e){var{anchor:t,focus:n}=e;return Ke.isAfter(t,n)},isCollapsed(e){var{anchor:t,focus:n}=e;return Ke.equals(t,n)},isExpanded:e=>!Je.isCollapsed(e),isForward:e=>!Je.isBackward(e),isRange:e=>Object(r.a)(e)&&Ke.isPoint(e.anchor)&&Ke.isPoint(e.focus),*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=Je.edges(e);return t},transform(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:a="inward"}=o;return"inward"===a?Je.isForward(e)?(n="forward",r="backward"):(n="backward",r="forward"):"outward"===a?Je.isForward(e)?(n="backward",r="forward"):(n="forward",r="backward"):(n=a,r=a),te(e,e=>{var o=Ke.transform(e.anchor,t,{affinity:n}),a=Ke.transform(e.focus,t,{affinity:r});if(!o||!a)return null;e.anchor=o,e.focus=a})}},Ve={transform(e,t){var{current:n,affinity:r}=e;if(null!=n){var o=Je.transform(n,t,{affinity:r});e.current=o,null==o&&e.unref()}}};function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye={equals(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{loose:r=!1}=n;function o(e){return me(e,["text"])}return ae()(r?o(e):e,r?o(t):t)},isText:e=>Object(r.a)(e)&&"string"==typeof e.text,isTextList:e=>Array.isArray(e)&&e.every(e=>Ye.isText(e)),isTextProps:e=>void 0!==e.text,matches(e,t){for(var n in t)if("text"!==n&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations(e,t){var n=[Xe({},e)];for(var r of t){var o=me(r,["anchor","focus"]),[a,i]=Je.edges(r),s=[],c=0;for(var u of n){var{length:l}=u.text,d=c;if(c+=l,a.offset<=d&&i.offset>=c)Object.assign(u,o),s.push(u);else if(a.offset!==i.offset&&(a.offset===c||i.offset===d)||a.offset>c||i.offset<d||i.offset===d&&0!==d)s.push(u);else{var f=u,v=void 0,h=void 0;if(i.offset<c){var p=i.offset-d;h=Xe(Xe({},f),{},{text:f.text.slice(p)}),f=Xe(Xe({},f),{},{text:f.text.slice(0,p)})}if(a.offset>d){var y=a.offset-d;v=Xe(Xe({},f),{},{text:f.text.slice(0,y)}),f=Xe(Xe({},f),{},{text:f.text.slice(y)})}Object.assign(f,o),v&&s.push(v),s.push(f),h&&s.push(h)}}n=s}return n}};function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et={insertNodes(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Pe.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:o=!1,mode:a="lowest"}=n,{at:i,match:s,select:c}=n;if(Be.isNode(t)&&(t=[t]),0!==t.length){var[u]=t;if(i||(i=e.selection?e.selection:e.children.length>0?Pe.end(e,[]):[0],c=!0),null==c&&(c=!1),Je.isRange(i))if(r||(i=Pe.unhangRange(e,i)),Je.isCollapsed(i))i=i.anchor;else{var[,l]=Je.edges(i),d=Pe.pointRef(e,l);lt.delete(e,{at:i}),i=d.unref()}if(Ke.isPoint(i)){null==s&&(s=Ye.isText(u)?e=>Ye.isText(e):e.isInline(u)?t=>Ye.isText(t)||Pe.isInline(e,t):t=>Pe.isBlock(e,t));var[f]=Pe.nodes(e,{at:i.path,match:s,mode:a,voids:o});if(!f)return;var[,v]=f,h=Pe.pathRef(e,v),p=Pe.isEnd(e,i,v);lt.splitNodes(e,{at:i,match:s,mode:a,voids:o});var y=h.unref();i=p?Le.next(y):y}var m=Le.parent(i),g=i[i.length-1];if(o||!Pe.void(e,{at:m})){for(var k of t){var b=m.concat(g);g++,e.apply({type:"insert_node",path:b,node:k})}if(c){var O=Pe.end(e,i);O&&lt.select(e,O)}}}})},liftNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pe.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:r="lowest",voids:o=!1}=t,{match:a}=t;if(null==a&&(a=Le.isPath(n)?rt(e,n):t=>Pe.isBlock(e,t)),n){var i=Pe.nodes(e,{at:n,match:a,mode:r,voids:o}),s=Array.from(i,t=>{var[,n]=t;return Pe.pathRef(e,n)});for(var c of s){var u=c.unref();if(u.length<2)throw new Error("Cannot lift node at a path [".concat(u,"] because it has a depth of less than `2`."));var l=Pe.node(e,Le.parent(u)),[d,f]=l,v=u[u.length-1],{length:h}=d.children;if(1===h){var p=Le.next(f);lt.moveNodes(e,{at:u,to:p,voids:o}),lt.removeNodes(e,{at:f,voids:o})}else if(0===v)lt.moveNodes(e,{at:u,to:f,voids:o});else if(v===h-1){var y=Le.next(f);lt.moveNodes(e,{at:u,to:y,voids:o})}else{var m=Le.next(u),g=Le.next(f);lt.splitNodes(e,{at:m,voids:o}),lt.moveNodes(e,{at:u,to:g,voids:o})}}}})},mergeNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pe.withoutNormalizing(e,()=>{var{match:n,at:r=e.selection}=t,{hanging:o=!1,voids:a=!1,mode:i="lowest"}=t;if(r){if(null==n)if(Le.isPath(r)){var[s]=Pe.parent(e,r);n=e=>s.children.includes(e)}else n=t=>Pe.isBlock(e,t);if(!o&&Je.isRange(r)&&(r=Pe.unhangRange(e,r)),Je.isRange(r))if(Je.isCollapsed(r))r=r.anchor;else{var[,c]=Je.edges(r),u=Pe.pointRef(e,c);lt.delete(e,{at:r}),r=u.unref(),null==t.at&&lt.select(e,r)}var[l]=Pe.nodes(e,{at:r,match:n,voids:a,mode:i}),d=Pe.previous(e,{at:r,match:n,voids:a,mode:i});if(l&&d){var[f,v]=l,[h,p]=d;if(0!==v.length&&0!==p.length){var y,m,g=Le.next(p),k=Le.common(v,p),b=Le.isSibling(v,p),O=Array.from(Pe.levels(e,{at:v}),e=>{var[t]=e;return t}).slice(k.length).slice(0,-1),w=Pe.above(e,{at:v,mode:"highest",match:t=>O.includes(t)&&tt(e,t)}),x=w&&Pe.pathRef(e,w[1]);if(Ye.isText(f)&&Ye.isText(h)){var A=me(f,["text"]);m=h.text.length,y=A}else{if(!Ne.isElement(f)||!Ne.isElement(h))throw new Error("Cannot merge the node at path [".concat(v,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(f)," ").concat(JSON.stringify(h)));A=me(f,["children"]);m=h.children.length,y=A}b||lt.moveNodes(e,{at:v,to:g,voids:a}),x&&lt.removeNodes(e,{at:x.current,voids:a}),Ne.isElement(h)&&Pe.isEmpty(e,h)||Ye.isText(h)&&""===h.text?lt.removeNodes(e,{at:p,voids:a}):e.apply({type:"merge_node",path:g,position:m,properties:y}),x&&x.unref()}}}})},moveNodes(e,t){Pe.withoutNormalizing(e,()=>{var{to:n,at:r=e.selection,mode:o="lowest",voids:a=!1}=t,{match:i}=t;if(r){null==i&&(i=Le.isPath(r)?rt(e,r):t=>Pe.isBlock(e,t));var s=Pe.pathRef(e,n),c=Pe.nodes(e,{at:r,match:i,mode:o,voids:a}),u=Array.from(c,t=>{var[,n]=t;return Pe.pathRef(e,n)});for(var l of u){var d=l.unref(),f=s.current;0!==d.length&&e.apply({type:"move_node",path:d,newPath:f}),s.current&&Le.isSibling(f,d)&&Le.isAfter(f,d)&&(s.current=Le.next(s.current))}s.unref()}})},removeNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pe.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:r=!1,mode:o="lowest"}=t,{at:a=e.selection,match:i}=t;if(a){null==i&&(i=Le.isPath(a)?rt(e,a):t=>Pe.isBlock(e,t)),!n&&Je.isRange(a)&&(a=Pe.unhangRange(e,a));var s=Pe.nodes(e,{at:a,match:i,mode:o,voids:r}),c=Array.from(s,t=>{var[,n]=t;return Pe.pathRef(e,n)});for(var u of c){var l=u.unref();if(l){var[d]=Pe.node(e,l);e.apply({type:"remove_node",path:l,node:d})}}}})},setNodes(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Pe.withoutNormalizing(e,()=>{var{match:r,at:o=e.selection}=n,{hanging:a=!1,mode:i="lowest",split:s=!1,voids:c=!1}=n;if(o){if(null==r&&(r=Le.isPath(o)?rt(e,o):t=>Pe.isBlock(e,t)),!a&&Je.isRange(o)&&(o=Pe.unhangRange(e,o)),s&&Je.isRange(o)){var u=Pe.rangeRef(e,o,{affinity:"inward"}),[l,d]=Je.edges(o),f="lowest"===i?"lowest":"highest",v=Pe.isEnd(e,d,d.path);lt.splitNodes(e,{at:d,match:r,mode:f,voids:c,always:!v});var h=Pe.isStart(e,l,l.path);lt.splitNodes(e,{at:l,match:r,mode:f,voids:c,always:!h}),o=u.unref(),null==n.at&&lt.select(e,o)}for(var[p,y]of Pe.nodes(e,{at:o,match:r,mode:i,voids:c})){var m={},g={};if(0!==y.length){for(var k in t)"children"!==k&&"text"!==k&&t[k]!==p[k]&&(p.hasOwnProperty(k)&&(m[k]=p[k]),g[k]=t[k]);0!==Object.keys(g).length&&e.apply({type:"set_node",path:y,properties:m,newProperties:g})}}}})},splitNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pe.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:r=!1}=t,{match:o,at:a=e.selection,height:i=0,always:s=!1}=t;if(null==o&&(o=t=>Pe.isBlock(e,t)),Je.isRange(a)&&(a=nt(e,a)),Le.isPath(a)){var c=a,u=Pe.point(e,c),[l]=Pe.parent(e,c);o=e=>e===l,i=u.path.length-c.length+1,a=u,s=!0}if(a){var d=Pe.pointRef(e,a,{affinity:"backward"}),[f]=Pe.nodes(e,{at:a,match:o,mode:n,voids:r});if(f){var v=Pe.void(e,{at:a,mode:"highest"});if(!r&&v){var[h,p]=v;if(Ne.isElement(h)&&e.isInline(h)){var y=Pe.after(e,p);if(!y){var m=Le.next(p);lt.insertNodes(e,{text:""},{at:m,voids:r}),y=Pe.point(e,m)}a=y,s=!0}i=a.path.length-p.length+1,s=!0}var g=Pe.pointRef(e,a),k=a.path.length-i,[,b]=f,O=a.path.slice(0,k),w=0===i?a.offset:a.path[k]+0;for(var[x,A]of Pe.levels(e,{at:O,reverse:!0,voids:r})){var C=!1;if(A.length<b.length||0===A.length||!r&&Pe.isVoid(e,x))break;var E=d.current,N=Pe.isEnd(e,E,A);if(s||!d||!Pe.isEdge(e,E,A)){C=!0;var T=Be.extractProps(x);e.apply({type:"split_node",path:A,position:w,properties:T})}w=A[A.length-1]+(C||N?1:0)}if(null==t.at){var S=g.current||Pe.end(e,[]);lt.select(e,S)}d.unref(),g.unref()}}})},unsetNodes(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var r={};for(var o of t)r[o]=null;lt.setNodes(e,r,n)},unwrapNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pe.withoutNormalizing(e,()=>{var{mode:n="lowest",split:r=!1,voids:o=!1}=t,{at:a=e.selection,match:i}=t;if(a){null==i&&(i=Le.isPath(a)?rt(e,a):t=>Pe.isBlock(e,t)),Le.isPath(a)&&(a=Pe.range(e,a));var s=Je.isRange(a)?Pe.rangeRef(e,a):null,c=Pe.nodes(e,{at:a,match:i,mode:n,voids:o}),u=Array.from(c,t=>{var[,n]=t;return Pe.pathRef(e,n)}),l=function(t){var n=t.unref(),[a]=Pe.node(e,n),i=Pe.range(e,n);r&&s&&(i=Je.intersection(s.current,i)),lt.liftNodes(e,{at:i,match:e=>Ne.isAncestor(a)&&a.children.includes(e),voids:o})};for(var d of u)l(d);s&&s.unref()}})},wrapNodes(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Pe.withoutNormalizing(e,()=>{var{mode:r="lowest",split:o=!1,voids:a=!1}=n,{match:i,at:s=e.selection}=n;if(s){if(null==i&&(i=Le.isPath(s)?rt(e,s):e.isInline(t)?t=>Pe.isInline(e,t)||Ye.isText(t):t=>Pe.isBlock(e,t)),o&&Je.isRange(s)){var[c,u]=Je.edges(s),l=Pe.rangeRef(e,s,{affinity:"inward"});lt.splitNodes(e,{at:u,match:i,voids:a}),lt.splitNodes(e,{at:c,match:i,voids:a}),s=l.unref(),null==n.at&&lt.select(e,s)}var d=Array.from(Pe.nodes(e,{at:s,match:e.isInline(t)?t=>Pe.isBlock(e,t):e=>Pe.isEditor(e),mode:"lowest",voids:a}));for(var[,f]of d){var v=Je.isRange(s)?Je.intersection(s,Pe.range(e,f)):s;if(v){var h=Array.from(Pe.nodes(e,{at:v,match:i,mode:r,voids:a}));h.length>0&&function(){var[n]=h,r=h[h.length-1],[,o]=n,[,i]=r,s=Le.equals(o,i)?Le.parent(o):Le.common(o,i),c=Pe.range(e,o,i),u=Pe.node(e,s),[l]=u,d=s.length+1,f=Le.next(i.slice(0,d)),v=Qe(Qe({},t),{},{children:[]});lt.insertNodes(e,v,{at:f,voids:a}),lt.moveNodes(e,{at:c,match:e=>Ne.isAncestor(l)&&l.children.includes(e),to:f.concat(0),voids:a})}()}}}})}},tt=(e,t)=>{if(Ne.isElement(t)){var n=t;return!!Pe.isVoid(e,t)||1===n.children.length&&tt(e,n.children[0])}return!Pe.isEditor(t)},nt=(e,t)=>{if(Je.isCollapsed(t))return t.anchor;var[,n]=Je.edges(t),r=Pe.pointRef(e,n);return lt.delete(e,{at:t}),r.unref()},rt=(e,t)=>{var[n]=Pe.node(e,t);return e=>e===n};function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var it={collapse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{edge:n="anchor"}=t,{selection:r}=e;if(r)if("anchor"===n)lt.select(e,r.anchor);else if("focus"===n)lt.select(e,r.focus);else if("start"===n){var[o]=Je.edges(r);lt.select(e,o)}else if("end"===n){var[,a]=Je.edges(r);lt.select(e,a)}},deselect(e){var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},move(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{selection:n}=e,{distance:r=1,unit:o="character",reverse:a=!1}=t,{edge:i=null}=t;if(n){"start"===i&&(i=Je.isBackward(n)?"focus":"anchor"),"end"===i&&(i=Je.isBackward(n)?"anchor":"focus");var{anchor:s,focus:c}=n,u={distance:r,unit:o},l={};if(null==i||"anchor"===i){var d=a?Pe.before(e,s,u):Pe.after(e,s,u);d&&(l.anchor=d)}if(null==i||"focus"===i){var f=a?Pe.before(e,c,u):Pe.after(e,c,u);f&&(l.focus=f)}lt.setSelection(e,l)}},select(e,t){var{selection:n}=e;if(t=Pe.range(e,t),n)lt.setSelection(e,t);else{if(!Je.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(t)));e.apply({type:"set_selection",properties:n,newProperties:t})}},setPoint(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{selection:r}=e,{edge:o="both"}=n;if(r){"start"===o&&(o=Je.isBackward(r)?"focus":"anchor"),"end"===o&&(o=Je.isBackward(r)?"anchor":"focus");var{anchor:a,focus:i}=r,s="anchor"===o?a:i;lt.setSelection(e,{["anchor"===o?"anchor":"focus"]:at(at({},s),t)})}},setSelection(e,t){var{selection:n}=e,r={},o={};if(n){for(var a in t)("anchor"===a&&null!=t.anchor&&!Ke.equals(t.anchor,n.anchor)||"focus"===a&&null!=t.focus&&!Ke.equals(t.focus,n.focus)||"anchor"!==a&&"focus"!==a&&t[a]!==n[a])&&(r[a]=n[a],o[a]=t[a]);Object.keys(r).length>0&&e.apply({type:"set_selection",properties:r,newProperties:o})}}},st={delete(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pe.withoutNormalizing(e,()=>{var{reverse:n=!1,unit:r="character",distance:o=1,voids:a=!1}=t,{at:i=e.selection,hanging:s=!1}=t;if(i){if(Je.isRange(i)&&Je.isCollapsed(i)&&(i=i.anchor),Ke.isPoint(i)){var c=Pe.void(e,{at:i,mode:"highest"});if(!a&&c){var[,u]=c;i=u}else{var l={unit:r,distance:o};i={anchor:i,focus:n?Pe.before(e,i,l)||Pe.start(e,[]):Pe.after(e,i,l)||Pe.end(e,[])},s=!0}}if(Le.isPath(i))lt.removeNodes(e,{at:i,voids:a});else if(!Je.isCollapsed(i)){if(!s){var[,d]=Je.edges(i),f=Pe.end(e,[]);Ke.equals(d,f)||(i=Pe.unhangRange(e,i,{voids:a}))}var[v,h]=Je.edges(i),p=Pe.above(e,{match:t=>Pe.isBlock(e,t),at:v,voids:a}),y=Pe.above(e,{match:t=>Pe.isBlock(e,t),at:h,voids:a}),m=p&&y&&!Le.equals(p[1],y[1]),g=Le.equals(v.path,h.path),k=a?null:Pe.void(e,{at:v,mode:"highest"}),b=a?null:Pe.void(e,{at:h,mode:"highest"});if(k){var O=Pe.before(e,v);O&&p&&Le.isAncestor(p[1],O.path)&&(v=O)}if(b){var w=Pe.after(e,h);w&&y&&Le.isAncestor(y[1],w.path)&&(h=w)}var x,A=[];for(var C of Pe.nodes(e,{at:i,voids:a})){var[E,N]=C;x&&0===Le.compare(N,x)||(!a&&Pe.isVoid(e,E)||!Le.isCommon(N,v.path)&&!Le.isCommon(N,h.path))&&(A.push(C),x=N)}var T=Array.from(A,t=>{var[,n]=t;return Pe.pathRef(e,n)}),S=Pe.pointRef(e,v),F=Pe.pointRef(e,h);if(!g&&!k){var P=S.current,[j]=Pe.leaf(e,P),{path:D}=P,{offset:B}=v,R=j.text.slice(B);R.length>0&&e.apply({type:"remove_text",path:D,offset:B,text:R})}for(var _ of T){var M=_.unref();lt.removeNodes(e,{at:M,voids:a})}if(!b){var L=F.current,[I]=Pe.leaf(e,L),{path:z}=L,q=g?v.offset:0,K=I.text.slice(q,h.offset);K.length>0&&e.apply({type:"remove_text",path:z,offset:q,text:K})}!g&&m&&F.current&&S.current&&lt.mergeNodes(e,{at:F.current,hanging:!0,voids:a});var U=n?S.unref()||F.unref():F.unref()||S.unref();null==t.at&&U&&lt.select(e,U)}}})},insertFragment(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Pe.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:o=!1}=n,{at:a=e.selection}=n;if(t.length&&a){if(Je.isRange(a))if(r||(a=Pe.unhangRange(e,a)),Je.isCollapsed(a))a=a.anchor;else{var[,i]=Je.edges(a);if(!o&&Pe.void(e,{at:i}))return;var s=Pe.pointRef(e,i);lt.delete(e,{at:a}),a=s.unref()}else Le.isPath(a)&&(a=Pe.start(e,a));if(o||!Pe.void(e,{at:a})){var c=Pe.above(e,{at:a,match:t=>Pe.isInline(e,t),mode:"highest",voids:o});if(c){var[,u]=c;if(Pe.isEnd(e,a,u))a=Pe.after(e,u);else if(Pe.isStart(e,a,u)){a=Pe.before(e,u)}}var l=Pe.above(e,{match:t=>Pe.isBlock(e,t),at:a,voids:o}),[,d]=l,f=Pe.isStart(e,a,d),v=Pe.isEnd(e,a,d),h=!f||f&&v,p=!v,[,y]=Be.first({children:t},[]),[,m]=Be.last({children:t},[]),g=[],k=t=>{var[n,r]=t;return!(h&&Le.isAncestor(r,y)&&Ne.isElement(n)&&!e.isVoid(n)&&!e.isInline(n))&&!(p&&Le.isAncestor(r,m)&&Ne.isElement(n)&&!e.isVoid(n)&&!e.isInline(n))};for(var b of Be.nodes({children:t},{pass:k}))b[1].length>0&&k(b)&&g.push(b);var O=[],w=[],x=[],A=!0,C=!1;for(var[E]of g)Ne.isElement(E)&&!e.isInline(E)?(A=!1,C=!0,w.push(E)):A?O.push(E):x.push(E);var[N]=Pe.nodes(e,{at:a,match:t=>Ye.isText(t)||Pe.isInline(e,t),mode:"highest",voids:o}),[,T]=N,S=Pe.isStart(e,a,T),F=Pe.isEnd(e,a,T),P=Pe.pathRef(e,v?Le.next(d):d),j=Pe.pathRef(e,F?Le.next(T):T);lt.splitNodes(e,{at:a,match:t=>C?Pe.isBlock(e,t):Ye.isText(t)||Pe.isInline(e,t),mode:C?"lowest":"highest",voids:o});var D=Pe.pathRef(e,!S||S&&F?Le.next(T):T);if(lt.insertNodes(e,O,{at:D.current,match:t=>Ye.isText(t)||Pe.isInline(e,t),mode:"highest",voids:o}),lt.insertNodes(e,w,{at:P.current,match:t=>Pe.isBlock(e,t),mode:"lowest",voids:o}),lt.insertNodes(e,x,{at:j.current,match:t=>Ye.isText(t)||Pe.isInline(e,t),mode:"highest",voids:o}),!n.at){var B;B=x.length>0?Le.previous(j.current):w.length>0?Le.previous(P.current):Le.previous(D.current);var R=Pe.end(e,B);lt.select(e,R)}D.unref(),P.unref(),j.unref()}}})},insertText(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Pe.withoutNormalizing(e,()=>{var{voids:r=!1}=n,{at:o=e.selection}=n;if(o){if(Le.isPath(o)&&(o=Pe.range(e,o)),Je.isRange(o))if(Je.isCollapsed(o))o=o.anchor;else{var a=Je.end(o);if(!r&&Pe.void(e,{at:a}))return;var i=Pe.pointRef(e,a);lt.delete(e,{at:o,voids:r}),o=i.unref(),lt.setSelection(e,{anchor:o,focus:o})}if(r||!Pe.void(e,{at:o})){var{path:s,offset:c}=o;t.length>0&&e.apply({type:"insert_text",path:s,offset:c,text:t})}}})}};function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt=ut(ut(ut(ut({},{transform(e,t){e.children=ne(e.children);var n=e.selection&&ne(e.selection);try{n=((e,t,n)=>{switch(n.type){case"insert_node":var{path:r,node:o}=n,a=Be.parent(e,r),i=r[r.length-1];if(i>a.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));if(a.children.splice(i,0,o),t)for(var[s,c]of Je.points(t))t[c]=Ke.transform(s,n);break;case"insert_text":var{path:u,offset:l,text:d}=n;if(0===d.length)break;var f=Be.leaf(e,u),v=f.text.slice(0,l),h=f.text.slice(l);if(f.text=v+d+h,t)for(var[p,y]of Je.points(t))t[y]=Ke.transform(p,n);break;case"merge_node":var{path:m}=n,g=Be.get(e,m),k=Le.previous(m),b=Be.get(e,k),O=Be.parent(e,m),w=m[m.length-1];if(Ye.isText(g)&&Ye.isText(b))b.text+=g.text;else{if(Ye.isText(g)||Ye.isText(b))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(m,"] to nodes of different interfaces: ").concat(g," ").concat(b));b.children.push(...g.children)}if(O.children.splice(w,1),t)for(var[x,A]of Je.points(t))t[A]=Ke.transform(x,n);break;case"move_node":var{path:C,newPath:E}=n;if(Le.isAncestor(C,E))throw new Error("Cannot move a path [".concat(C,"] to new path [").concat(E,"] because the destination is inside itself."));var N=Be.get(e,C),T=Be.parent(e,C),S=C[C.length-1];T.children.splice(S,1);var F=Le.transform(C,n),P=Be.get(e,Le.parent(F)),j=F[F.length-1];if(P.children.splice(j,0,N),t)for(var[D,B]of Je.points(t))t[B]=Ke.transform(D,n);break;case"remove_node":var{path:R}=n,_=R[R.length-1];if(Be.parent(e,R).children.splice(_,1),t)for(var[M,L]of Je.points(t)){var I=Ke.transform(M,n);if(null!=t&&null!=I)t[L]=I;else{var z=void 0,q=void 0;for(var[K,U]of Be.texts(e)){if(-1!==Le.compare(U,R)){q=[K,U];break}z=[K,U]}z?(M.path=z[1],M.offset=z[0].text.length):q?(M.path=q[1],M.offset=0):t=null}}break;case"remove_text":var{path:W,offset:J,text:V}=n;if(0===V.length)break;var H=Be.leaf(e,W),X=H.text.slice(0,J),Y=H.text.slice(J+V.length);if(H.text=X+Y,t)for(var[Z,G]of Je.points(t))t[G]=Ke.transform(Z,n);break;case"set_node":var{path:$,properties:Q,newProperties:ee}=n;if(0===$.length)throw new Error("Cannot set properties on the root node!");var te=Be.get(e,$);for(var ne in ee){if("children"===ne||"text"===ne)throw new Error('Cannot set the "'.concat(ne,'" property of nodes!'));var re=ee[ne];null==re?delete te[ne]:te[ne]=re}for(var oe in Q)ee.hasOwnProperty(oe)||delete te[oe];break;case"set_selection":var{newProperties:ae}=n;if(null==ae)t=ae;else{if(null==t){if(!Je.isRange(ae))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(ae)," when there is no current selection."));t=Ge({},ae)}for(var ie in ae){var se=ae[ie];if(null==se){if("anchor"===ie||"focus"===ie)throw new Error('Cannot remove the "'.concat(ie,'" selection property'));delete t[ie]}else t[ie]=se}}break;case"split_node":var{path:ce,position:ue,properties:le}=n;if(0===ce.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(ce,"] because the root node cannot be split."));var de,fe=Be.get(e,ce),ve=Be.parent(e,ce),he=ce[ce.length-1];if(Ye.isText(fe)){var pe=fe.text.slice(0,ue),ye=fe.text.slice(ue);fe.text=pe,de=Ge(Ge({},le),{},{text:ye})}else{var me=fe.children.slice(0,ue),ge=fe.children.slice(ue);fe.children=me,de=Ge(Ge({},le),{},{children:ge})}if(ve.children.splice(he+1,0,de),t)for(var[ke,be]of Je.points(t))t[be]=Ke.transform(ke,n)}return t})(e,n,t)}finally{e.children=re(e.children),e.selection=n?i(n)?re(n):n:null}}}),et),it),st)},134:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return de})),n.d(t,"b",(function(){return we})),n.d(t,"c",(function(){return U})),n.d(t,"d",(function(){return re})),n.d(t,"e",(function(){return xt})),n.d(t,"f",(function(){return ae})),n.d(t,"g",(function(){return Tt})),n.d(t,"h",(function(){return J})),n.d(t,"i",(function(){return ue})),n.d(t,"j",(function(){return z})),n.d(t,"k",(function(){return Q})),n.d(t,"l",(function(){return Y})),n.d(t,"m",(function(){return ce})),n.d(t,"n",(function(){return ve}));var r=n(841),o=n(1753),a=n.n(o),i=n(1723),s=n(1724),c=n(1860),u=n.n(c),l=n(1729),d=n(163),f=n.n(d),v=n(1722),h=n.n(v),p=n(1754),y=n.n(p),m=void 0,g=void 0;function k(){m=0,g=function(){return""+m++}}k();var b={create:function(e){if(null==e)return g();if("string"==typeof e)return e;throw new Error("Keys must be strings, but you passed: "+e)},setGenerator:function(e){g=e},resetGenerator:k},O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),A=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},N=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},T=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},S=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};function P(e,t){for(var n=I(e,t),r=0;r<n;r++){var o=e.get(r),a=t.get(r);if(o<a)return-1;if(o>a)return 1}return e.size===t.size?0:null}function j(e){if(null==e)return null;if(r.List.isList(e))return e;if(Array.isArray(e))return Object(r.List)(e);throw new Error("Paths can only be created from arrays or lists, but you passed: "+e)}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I(e,t),r=e.slice(0,n),o=t.slice(0,n);return[r,o]}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size-1;return R(e,0-t,n)}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size-1,r=e.get(n),o=r+t,a=e.set(n,o);return a}function _(e,t){var n=D(e,t),r=S(n,2),o=r[0],a=r[1];return e.size<t.size&&0===P(o,a)}function M(e,t){return e.equals(t)}function L(e,t){var n=e.size-1,r=D(e,t,n),o=S(r,2),a=o[0],i=o[1],s=e.get(n),c=t.get(n);return M(a,i)&&s<c}function I(e,t){return Math.min(e.size,t.size)}var z={compare:P,create:j,crop:D,decrement:B,getAncestors:function(e){return Object(r.List)().withMutations((function(t){for(var n=0;n<e.size;n++)t.push(e.slice(0,n))}))},increment:R,isAbove:_,isAfter:function(e,t){var n=D(e,t),r=S(n,2);return 1===P(r[0],r[1])},isBefore:function(e,t){var n=D(e,t),r=S(n,2);return-1===P(r[0],r[1])},isEqual:M,isOlder:function(e,t){var n=e.size-1,r=D(e,t,n),o=S(r,2),a=o[0],i=o[1],s=e.get(n),c=t.get(n);return M(a,i)&&s>c},isPath:function(e){return(r.List.isList(e)||Array.isArray(e))&&e.every((function(e){return"number"==typeof e}))},isSibling:function(e,t){if(e.size!==t.size)return!1;var n=e.butLast(),r=t.butLast();return n.equals(r)},isYounger:L,lift:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.slice(0,-1*t);return n},drop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.slice(t);return n},max:function(e,t){return Math.max(e.size,t.size)},min:I,relate:function(e,t){for(var n=[],r=0;r<e.size&&r<t.size;r++){var o=e.get(r);if(o!==t.get(r))break;n.push(o)}return j(n)},transform:function(e,t){var n=t.type,o=t.position,a=t.path;if("add_mark"===n||"insert_text"===n||"remove_mark"===n||"remove_text"===n||"set_mark"===n||"set_node"===n||"set_selection"===n||"set_value"===n||"add_annotation"===n||"remove_annotation"===n||"set_annotation"===n||0===e.size)return Object(r.List)([e]);var i=a.size-1,s=M(a,e),c=L(a,e),u=_(a,e);if("insert_node"===n&&(s||c||u)&&(e=R(e,1,i)),"remove_node"===n&&(c?e=B(e,1,i):(s||u)&&(e=[])),"merge_node"===n&&(s||c?e=B(e,1,i):u&&(e=R(e=B(e,1,i),o,i+1))),"split_node"===n&&(s?e=[e,R(e)]:c?e=R(e,1,i):u&&e.get(i+1)>=o&&(e=B(e=R(e,1,i),o,i+1))),"move_node"===n){var l=t.newPath;if(M(a,l))return Object(r.List)([e]);u||s?e=L(a,l)&&a.size<l.size?B(l,1,I(l,a)-1).concat(e.slice(a.size)):l.concat(e.slice(a.size)):(c&&(e=B(e,1,i)),(L(l,e)||M(l,e)||_(l,e))&&(e=R(e,1,l.size-1)))}var d=Array.isArray(e)?e:[e];return Object(r.List)(d)}},q={key:void 0,offset:void 0,path:void 0},K=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"isAfterPoint",value:function(e){return!this.isUnset&&(this.key===e.key&&this.offset>e.offset||1===z.compare(this.path,e.path))}},{key:"isAfterRange",value:function(e){return!this.isUnset&&this.isAfterPoint(e.end)}},{key:"isAtEndOfRange",value:function(e){return!this.isUnset&&this.equals(e.end)}},{key:"isAtStartOfRange",value:function(e){return!this.isUnset&&this.equals(e.start)}},{key:"isBeforePoint",value:function(e){return!this.isUnset&&(this.key===e.key&&this.offset<e.offset||-1===z.compare(this.path,e.path))}},{key:"isBeforeRange",value:function(e){return!this.isUnset&&this.isBeforePoint(e.start)}},{key:"isInRange",value:function(e){return!this.isUnset&&(this.equals(e.start)||this.equals(e.end)||this.isAfterPoint(e.start)&&this.isBeforePoint(e.end))}},{key:"isAtEndOfNode",value:function(e){if(this.isUnset)return!1;var t=e.getLastText();return this.key===t.key&&this.offset===t.text.length}},{key:"isAtStartOfNode",value:function(e){if(this.isUnset)return!1;if(0!==this.offset)return!1;var t=e.getFirstText();return this.key===t.key}},{key:"isInNode",value:function(e){return!this.isUnset&&("text"===e.object&&e.key===this.key||!!e.hasNode(this.key))}},{key:"moveBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(0===e)return this;if(e<0)return this.moveForward(-e);var t=this.setOffset(this.offset-e);return t}},{key:"moveForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(0===e)return this;if(e<0)return this.moveBackward(-e);var t=this.setOffset(this.offset+e);return t}},{key:"moveTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.key;"number"==typeof e?(t=e,e=this.path):"string"==typeof e?e=(n=e)===this.key?this.path:null:n=e.equals(this.path)?this.key:null;var r=this.merge({key:n,path:e,offset:t});return r}},{key:"moveToStartOfNode",value:function(e){var t=e.getFirstText();return this.moveTo(t.key,0)}},{key:"moveToEndOfNode",value:function(e){var t=e.getLastText();return this.moveTo(t.key,t.text.length)}},{key:"normalize",value:function(e){if(null==this.key&&null==this.path)return this.setOffset(null);var n=this.key,r=this.offset,o=this.path,a=o&&e.getNode(o);if(!a&&(a=e.getNode(n)))return this.merge({path:e.getPath(n)});if(!a){Object(i.a)(!1,"A point's `path` or `key` invalid and was reset!");var s=e.getFirstText();return s?this.merge({key:s.key,offset:0,path:e.getPath(s.key)}):t.create()}if("text"!==a.object){Object(i.a)(!1,"A point should not reference a non-text node!");var c=a.getTextAtOffset(r),u=a.getOffset(c.key);return this.merge({offset:r-u,key:c.key,path:e.getPath(c.key)})}a&&o&&n&&n!==a.key&&Object(i.a)(!1,"A point's `key` did not match its `path`!");var l=this.merge({key:a.key,path:null==o?e.getPath(a.key):o,offset:null==r?0:Math.min(r,a.text.length)});if(l.offset===a.text.length){var d=e.getClosestBlock(l.path).getNextText();d&&(l=l.merge({key:d.key,path:e.getPath(d.key),offset:0}))}return l}},{key:"setKey",value:function(e){return null!=e&&(e=b.create(e)),this.set("key",e)}},{key:"setOffset",value:function(e){return this.set("offset",e)}},{key:"setPath",value:function(e){return null!=e&&(e=z.create(e)),this.set("path",e)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,key:this.key,offset:this.offset,path:this.path&&this.path.toArray()};return e.preserveKeys||delete t.key,t}},{key:"unset",value:function(){return this.merge({key:null,offset:null,path:null})}},{key:"isSet",get:function(){return null!=this.key&&null!=this.offset&&null!=this.path}},{key:"isUnset",get:function(){return!this.isSet}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isPoint(e))return e;if(a()(e))return t.fromJSON(e);throw new Error("`Point.create` only accepts objects or points, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isPoint(e))return{key:e.key,offset:e.offset,path:e.path};if(a()(e)){var n={};return"key"in e&&(n.key=e.key),"offset"in e&&(n.offset=e.offset),"path"in e&&(n.path=z.create(e.path)),"path"in e&&!("key"in e)&&(n.key=null),"key"in e&&!("path"in e)&&(n.path=null),n}throw new Error("`Point.createProperties` only accepts objects or points, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.key,r=void 0===n?null:n,o=e.offset,a=void 0===o?null:o,i=e.path,s=void 0===i?null:i;return new t({key:r,offset:a,path:z.create(s)})}}]),t}(Object(r.Record)(q)),U=function(){function e(){w(this,e)}return x(e,null,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.Map.isMap(t))return t;if(a()(t))return e.fromJSON(t);throw new Error("`Data.create` only accepts objects or maps, but you passed it: "+t)}},{key:"fromJSON",value:function(e){return new r.Map(e)}}]),e}();U.fromJS=U.fromJSON;var W={data:void 0,type:void 0},J=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"toJSON",value:function(){return{object:this.object,type:this.type,data:this.data.toJSON()}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isMark(e))return e;if("string"==typeof e&&(e={type:e}),a()(e))return t.fromJSON(e);throw new Error("`Mark.create` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"createSet",value:function(e){if(r.Set.isSet(e)||Array.isArray(e))return new r.Set(e.map(t.create));if(null==e)return Object(r.Set)();throw new Error("`Mark.createSet` only accepts sets, arrays or null, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isMark(e))return{data:e.data,type:e.type};if("string"==typeof e)return{type:e};if(a()(e)){var n={};return"type"in e&&(n.type=e.type),"data"in e&&(n.data=U.create(e.data)),n}throw new Error("`Mark.createProperties` only accepts objects, strings or marks, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.data,o=void 0===n?{}:n,a=e.type;if("string"!=typeof a)throw new Error("`Mark.fromJS` requires a `type` string.");return new t({type:a,data:new r.Map(o)})}},{key:"isMarkSet",value:function(e){return r.Set.isSet(e)&&e.every((function(e){return t.isMark(e)}))}}]),t}(Object(r.Record)(W)),V={type:void 0,data:void 0,anchor:void 0,focus:void 0},H=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"setProperties",value:function(e){return e=t.createProperties(e),this.merge(e)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,type:this.type,data:this.data.toJSON(),anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)};return t}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isDecoration(e))return e;if(Q.isRange(e))return t.fromJSON(Q.createProperties(e));if(a()(e))return t.fromJSON(e);throw new Error("`Decoration.create` only accepts objects or decorations, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e)){var n=new r.List(e.map(t.create));return n}throw new Error("`Decoration.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isDecoration(e))return{type:e.type,data:e.data,anchor:K.createProperties(e.anchor),focus:K.createProperties(e.focus),mark:J.create(e.mark)};if(a()(e)){var n={};return"type"in e&&(n.type=e.type),"data"in e&&(n.data=U.create(e.data)),"anchor"in e&&(n.anchor=K.create(e.anchor)),"focus"in e&&(n.focus=K.create(e.focus)),n}throw new Error("`Decoration.createProperties` only accepts objects or decorations, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.anchor,r=e.focus,o=e.type,a=e.data;if(e.mark&&!o&&(Object(i.a)(!1,"As of slate@0.47 the `decoration.mark` property has been changed to `decoration.type` and `decoration.data` directly."),o=e.mark.type,a=e.mark.data),!o)throw new Error("Decorations must be created with a `type`, but you passed: "+JSON.stringify(e));return new t({type:o,data:U.create(a||{}),anchor:K.fromJSON(n||{}),focus:K.fromJSON(r||{})})}}]),t}(Object(r.Record)(V)),X={anchor:void 0,focus:void 0,isFocused:void 0,marks:void 0},Y=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"setIsFocused",value:function(e){return this.set("isFocused",e)}},{key:"setMarks",value:function(e){return this.set("marks",e)}},{key:"setProperties",value:function(e){var n=e=t.createProperties(e),r=n.anchor,o=n.focus,a=N(n,["anchor","focus"]);return r&&(a.anchor=K.create(r)),o&&(a.focus=K.create(o)),this.merge(a)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e),isFocused:this.isFocused,marks:null==this.marks?null:this.marks.toArray().map((function(e){return e.toJSON()}))};return t}},{key:"isBlurred",get:function(){return!this.isFocused}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isSelection(e))return e;if(Q.isRange(e))return t.fromJSON(Q.createProperties(e));if(a()(e))return t.fromJSON(e);throw new Error("`Selection.create` only accepts objects, ranges or selections, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isSelection(e))return{anchor:K.createProperties(e.anchor),focus:K.createProperties(e.focus),isFocused:e.isFocused,marks:e.marks};if(Q.isRange(e))return{anchor:K.createProperties(e.anchor),focus:K.createProperties(e.focus)};if(a()(e)){var n={};return"anchor"in e&&(n.anchor=K.create(e.anchor)),"focus"in e&&(n.focus=K.create(e.focus)),"isFocused"in e&&(n.isFocused=e.isFocused),"marks"in e&&(n.marks=null==e.marks?null:J.createSet(e.marks)),n}throw new Error("`Selection.createProperties` only accepts objects, ranges or selections, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.anchor,o=e.focus,a=e.isFocused,i=void 0!==a&&a,s=e.marks,c=void 0===s?null:s;return new t({anchor:K.fromJSON(n||{}),focus:K.fromJSON(o||{}),isFocused:i,marks:null==c?null:new r.Set(c.map(J.fromJSON))})}}]),t}(Object(r.Record)(X)),Z={annotation:"@@__SLATE_ANNOTATION__@@",block:"@@__SLATE_BLOCK__@@",change:"@@__SLATE_CHANGE__@@",decoration:"@@__SLATE_DECORATION__@@",document:"@@__SLATE_DOCUMENT__@@",editor:"@@__SLATE_EDITOR__@@",inline:"@@__SLATE_INLINE__@@",leaf:"@@__SLATE_LEAF__@@",mark:"@@__SLATE_MARK__@@",operation:"@@__SLATE_OPERATION__@@",point:"@@__SLATE_POINT__@@",range:"@@__SLATE_RANGE__@@",selection:"@@__SLATE_SELECTION__@@",text:"@@__SLATE_TEXT__@@",value:"@@__SLATE_VALUE__@@"};function G(e,t){return!(!t||!t[Z[e]])}var $={anchor:void 0,focus:void 0},Q=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)};return t}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isRange(e))return"range"===e.object?e:t.fromJSON(t.createProperties(e));if(a()(e))return t.fromJSON(e);throw new Error("`Range.create` only accepts objects or ranges, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e)){var n=new r.List(e.map(t.create));return n}throw new Error("`Range.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isRange(e))return{anchor:K.createProperties(e.anchor),focus:K.createProperties(e.focus)};if(a()(e)){var n={};return"anchor"in e&&(n.anchor=K.create(e.anchor)),"focus"in e&&(n.focus=K.create(e.focus)),n}throw new Error("`Range.createProperties` only accepts objects, annotations, decorations, ranges or selections, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.anchor,r=e.focus;return new t({anchor:K.fromJSON(n||{}),focus:K.fromJSON(r||{})})}},{key:"isRange",value:function(e){return G("range",e)||H.isDecoration(e)||Y.isSelection(e)}}]),t}(Object(r.Record)($)),ee={key:void 0,type:void 0,data:void 0,anchor:void 0,focus:void 0},te=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"setProperties",value:function(e){return e=t.createProperties(e),this.merge(e)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,key:this.key,type:this.type,data:this.data.toJSON(),anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)};return t}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isAnnotation(e))return e;if(Q.isRange(e))return t.fromJSON(Q.createProperties(e));if(a()(e))return t.fromJSON(e);throw new Error("`Annotation.create` only accepts objects or annotations, but you passed it: "+e)}},{key:"createMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.Map.isMap(e))return e;if(a()(e)){var n={};for(var o in e){var i=e[o],s=t.create(i);n[o]=s}return Object(r.Map)(n)}throw new Error("`Annotation.createMap` only accepts arrays or lists, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isAnnotation(e))return{key:e.key,type:e.type,data:e.data,anchor:K.createProperties(e.anchor),focus:K.createProperties(e.focus)};if(a()(e)){var n={};return"key"in e&&(n.key=e.key),"type"in e&&(n.type=e.type),"data"in e&&(n.data=U.create(e.data)),"anchor"in e&&(n.anchor=K.create(e.anchor)),"focus"in e&&(n.focus=K.create(e.focus)),n}throw new Error("`Annotation.createProperties` only accepts objects or annotations, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.key,r=e.type,o=e.data,a=e.anchor,i=e.focus;if(!n)throw new Error("Annotations must be created with a `key`, but you passed: "+JSON.stringify(e));if(!r)throw new Error("Annotations must be created with a `type`, but you passed: "+JSON.stringify(e));return new t({key:n,type:r,data:U.create(o||{}),anchor:K.fromJSON(a||{}),focus:K.fromJSON(i||{})})}}]),t}(Object(r.Record)(ee)),ne={data:void 0,key:void 0,nodes:void 0},re=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,data:this.data.toJSON(),nodes:this.nodes.toArray().map((function(t){return t.toJSON(e)}))};return e.preserveKeys&&(t.key=this.key),t}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isDocument(e))return e;if((r.List.isList(e)||Array.isArray(e))&&(e={nodes:e}),a()(e))return t.fromJSON(e);throw new Error("`Document.create` only accepts objects, arrays, lists or documents, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isDocument(e))return e;var n=e.data,o=void 0===n?{}:n,a=e.key,i=void 0===a?b.create():a,s=e.nodes,c=void 0===s?[]:s;return new t({key:i,data:new r.Map(o),nodes:ue.createList(c)})}}]),t}(Object(r.Record)(ne)),oe={data:void 0,key:void 0,nodes:void 0,type:void 0},ae=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,type:this.type,data:this.data.toJSON(),nodes:this.nodes.toArray().map((function(t){return t.toJSON(e)}))};return e.preserveKeys&&(t.key=this.key),t}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isInline(e))return e;if("string"==typeof e&&(e={type:e}),a()(e))return t.fromJSON(e);throw new Error("`Inline.create` only accepts objects, strings or inlines, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e)){var n=new r.List(e.map(t.create));return n}throw new Error("`Inline.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isInline(e))return e;var n=e.data,o=void 0===n?{}:n,a=e.key,i=void 0===a?b.create():a,s=e.nodes,c=void 0===s?[]:s,u=e.type;if("string"!=typeof u)throw new Error("`Inline.fromJS` requires a `type` string.");return new t({key:i,type:u,data:new r.Map(o),nodes:ue.createList(c)})}},{key:"isInlineList",value:function(e){return r.List.isList(e)&&e.every((function(e){return t.isInline(e)}))}}]),t}(Object(r.Record)(oe)),ie={key:void 0,marks:void 0,text:void 0},se=Object(r.Record)({text:void 0,marks:void 0,annotations:void 0,decorations:void 0}),ce=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"addMark",value:function(e){e=J.create(e);var t=this.marks.add(e);return this.set("marks",t)}},{key:"addMarks",value:function(e){return e=J.createSet(e),this.set("marks",this.marks.union(e))}},{key:"getLeaves",value:function(e,t){var n=[{text:this.text,marks:this.marks,annotations:[],decorations:[]}],o=function(e,t){return[{text:e.text.slice(0,t),marks:e.marks,annotations:[].concat(F(e.annotations)),decorations:[].concat(F(e.decorations))},{text:e.text.slice(t),marks:e.marks,annotations:[].concat(F(e.annotations)),decorations:[].concat(F(e.decorations))}]},a=function(r){var a="annotations"===r?e.values():t,i=!0,s=!1,c=void 0;try{for(var u,l=a[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value,f=d.start,v=d.end,h=[],p=0,y=!0,m=!1,g=void 0;try{for(var k,b=n[Symbol.iterator]();!(y=(k=b.next()).done);y=!0){var O=k.value,w=O.text.length,x=p;if(p+=w,f.offset<=x&&v.offset>=x+w)O[r].push(d),h.push(O);else if(f.offset>x+w||v.offset<x||v.offset===x&&0!==x)h.push(O);else{var A=O,C=void 0,E=void 0;if(v.offset<x+w){var N=o(A,v.offset-x),T=S(N,2);A=T[0],E=T[1]}if(f.offset>x){var F=o(A,f.offset-x),P=S(F,2);C=P[0],A=P[1]}A[r].push(d),C&&h.push(C),h.push(A),E&&h.push(E)}}}catch(e){m=!0,g=e}finally{try{!y&&b.return&&b.return()}finally{if(m)throw g}}n=h}}catch(e){s=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}};return a("annotations"),a("decorations"),n=n.map((function(e){return new se(C({},e,{annotations:Object(r.List)(e.annotations),decorations:Object(r.List)(e.decorations)}))})),Object(r.List)(n)}},{key:"insertText",value:function(e,t){var n=this.text,r=n.slice(0,e)+t+n.slice(e);return this.set("text",r)}},{key:"removeMark",value:function(e){e=J.create(e);var t=this.marks.remove(e);return this.set("marks",t)}},{key:"removeText",value:function(e,t){var n=this.text,r=n.slice(0,e)+n.slice(e+t);return this.set("text",r)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,text:this.text,marks:this.marks.toArray().map((function(e){return e.toJSON()}))};return e.preserveKeys&&(t.key=this.key),t}},{key:"setMark",value:function(e,t){var n=this.marks,r=J.create(e),o=r.merge(t),a=n.remove(r).add(o);return this.set("marks",a)}},{key:"splitText",value:function(e){var t=this.text;return[this.set("text",t.slice(0,e)),this.set("text",t.slice(e)).regenerateKey()]}},{key:"mergeText",value:function(e){var t=this.text+e.text;return this.set("text",t)}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t.isText(e))return e;if("string"==typeof e&&(e={text:e}),a()(e))return t.fromJSON(e);throw new Error("`Text.create` only accepts objects, arrays, strings or texts, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e)){var n=new r.List(e.map(t.create));return n}throw new Error("`Text.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isText(e))return e;Object(s.a)(null==e.leaves,"As of slate@0.46, the `leaves` property of text nodes has been removed! Each individual leaf should be created as a text node instead.");var n=e.text,r=void 0===n?"":n,o=e.marks,a=void 0===o?[]:o,i=e.key;return new t({key:void 0===i?b.create():i,text:r,marks:J.createSet(a)})}},{key:"isTextList",value:function(e){return r.List.isList(e)&&e.every((function(e){return t.isText(e)}))}}]),t}(Object(r.Record)(ie)),ue=function(){function e(){w(this,e)}return x(e,null,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.isNode(t))return t;if(a()(t)){var n=t.object;switch(!n&&t.kind&&(Object(i.a)(!1,"As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`."),n=t.kind),n){case"block":return de.create(t);case"document":return re.create(t);case"inline":return ae.create(t);case"text":return ce.create(t);default:throw new Error("`Node.create` requires a `object` string.")}}throw new Error("`Node.create` only accepts objects or nodes but you passed it: "+t)}},{key:"createList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(t)||Array.isArray(t)){var n=[];t.forEach((function(t){if(t&&"text"===t.object&&t.leaves&&Array.isArray(t.leaves)){Object(i.a)(!1,"As of slate@0.46, the `leaves` property of Text nodes has been removed. Instead, each text node contains a string of text and a unique set of marks and leaves are unnecessary.");var r=ce.createList(t.leaves).toArray();n=n.concat(r)}else{var o=e.create(t);n.push(o)}}));var o=Object(r.List)(n);return o}throw new Error("`Node.createList` only accepts lists or arrays, but you passed it: "+t)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(de.isBlock(e)||ae.isInline(e))return{data:e.data,type:e.type};if("string"==typeof e)return{type:e};if(a()(e)){var t={};return"type"in e&&(t.type=e.type),"data"in e&&(t.data=U.create(e.data)),t}throw new Error("`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var t=e.object;switch(!t&&e.kind&&(Object(i.a)(!1,"As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`."),t=e.kind),t){case"block":return de.fromJSON(e);case"document":return re.fromJSON(e);case"inline":return ae.fromJSON(e);case"text":return ce.fromJSON(e);default:throw new Error("`Node.fromJSON` requires an `object` of either 'block', 'document', 'inline' or 'text', but you passed: "+e)}}},{key:"isNode",value:function(e){return de.isBlock(e)||re.isDocument(e)||ae.isInline(e)||ce.isText(e)}},{key:"isNodeList",value:function(t){return r.List.isList(t)&&t.every((function(t){return e.isNode(t)}))}}]),e}(),le={data:void 0,key:void 0,nodes:void 0,type:void 0},de=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,type:this.type,data:this.data.toJSON(),nodes:this.nodes.toArray().map((function(t){return t.toJSON(e)}))};return e.preserveKeys&&(t.key=this.key),t}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isBlock(e))return e;if("string"==typeof e&&(e={type:e}),a()(e))return t.fromJSON(e);throw new Error("`Block.create` only accepts objects, strings or blocks, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e)){var n=new r.List(e.map(t.create));return n}throw new Error("`Block.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isBlock(e))return e;var n=e.data,o=void 0===n?{}:n,a=e.key,i=void 0===a?b.create():a,s=e.nodes,c=void 0===s?[]:s,u=e.type;if("string"!=typeof u)throw new Error("`Block.fromJSON` requires a `type` string.");return new t({key:i,type:u,data:Object(r.Map)(o),nodes:ue.createList(c)})}},{key:"isBlockList",value:function(e){return r.List.isList(e)&&e.every((function(e){return t.isBlock(e)}))}}]),t}(Object(r.Record)(le)),fe={annotations:void 0,data:void 0,document:void 0,selection:void 0},ve=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"addAnnotation",value:function(e){e=te.create(e);var t=this,n=t,r=n.annotations,o=n.document,a=e.key;return e=e.updatePoints((function(e){return e.normalize(o)})),r=r.set(a,e),t=t.set("annotations",r)}},{key:"addMark",value:function(e,t){t=J.create(t);var n=this,r=n.document;return r=r.addMark(e,t),n=n.set("document",r)}},{key:"insertNode",value:function(e,t){var n=this,r=n.document;return r=r.insertNode(e,t),n=(n=n.set("document",r)).mapRanges((function(e){return e.updatePoints((function(e){return e.setPath(null)}))}))}},{key:"insertText",value:function(e,t,n){var r=this,o=r.document,a=o.assertNode(e);return o=o.insertText(e,t,n),a=o.assertNode(e),r=(r=r.set("document",o)).mapPoints((function(e){return e.key===a.key&&e.offset>=t?e.setOffset(e.offset+n.length):e}))}},{key:"mergeNode",value:function(e){var t=this,n=t.document,r=n.mergeNode(e);e=n.resolvePath(e);var o=z.decrement(e),a=n.getNode(o),i=n.getNode(e);return t=(t=t.set("document",r)).mapRanges((function(e){if("text"===i.object){var t=a.text.length;e.anchor.key===i.key&&(e=e.moveAnchorTo(a.key,t+e.anchor.offset)),e.focus.key===i.key&&(e=e.moveFocusTo(a.key,t+e.focus.offset))}return e=e.updatePoints((function(e){return e.setPath(null)}))}))}},{key:"moveNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this,o=r,a=o.document;return z.isEqual(e,t)?r:(a=a.moveNode(e,t,n),r=(r=r.set("document",a)).mapPoints((function(e){return e.setPath(null)})))}},{key:"removeAnnotation",value:function(e){e=te.create(e);var t=this,n=t.annotations,r=e.key;return n=n.delete(r),t=t.set("annotations",n)}},{key:"removeMark",value:function(e,t){t=J.create(t);var n=this,r=n.document;return r=r.removeMark(e,t),n=n.set("document",r)}},{key:"removeNode",value:function(e){var t=this,n=t.document,r=n.assertNode(e),o="text"===r.object?r:r.getFirstText()||r,a="text"===r.object?r:r.getLastText()||r,i=n.getPreviousText(o.key),s=n.getNextText(a.key);return n=n.removeNode(e),t=(t=t.set("document",n)).mapRanges((function(e){var t=e,n=t.anchor,o=t.focus;return r.hasNode(n.key)&&(e=i?e.moveAnchorTo(i.key,i.text.length):s?e.moveAnchorTo(s.key,0):e.unset()),r.hasNode(o.key)&&(e=i?e.moveFocusTo(i.key,i.text.length):s?e.moveFocusTo(s.key,0):e.unset()),e=e.updatePoints((function(e){return e.setPath(null)}))}))}},{key:"removeText",value:function(e,t,n){var r=this,o=r.document,a=o.assertNode(e);o=o.removeText(e,t,n),r=r.set("document",o);var i=n.length,s=t,c=t+i;return r=r.mapPoints((function(e){return e.key!==a.key?e:e.offset>=c?e.setOffset(e.offset-i):e.offset>s?e.setOffset(s):e}))}},{key:"setAnnotation",value:function(e,t){t=te.createProperties(t);var n=te.create(e),r=n.merge(t),o=this,a=o.annotations,i=n.key;return a=a.set(i,r),o=o.set("annotations",a)}},{key:"setNode",value:function(e,t){var n=this,r=n.document;return r=r.setNode(e,t),n=n.set("document",r)}},{key:"setMark",value:function(e,t,n){var r=this,o=r.document;return o=o.setMark(e,t,n),r=r.set("document",o)}},{key:"setProperties",value:function(e){var t=this,n=t.document,r=e.data,o=e.annotations,a={};return r&&(a.data=r),o&&(a.annotations=o.map((function(e){return e.isSet?e:n.resolveAnnotation(e)}))),t=t.merge(a)}},{key:"setSelection",value:function(e){var t=this,n=t,r=n.document,o=n.selection,a=o.setProperties(e);return o=r.resolveSelection(a),t=t.set("selection",o)}},{key:"splitNode",value:function(e,t,n){var r=this,o=r.document,a=o.splitNode(e,t,n),i=o.assertNode(e);return r=(r=r.set("document",a)).mapRanges((function(e){var n=a.getNextText(i.key),r=e,o=r.anchor,s=r.focus;return i.key===o.key&&t<=o.offset&&(e=e.moveAnchorTo(n.key,o.offset-t)),i.key===s.key&&t<=s.offset&&(e=e.moveFocusTo(n.key,s.offset-t)),e=e.updatePoints((function(e){return e.setPath(null)}))}))}},{key:"mapRanges",value:function(e){var t=this,n=t,r=n.document,o=n.selection,a=n.annotations,i=o.isSet?e(o):o;i||(i=o.unset()),i!==o&&(i=r.createSelection(i)),t=t.set("selection",i);var s=a.map((function(t){var n=t.isSet?e(t):t;return n&&n!==t&&(n=r.createAnnotation(n)),n}));return s=s.filter((function(e){return!!e})),t=t.set("annotations",s)}},{key:"mapPoints",value:function(e){return this.mapRanges((function(t){return t.updatePoints(e)}))}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,document:this.document.toJSON(e)};return e.preserveData&&(t.data=this.data.toJSON(e)),e.preserveAnnotations&&(t.annotations=this.annotations.map((function(t){return t.toJSON(e)})).toObject()),e.preserveSelection&&(t.selection=this.selection.toJSON(e)),t}},{key:"change",value:function(){Object(s.a)(!1,"As of Slate 0.42.0, value object are no longer schema-aware, and the `value.change()` method is no longer available. Use the `editor.change()` method on the new `Editor` controller instead.")}},{key:"startBlock",get:function(){return this.selection.start.key&&this.document.getClosestBlock(this.selection.start.key)}},{key:"endBlock",get:function(){return this.selection.end.key&&this.document.getClosestBlock(this.selection.end.key)}},{key:"anchorBlock",get:function(){return this.selection.anchor.key&&this.document.getClosestBlock(this.selection.anchor.key)}},{key:"focusBlock",get:function(){return this.selection.focus.key&&this.document.getClosestBlock(this.selection.focus.key)}},{key:"startInline",get:function(){return this.selection.start.key&&this.document.getClosestInline(this.selection.start.key)}},{key:"endInline",get:function(){return this.selection.end.key&&this.document.getClosestInline(this.selection.end.key)}},{key:"anchorInline",get:function(){return this.selection.anchor.key&&this.document.getClosestInline(this.selection.anchor.key)}},{key:"focusInline",get:function(){return this.selection.focus.key&&this.document.getClosestInline(this.selection.focus.key)}},{key:"startText",get:function(){return this.selection.start.key&&this.document.getDescendant(this.selection.start.key)}},{key:"endText",get:function(){return this.selection.end.key&&this.document.getDescendant(this.selection.end.key)}},{key:"anchorText",get:function(){return this.selection.anchor.key&&this.document.getDescendant(this.selection.anchor.key)}},{key:"focusText",get:function(){return this.selection.focus.key&&this.document.getDescendant(this.selection.focus.key)}},{key:"nextBlock",get:function(){return this.selection.end.key&&this.document.getNextBlock(this.selection.end.key)}},{key:"previousBlock",get:function(){return this.selection.start.key&&this.document.getPreviousBlock(this.selection.start.key)}},{key:"nextInline",get:function(){return this.selection.end.key&&this.document.getNextInline(this.selection.end.key)}},{key:"previousInline",get:function(){return this.selection.start.key&&this.document.getPreviousInline(this.selection.start.key)}},{key:"nextText",get:function(){return this.selection.end.key&&this.document.getNextText(this.selection.end.key)}},{key:"previousText",get:function(){return this.selection.start.key&&this.document.getPreviousText(this.selection.start.key)}},{key:"marks",get:function(){return this.selection.isUnset?new r.Set:this.selection.marks||this.document.getMarksAtRange(this.selection)}},{key:"activeMarks",get:function(){return this.selection.isUnset?new r.Set:this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}},{key:"blocks",get:function(){return this.selection.isUnset?new r.List:this.document.getLeafBlocksAtRange(this.selection)}},{key:"fragment",get:function(){return this.selection.isUnset?re.create():this.document.getFragmentAtRange(this.selection)}},{key:"inlines",get:function(){return this.selection.isUnset?new r.List:this.document.getLeafInlinesAtRange(this.selection)}},{key:"texts",get:function(){return this.selection.isUnset?new r.List:this.document.getTextsAtRange(this.selection)}},{key:"history",get:function(){Object(s.a)(!1,"As of Slate 0.42.0, the `value.history` model no longer exists, and the history is stored in `value.data` instead using plugins.")}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.isValue(e))return e;if(a()(e))return t.fromJSON(e,n);throw new Error("`Value.create` only accepts objects or values, but you passed it: "+e)}},{key:"createProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isValue(e))return{annotations:e.annotations,data:e.data};if(a()(e)){var n={};return"annotations"in e&&(n.annotations=te.createMap(e.annotations)),"data"in e&&(n.data=U.create(e.data)),n}throw new Error("`Value.createProperties` only accepts objects or values, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.data,r=void 0===n?{}:n,o=e.annotations,a=void 0===o?{}:o,i=e.document,s=void 0===i?{}:i,c=e.selection,u=void 0===c?{}:c;if(r=U.fromJSON(r),u=(s=re.fromJSON(s)).createSelection(u),a=te.createMap(a),u.isUnset){var l=s.getFirstText();l&&(u=u.moveToStartOfNode(l)),u=s.createSelection(u)}return new t({annotations:a,data:r,document:s,selection:u})}}]),t}(Object(r.Record)(fe)),he=u()("slate:operation:apply");function pe(e,t){var n=(t=be.create(t)).type;switch(he(n,t),n){case"add_annotation":var r=t.annotation;return e.addAnnotation(r);case"add_mark":var o=t,a=o.path,i=o.mark;return e.addMark(a,i);case"insert_node":var s=t,c=s.path,u=s.node;return e.insertNode(c,u);case"insert_text":var l=t,d=l.path,f=l.offset,v=l.text,h=l.marks;return e.insertText(d,f,v,h);case"merge_node":var p=t.path;return e.mergeNode(p);case"move_node":var y=t,m=y.path,g=y.newPath;return e.moveNode(m,g);case"remove_annotation":var k=t.annotation;return e.removeAnnotation(k);case"remove_mark":var b=t,O=b.path,w=b.mark;return e.removeMark(O,w);case"remove_node":var x=t.path;return e.removeNode(x);case"remove_text":var A=t,C=A.path,E=A.offset,N=A.text;return e.removeText(C,E,N);case"set_annotation":var T=t,S=T.properties,F=T.newProperties;return e.setAnnotation(S,F);case"set_mark":var P=t,j=P.path,D=P.properties,B=P.newProperties;return e.setMark(j,D,B);case"set_node":var R=t,_=R.path,M=R.newProperties;return e.setNode(_,M);case"set_selection":var L=t.newProperties;return e.setSelection(L);case"set_value":var I=t.newProperties;return e.setProperties(I);case"split_node":var z=t,q=z.path,K=z.position,U=z.properties;return e.splitNode(q,K,U);default:throw new Error('Unknown operation type: "'+n+'".')}}var ye=u()("slate:operation:invert");function me(e){var t=(e=be.create(e)).type;switch(ye(t,e),t){case"move_node":var n=e,r=n.newPath,o=n.path;if(z.isEqual(r,o))return e;var a=z.transform(o,e).first(),i=z.transform(z.increment(o),e).first();return e.set("path",a).set("newPath",i);case"merge_node":var s=e.path,c=z.decrement(s);return e.set("type","split_node").set("path",c);case"split_node":var u=e.path,l=z.increment(u);return e.set("type","merge_node").set("path",l);case"set_annotation":case"set_node":case"set_value":case"set_selection":case"set_mark":var d=e,f=d.properties,v=d.newProperties;return e.set("properties",v).set("newProperties",f);case"insert_node":case"insert_text":return e.set("type",t.replace("insert_","remove_"));case"remove_node":case"remove_text":return e.set("type",t.replace("remove_","insert_"));case"add_annotation":case"add_mark":return e.set("type",t.replace("add_","remove_"));case"remove_annotation":case"remove_mark":return e.set("type",t.replace("remove_","add_"));default:throw new Error('Unknown operation type: "'+t+'".')}}var ge={add_mark:["path","mark","data"],add_annotation:["annotation","data"],insert_node:["path","node","data"],insert_text:["path","offset","text","data"],merge_node:["path","position","properties","target","data"],move_node:["path","newPath","data"],remove_annotation:["annotation","data"],remove_mark:["path","mark","data"],remove_node:["path","node","data"],remove_text:["path","offset","text","data"],set_annotation:["properties","newProperties","data"],set_mark:["path","properties","newProperties","data"],set_node:["path","properties","newProperties","data"],set_selection:["properties","newProperties","data"],set_value:["properties","newProperties","data"],split_node:["path","position","properties","target","data"]},ke={annotation:void 0,data:void 0,length:void 0,mark:void 0,marks:void 0,newPath:void 0,newProperties:void 0,node:void 0,offset:void 0,path:void 0,position:void 0,properties:void 0,target:void 0,text:void 0,type:void 0},be=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"apply",value:function(e){return pe(e,this)}},{key:"invert",value:function(){return me(this)}},{key:"toJSON",value:function(){var e=this.object,t=this.type,n={object:e,type:t},r=ge[t],o=!0,a=!1,i=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,l=this[u];if("annotation"!==u&&"mark"!==u&&"marks"!==u&&"node"!==u&&"path"!==u&&"newPath"!==u||(l=l.toJSON()),"properties"===u&&"merge_node"===t){var d={};"data"in l&&(d.data=l.data.toJS()),"type"in l&&(d.type=l.type),l=d}if(("properties"===u||"newProperties"===u)&&"set_annotation"===t){var f={};"anchor"in l&&(f.anchor=l.anchor.toJS()),"focus"in l&&(f.focus=l.focus.toJS()),"key"in l&&(f.key=l.key),"data"in l&&(f.data=l.data.toJS()),"type"in l&&(f.type=l.type),l=f}if(("properties"===u||"newProperties"===u)&&"set_mark"===t){var v={};"data"in l&&(v.data=l.data.toJS()),"type"in l&&(v.type=l.type),l=v}if(("properties"===u||"newProperties"===u)&&"set_node"===t){var h={};"data"in l&&(h.data=l.data.toJS()),"type"in l&&(h.type=l.type),l=h}if(("properties"===u||"newProperties"===u)&&"set_selection"===t){var p={};"anchor"in l&&(p.anchor=l.anchor.toJSON()),"focus"in l&&(p.focus=l.focus.toJSON()),"isFocused"in l&&(p.isFocused=l.isFocused),"marks"in l&&(p.marks=l.marks&&l.marks.toJSON()),l=p}if(("properties"===u||"newProperties"===u)&&"set_value"===t){var y={};"data"in l&&(y.data=l.data.toJS()),l=y}if("properties"===u&&"split_node"===t){var m={};"data"in l&&(m.data=l.data.toJS()),"type"in l&&(m.type=l.type),l=m}"data"===u&&(l=l.toJSON()),n[u]=l}}catch(e){a=!0,i=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw i}}return n}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isOperation(e))return e;if(a()(e))return t.fromJSON(e);throw new Error("`Operation.create` only accepts objects or operations, but you passed it: "+e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e)){var n=new r.List(e.map(t.create));return n}throw new Error("`Operation.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){if(t.isOperation(e))return e;var n=e.type,o=ge[n],a={type:n};if(!o)throw new Error('`Operation.fromJSON` was passed an unrecognized operation type: "'+n+'"');var i=!0,s=!1,c=void 0;try{for(var u,l=o[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value,f=e[d];if("data"===d&&void 0===f&&(f={}),void 0===f)throw new Error('`Operation.fromJSON` was passed a "'+n+'" operation without the required "'+d+'" attribute.');"annotation"===d&&(f=te.create(f)),"path"!==d&&"newPath"!==d||(f=z.create(f)),"mark"===d&&(f=J.create(f)),"node"===d&&(f=ue.create(f)),"properties"!==d&&"newProperties"!==d||"set_annotation"!==n||(f=te.createProperties(f)),"properties"!==d&&"newProperties"!==d||"set_mark"!==n||(f=J.createProperties(f)),"properties"!==d&&"newProperties"!==d||"set_node"!==n&&"merge_node"!==n&&"split_node"!==n||(f=ue.createProperties(f)),"properties"!==d&&"newProperties"!==d||"set_selection"!==n||(f=Y.createProperties(f)),"properties"!==d&&"newProperties"!==d||"set_value"!==n||(f=ve.createProperties(f)),"data"===d&&(f=Object(r.Map)(f)),a[d]=f}}catch(e){s=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}return new t(a)}},{key:"isOperationList",value:function(e){return r.List.isList(e)&&e.every((function(e){return t.isOperation(e)}))}}]),t}(Object(r.Record)(ke)),Oe={operations:void 0,value:void 0},we=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,value:this.value.toJSON(e),operations:this.operations.toArray().map((function(t){return t.toJSON(e)}))};return t}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isChange(e))return e;if(a()(e))return t.fromJSON(e);throw new Error("`Change.create` only accepts objects or changes, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.value,r=e.operations,o=void 0===r?[]:r;return new t({value:ve.create(n),operations:be.createList(o)})}}]),t}(Object(r.Record)(Oe));function xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function t(t,n,r){var o=t.type,a=t.args,i=e[o];if(!i)return r();n.command.apply(n,[i].concat(F(a)))}function n(t,n){for(var r in e)t.registerCommand(r);return n()}return{onCommand:t,onConstruct:n}}var Ae=/\s/,Ce=/['\u2018\u2019]/,Ee=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;function Ne(e){return 55296<=e&&e<=57343}function Te(e,t,n){if(55356===e){var r=t.charCodeAt(n+1);return r<=57343&&r>=57339}return!1}function Se(e){return e<=65039&&e>=65024}function Fe(e,t){if(Ae.test(e))return!1;if(Ce.test(e)){var n=t.charAt(0),r=Pe(n);if(Fe(n=t.slice(0,r),t.slice(r)))return!0}return!Ee.test(e)}function Pe(e){return Ne(e.charCodeAt(0))?2:1}function je(e,t,n){var r,o=0;if(""===e)return 1;for(var a=0;a<t;a++)for(var i=null,s=e.charCodeAt(o);s;)if(Ne(s)){var c=Te(s,e,o);if(n){if(!c&&i&&"ZWJ"!==i||c&&i&&"SURR"!==i)break}else if("SURR"===i||"BMP"===i)break;o+=2,i=c?"MOD":"SURR",s=e.charCodeAt(o)}else if(8205!==s)if(10084!==(r=s)&&9794!==r&&9792!==r&&9760!==r&&9877!==r&&9992!==r&&9711!==r){if(!Se(s)){if(n){if(Te(e.charCodeAt(o+1),e,o+1)){o+=3,i="MOD",s=e.charCodeAt(o);continue}}else if("MOD"===i){o+=1;break}null===i&&(o+=1);break}if(!n&&i&&"ZWJ"!==i)break;o+=1,i="VAR",s=e.charCodeAt(o)}else{if(n&&"VAR"===i||i&&"ZWJ"!==i&&"VAR"!==i)break;o+=1,i="BMP",s=e.charCodeAt(o)}else o+=1,i="ZWJ",s=e.charCodeAt(o);return o}function De(e){for(var t=0,n=0,r=!1,o=void 0;o=e.charAt(n);){var a=Pe(o);if(Fe(o=e.slice(n,n+a),e.slice(n+a)))r=!0,t+=a;else{if(r)break;t+=a}n+=a}return t}var Be={getCharLength:Pe,getCharOffset:je,getCharOffsetBackward:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e=e.slice(0,t),je(e=Object(l.reverse)(e),n)},getCharOffsetForward:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return je(e=e.slice(t),n,!0)},getWordOffset:De,getWordOffsetBackward:function(e,t){return e=e.slice(0,t),De(e=Object(l.reverse)(e))},getWordOffsetForward:function(e,t){return De(e=e.slice(t))},isSurrogate:Ne,isWord:Fe};function Re(e,t){t.isExpanded&&e.deleteAtRange(t);var n=e.value.document,r=t,o=r.start,a=r.end;return t=n.hasDescendant(o.path)?t.moveToStart():t.moveTo(a.path,0).normalize(n)}var _e={addMarkAtRange:function(e,t,n){if(!t.isCollapsed){var r=e.value.document,o=t.start,a=t.end,i=r.getTextsAtRange(t);e.withoutNormalizing((function(){i.forEach((function(t){var r=t.key,i=0,s=t.text.length;r===o.key&&(i=o.offset),r===a.key&&(s=a.offset),r===o.key&&r===a.key&&(s=a.offset-o.offset),e.addMarkByKey(r,i,s,n)}))}))}},addMarksAtRange:function(e,t,n){n.forEach((function(n){return e.addMarkAtRange(t,n)}))},deleteAtRange:function(e,t){e.snapshotSelection();var n=e.value,r=t.start,o=t.end,a=r.key,i=r.offset,s=o.key,c=o.offset,u=n.document,l=u.hasVoidParent(a,e),d=u.hasVoidParent(s,e),f=u.getClosestBlock(a),v=u.getClosestBlock(s),h=0===i&&0===c&&!1===l&&a===f.getFirstText().key&&s===v.getFirstText().key&&a!==s;if(h&&d){var p=u.getPreviousText(s);s=p.key,c=p.text.length,d=u.hasVoidParent(s,e)}e.withoutNormalizing((function(){for(;l;){var t=u.getClosestVoid(a,e),n=u.getNextText(a);if(e.removeNodeByKey(t.key),a===s)return;if(!n)return;u=e.value.document,a=n.key,i=0,l=u.hasVoidParent(a,e)}for(;d;){var r=u.getClosestVoid(s,e),o=u.getPreviousText(s);e.removeNodeByKey(r.key),u=e.value.document,s=o.key,c=o.text.length,d=u.hasVoidParent(s,e)}if(a===s&&h)e.removeNodeByKey(f.key);else if(a!==s){f=u.getClosestBlock(a),v=u.getClosestBlock(s);var p=u.getNode(a),y=u.getNode(s),m=p.text.length-i,g=c,k=u.getCommonAncestor(a,s),b=k.getFurthestChild(a),O=k.getFurthestChild(s),w=u.getParent(f.key),x=w.nodes.indexOf(f),A=w.nodes.indexOf(v),C=void 0;for(C=p;C.key!==b.key;){var E=u.getParent(C.key),N=E.nodes.indexOf(C);E.nodes.slice(N+1).reverse().forEach((function(t){e.removeNodeByKey(t.key)})),C=E}var T=k.nodes.indexOf(b),F=k.nodes.indexOf(O);for(k.nodes.slice(T+1,F).reverse().forEach((function(t){e.removeNodeByKey(t.key)})),C=y;C.key!==O.key;){var P=u.getParent(C.key),j=P.nodes.indexOf(C);P.nodes.slice(0,j).reverse().forEach((function(t){e.removeNodeByKey(t.key)})),C=P}if(0!==m&&e.removeTextByKey(a,i,m),0!==g&&e.removeTextByKey(s,0,c),f.key!==v.key){u=e.value.document;var D=void 0,B=!0,R=!1,_=void 0;try{for(var M,L=u.ancestors(v.key)[Symbol.iterator]();!(B=(M=L.next()).done);B=!0){var I=M.value,z=S(I,1)[0];if(z.nodes.size>1)break;D=z}}catch(e){R=!0,_=e}finally{try{!B&&L.return&&L.return()}finally{if(R)throw _}}A!==x+1&&e.moveNodeByKey(v.key,w.key,x+1),h?e.removeNodeByKey(f.key):e.mergeNodeByKey(v.key),D&&e.removeNodeByKey(D.key)}}else{var q=i,K=c-i;e.removeTextByKey(a,q,K)}}))},deleteBackwardAtRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){var r=e.value,o=r.document,a=t,i=a.start,s=a.focus;if(t.isExpanded)e.deleteAtRange(t);else{var c=o.getClosestVoid(i.path,e);if(c)e.removeNodeByKey(c.key);else if(!i.isAtStartOfNode(o)){var u=o.getClosestBlock(i.path);if(1!==o.nodes.size&&u&&""===u.text&&1===u.nodes.size)e.removeNodeByKey(u.key);else{var l=o.getDescendant(i.path);if(i.isAtStartOfNode(l)){var d=o.getPreviousText(l.key),f=o.getClosestInline(l.key);f&&""===d.text&&(d=o.getPreviousText(d.key));var v=o.getClosestBlock(d.key),h=o.getClosestVoid(d.key,e);if(h)return void e.removeNodeByKey(h.key);if(1===n&&v!==u)return t=t.moveAnchorTo(d.key,d.text.length),void e.deleteAtRange(t)}if(n<=s.offset)return t=t.moveFocusBackward(n),void e.deleteAtRange(t);for(var p=l,y=0,m=s.offset;n>m;){var g=m+(p=o.getPreviousText(p.key)).text.length;if(n<=g){y=g-n;break}m=g}t=t.moveAnchorTo(p.key,y),e.deleteAtRange(t)}}}}},deleteCharBackwardAtRange:function(e,t){if(t.isExpanded)e.deleteAtRange(t);else{var n=e.value.document,r=t.start,o=n.getClosestBlock(r.path),a=o.getOffset(r.key)+r.offset,i=o.text,s=Be.getCharOffsetBackward(i,a);e.deleteBackwardAtRange(t,s)}},deleteCharForwardAtRange:function(e,t){if(t.isExpanded)e.deleteAtRange(t);else{var n=e.value.document,r=t.start,o=n.getClosestBlock(r.path),a=o.getOffset(r.key)+r.offset,i=o.text,s=Be.getCharOffsetForward(i,a);e.deleteForwardAtRange(t,s)}},deleteForwardAtRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){var r=e.value,o=r.document,a=t,i=a.start,s=a.focus;if(t.isExpanded)e.deleteAtRange(t);else{var c=o.getClosestVoid(i.path,e);if(c)e.removeNodeByKey(c.key);else{var u=o.getClosestBlock(i.path);if(u&&!e.isVoid(u)&&""===u.text&&1!==o.nodes.size){var l=o.getNextBlock(u.key);return e.removeNodeByKey(u.key),void(l&&l.key&&e.moveToStartOfNode(l))}if(!i.isAtEndOfNode(o)){var d=o.getDescendant(i.path);if(i.isAtEndOfNode(d)){var f=o.getNextText(d.key),v=o.getClosestBlock(f.key),h=o.getClosestVoid(f.key,e);if(h)return void e.removeNodeByKey(h.key);if(1===n&&v!==u)return t=t.moveFocusTo(f.key,0),void e.deleteAtRange(t)}if(n<=d.text.length-s.offset)return t=t.moveFocusForward(n),void e.deleteAtRange(t);for(var p=d,y=s.offset,m=d.text.length-s.offset;n>m;){var g=m+(p=o.getNextText(p.key)).text.length;if(n<=g){y=n-m;break}m=g}t=t.moveFocusTo(p.key,y),e.deleteAtRange(t)}}}}},deleteLineBackwardAtRange:function(e,t){if(t.isExpanded)e.deleteAtRange(t);else{var n=e.value.document,r=t.start,o=n.getClosestBlock(r.path).getOffset(r.key)+r.offset;e.deleteBackwardAtRange(t,o)}},deleteLineForwardAtRange:function(e,t){if(t.isExpanded)e.deleteAtRange(t);else{var n=e.value.document,r=t.start,o=n.getClosestBlock(r.path),a=o.getOffset(r.key)+r.offset;e.deleteForwardAtRange(t,o.text.length-a)}},deleteWordBackwardAtRange:function(e,t){if(t.isExpanded)e.deleteAtRange(t);else{var n=e.value.document,r=t.start,o=n.getClosestBlock(r.path),a=o.getOffset(r.key)+r.offset,i=o.text,s=0===a?1:Be.getWordOffsetBackward(i,a);e.deleteBackwardAtRange(t,s)}},deleteWordForwardAtRange:function(e,t){if(t.isExpanded)e.deleteAtRange(t);else{var n=e.value.document,r=t.start,o=n.getClosestBlock(r.path),a=o.getOffset(r.key)+r.offset,i=o.text,s=Be.getWordOffsetForward(i,a),c=0===s?1:s;e.deleteForwardAtRange(t,c)}},insertBlockAtRange:function(e,t,n){t=Re(e,t),n=de.create(n);var r=e.value.document,o=t.start,a=o.key,i=o.offset,s=r.getClosestBlock(a),c=r.getClosestInline(a),u=r.getParent(s.key),l=u.nodes.indexOf(s),d=Me(e,t);if("before"===d)e.insertNodeByKey(u.key,l,n);else if("behind"===d)e.insertNodeByKey(u.key,l+1,n);else{if(c&&e.isVoid(c)){var f=o.isAtEndOfNode(c),v=f?r.getNextText(a):r.getPreviousText(a),h=f?t.moveToStartOfNode(v):t.moveToEndOfNode(v);a=h.start.key,i=h.start.offset}e.withoutNormalizing((function(){e.splitDescendantsByKey(s.key,a,i),e.insertNodeByKey(u.key,l+1,n)}))}}},Me=function(e,t){var n=e.value.document,r=t.start,o=r.key,a=n.getClosestBlock(o),i=n.getClosestInline(o);return e.isVoid(a)?r.isAtEndOfNode(a)?"behind":"before":i||""!==a.text?r.isAtStartOfNode(a)?"before":r.isAtEndOfNode(a)?"behind":"split":"behind"};_e.insertFragmentAtRange=function(e,t,n){e.withoutNormalizing((function(){if(t=Re(e,t),n.nodes.size){n=n.mapDescendants((function(e){return e.regenerateKey()}));var o=t.start,a=e.value.document,i=a.getDescendant(o.path),s=a.getClosestBlock(i.key),c=s.getFurthestChild(i.key),u=o.isAtStartOfNode(s),l=a.getParent(s.key),d=l.nodes.indexOf(s),f=n.getBlocks(),v=n.nodes.first(),h=n.nodes.last(),p=f.first(),y=f.last(),m=Le(n,a,s.key);if(p===y&&e.isVoid(p))e.insertBlockAtRange(t,p);else if(m!==n||!v.hasBlockChildren()&&!h.hasBlockChildren()){if(p!==y){var g=m.getFurthest(p.key,(function(e){return 1===e.nodes.size}))||p,k=l.nodes.indexOf(s);m.removeNode(g.key).nodes.forEach((function(t,n){var r=k+n+1;e.insertNodeByKey(l.key,r,t)}))}if(0!==o.offset&&e.splitDescendantsByKey(c.key,o.key,o.offset),i=(a=e.value.document).getDescendant(o.key),c=(s=a.getClosestBlock(o.key)).getFurthestChild(i.key),p!==y){var b=u?c:s.getNextSibling(c.key),O=b?s.nodes.skipUntil((function(e){return e.key===b.key})):Object(r.List)(),w=y.nodes.size;O.forEach((function(t,n){var r=w+n;e.moveNodeByKey(t.key,y.key,r)}))}if(e.isVoid(s)||""!==s.text||s.findDescendant((function(t){return e.isVoid(t)}))){var x=s.getFurthestChild(i.key),A=s.nodes.indexOf(x);p.nodes.forEach((function(t,n){var r=0===o.offset?0:1,a=A+n+r;e.insertNodeByKey(s.key,a,t)}))}else e.removeNodeByKey(s.key),e.insertNodeByKey(l.key,d,p)}else{("before"===Me(e,t)?n.nodes:n.nodes.reverse()).forEach((function(n){e.insertBlockAtRange(t,n)}))}}}))};var Le=function(e,t,n){var r=function(e,t){return t.size>=e.size&&e.every((function(e,n){return t.get(n).type===e.type}))},o=function(e,t){return e.getAncestors(t).slice(1).push(e.getNode(t)).reverse()},a=function(e){for(var t=e;1===t.nodes.size&&"block"===t.nodes.first().object;)t=t.nodes.first();return t===e?null:t}(e);return a?function(t,n){var o=t.size-n.size;if(o<0)return e;for(var a=0;a<n.size;a++)for(var i=0;i<=o;i++)if(r(n.slice(a),t.slice(i)))return n.get(a);return e}(o(t,n),o(e,a.key)):e};_e.insertInlineAtRange=function(e,t,n){n=ae.create(n),e.withoutNormalizing((function(){t=Re(e,t);var r=e.value.document,o=t.start,a=r.getParent(o.path),i=r.assertDescendant(o.path),s=a.nodes.indexOf(i);e.isVoid(a)||(e.splitNodeByPath(o.path,o.offset),e.insertNodeByKey(a.key,s+1,n))}))},_e.insertTextAtRange=function(e,t,n,r){e.withoutNormalizing((function(){t=Re(e,t);var o=e.value.document,a=t.start,i=a.offset,s=o.getParent(a.path);e.isVoid(s)||e.insertTextByPath(a.path,i,n,r)}))},_e.removeMarkAtRange=function(e,t,n){if(!t.isCollapsed){var r=e.value.document.getTextsAtRange(t),o=t.start,a=t.end;e.withoutNormalizing((function(){r.forEach((function(t){var r=t.key,i=0,s=t.text.length;r===o.key&&(i=o.offset),r===a.key&&(s=a.offset),r===o.key&&r===a.key&&(s=a.offset-o.offset),e.removeMarkByKey(r,i,s,n)}))}))}},_e.setBlocksAtRange=function(e,t,n){var r=e.value.document,o=r.getLeafBlocksAtRange(t),a=t.start,i=t.end,s=t.isCollapsed,c=r.hasVoidParent(a.path,e),u=r.getClosestBlock(a.path),l=r.getClosestBlock(i.key),d=!1===s&&0===a.offset&&0===i.offset&&!1===c&&a.key===u.getFirstText().key&&i.key===l.getFirstText().key?o.slice(0,-1):o;e.withoutNormalizing((function(){d.forEach((function(t){e.setNodeByKey(t.key,n)}))}))},_e.setInlinesAtRange=function(e,t,n){var r=e.value.document.getLeafInlinesAtRange(t);e.withoutNormalizing((function(){r.forEach((function(t){e.setNodeByKey(t.key,n)}))}))},_e.splitBlockAtRange=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t=Re(e,t),o=r.start,a=r.end,i=e.value,s=i,c=s.document,u=c.assertDescendant(o.path),l=c.getClosestBlock(u.key),d=0;l&&"block"===l.object&&d<n;)u=l,l=c.getClosestBlock(l.key),d++;e.withoutNormalizing((function(){if(e.splitDescendantsByKey(u.key,o.path,o.offset),i=e.value,c=i.document,t.isExpanded){t.isBackward&&(t=t.flip());var n=c.getNextBlock(u.key);t=(t=t.moveAnchorToStartOfNode(n)).setFocus(t.focus.setPath(null)),o.path.equals(a.path)&&(t=t.moveFocusTo(t.anchor.key,a.offset-o.offset)),t=c.resolveRange(t),e.deleteAtRange(t)}}))},_e.splitInlineAtRange=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=t=Re(e,t),o=r.start,a=e.value,i=a.document,s=i.assertDescendant(o.path),c=i.getClosestInline(s.key),u=0;c&&"inline"===c.object&&u<n;)s=c,c=i.getClosestInline(c.key),u++;e.splitDescendantsByKey(s.key,o.path,o.offset)},_e.toggleMarkAtRange=function(e,t,n){t.isCollapsed||(n=J.create(n),e.value.document.getActiveMarksAtRange(t).some((function(e){return e.equals(n)}))?e.removeMarkAtRange(t,n):e.addMarkAtRange(t,n))},_e.unwrapBlockAtRange=function(e,t,n){n=ue.createProperties(n);var r=e.value.document,o=r.getLeafBlocksAtRange(t),a=o.map((function(e){return r.getClosest(e.key,(function(e){return"block"===e.object&&((null==n.type||e.type===n.type)&&!(null!=n.data&&!e.data.isSuperset(n.data)))}))})).filter((function(e){return e})).toOrderedSet().toList();e.withoutNormalizing((function(){a.forEach((function(t){var n=t.nodes.first(),a=t.nodes.last(),i=e.value.document.getParent(t.key),s=i.nodes.indexOf(t),c=t.nodes.filter((function(e){return o.some((function(t){return e===t||e.hasDescendant(t.key)}))})),u=c.first(),l=c.last();if(n===u&&a===l)t.nodes.forEach((function(t,n){e.moveNodeByKey(t.key,i.key,s+n)})),e.removeNodeByKey(t.key);else if(a===l)t.nodes.skipUntil((function(e){return e===u})).forEach((function(t,n){e.moveNodeByKey(t.key,i.key,s+1+n)}));else if(n===u)t.nodes.takeUntil((function(e){return e===l})).push(l).forEach((function(t,n){e.moveNodeByKey(t.key,i.key,s+n)}));else{var d=u.getFirstText();e.splitDescendantsByKey(t.key,d.key,0),r=e.value.document,c.forEach((function(t,n){if(0===n){var o=t;t=r.getNextBlock(t.key),e.removeNodeByKey(o.key)}e.moveNodeByKey(t.key,i.key,s+1+n)}))}}))}))},_e.unwrapInlineAtRange=function(e,t,n){n=ue.createProperties(n);var r=e.value.document,o=r.getTextsAtRange(t).map((function(e){return r.getClosest(e.key,(function(e){return"inline"===e.object&&((null==n.type||e.type===n.type)&&!(null!=n.data&&!e.data.isSuperset(n.data)))}))})).filter((function(e){return e})).toOrderedSet().toList();e.withoutNormalizing((function(){o.forEach((function(t){var n=e.value.document.getParent(t.key),r=n.nodes.indexOf(t);t.nodes.forEach((function(t,o){e.moveNodeByKey(t.key,n.key,r+o)})),e.removeNodeByKey(t.key)}))}))},_e.wrapBlockAtRange=function(e,t,n){n=(n=de.create(n)).set("nodes",n.nodes.clear());var r=e.value.document,o=r.getLeafBlocksAtRange(t),a=o.first(),i=o.last(),s=void 0,c=void 0,u=void 0;if(1===o.length?(s=r.getParent(a.key),c=o):s=r.getClosest(a.key,(function(e){return!!r.getClosest(i.key,(function(t){return e===t}))})),null==s&&(s=r),null==c){var l=s.nodes.reduce((function(e,t,n){return(t===a||t.hasDescendant(a.key))&&(e[0]=n),(t===i||t.hasDescendant(i.key))&&(e[1]=n),e}),[]);u=l[0],c=s.nodes.slice(l[0],l[1]+1)}null==u&&(u=s.nodes.indexOf(c.first())),e.withoutNormalizing((function(){e.insertNodeByKey(s.key,u,n),c.forEach((function(t,r){e.moveNodeByKey(t.key,n.key,r)}))}))},_e.wrapInlineAtRange=function(e,t,n){var r=e.value.document,o=t.start,a=t.end;if(t.isCollapsed){var i=r.getClosestInline(o.path);if(!i)return;if(!e.isVoid(i))return;return e.wrapInlineByKey(i.key,n)}n=(n=ae.create(n)).set("nodes",n.nodes.clear());var s=r.getLeafBlocksAtRange(t),c=r.getClosestBlock(o.path),u=r.getClosestBlock(a.path),l=r.getClosestInline(o.path),d=r.getClosestInline(a.path),f=c.getFurthestChild(o.key),v=u.getFurthestChild(a.key);e.withoutNormalizing((function(){l&&l===d||(e.splitDescendantsByKey(v.key,a.key,a.offset),e.splitDescendantsByKey(f.key,o.key,o.offset)),r=e.value.document,c=r.getDescendant(c.key),u=r.getDescendant(u.key),f=c.getFurthestChild(o.key),v=u.getFurthestChild(a.key);var i=c.nodes.indexOf(f),h=u.nodes.indexOf(v);if(l&&l===d){var p=c.getTextsAtRange(t).map((function(e){return o.key===e.key&&a.key===e.key?e.splitText(o.offset)[1].splitText(a.offset-o.offset)[0].regenerateKey():o.key===e.key?e.splitText(o.offset)[1].regenerateKey():a.key===e.key?e.splitText(a.offset)[0].regenerateKey():e.regenerateKey()}));n=n.set("nodes",p),e.insertInlineAtRange(t,n)}else if(c===u){r=e.value.document,c=r.getClosestBlock(o.key),f=c.getFurthestChild(o.key);var y=r.getNextSibling(f.key),m=c.nodes.indexOf(y),g=o.key===a.key?y:c.getFurthestChild(a.key),k=c.nodes.skipUntil((function(e){return e===y})).takeUntil((function(e){return e===g})).push(g),b=n.regenerateKey();e.insertNodeByKey(c.key,m,b),k.forEach((function(t,n){e.moveNodeByKey(t.key,b.key,n)}))}else{var O=c.nodes.slice(i+1),w=u.nodes.slice(0,h+1),x=n.regenerateKey(),A=n.regenerateKey();e.insertNodeByKey(c.key,i+1,x),e.insertNodeByKey(u.key,h,A),O.forEach((function(t,n){e.moveNodeByKey(t.key,x.key,n)})),w.forEach((function(t,n){e.moveNodeByKey(t.key,A.key,n)})),s.slice(1,-1).forEach((function(t){var r=n.regenerateKey();e.insertNodeByKey(t.key,0,r),t.nodes.forEach((function(t,n){e.moveNodeByKey(t.key,r.key,n)}))}))}}))},_e.wrapTextAtRange=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,o=t.start,a=t.end,i=t.moveToStart(),s=t.moveToEnd();o.path.equals(a.path)&&(s=s.moveForward(n.length)),e.withoutNormalizing((function(){e.insertTextAtRange(i,n),e.insertTextAtRange(s,r)}))};var Ie={addMarkByPath:function(e,t,n,r,o){o=J.create(o),e.addMarksByPath(t,n,r,[o])},addMarksByPath:function(e,t,n,r,o){if((o=J.createSet(o)).size){var a=e.value.document.assertNode(t);e.withoutNormalizing((function(){n+r<a.text.length&&e.splitNodeByPath(t,n+r),n>0&&(e.splitNodeByPath(t,n),t=z.increment(t),n=0),o.forEach((function(n){e.applyOperation({type:"add_mark",path:t,mark:J.create(n)})}))}))}},replaceMarksByPath:function(e,t,n,r,o){var a=J.createSet(o),i=e.value.document.assertNode(t);i.marks.equals(a)||e.withoutNormalizing((function(){n+r<i.text.length&&e.splitNodeByPath(t,n+r),n>0&&(e.splitNodeByPath(t,n),t=z.increment(t),n=0);var o=a.subtract(i.marks);i.marks.subtract(a).forEach((function(n){e.applyOperation({type:"remove_mark",path:t,mark:J.create(n)})})),o.forEach((function(n){e.applyOperation({type:"add_mark",path:t,mark:J.create(n)})}))}))},insertFragmentByPath:function(e,t,n,r){r.nodes.forEach((function(r,o){e.insertNodeByPath(t,n+o,r)}))},insertNodeByPath:function(e,t,n,r){e.applyOperation({type:"insert_node",path:t.concat(n),node:r})},insertTextByPath:function(e,t,n,r,o){var a=e.value,i=a.annotations;a.document.assertNode(t),e.withoutNormalizing((function(){var a=!0,s=!1,c=void 0;try{for(var u,l=i.values()[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var d=u.value,f=d.start,v=d.end;e.isAtomic(d)&&(f.path.equals(t)&&f.offset<n&&(!v.path.equals(t)||v.offset>n)&&e.removeAnnotation(d))}}catch(e){s=!0,c=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw c}}e.applyOperation({type:"insert_text",path:t,offset:n,text:r}),o&&e.replaceMarksByPath(t,n,r.length,o)}))},mergeNodeByPath:function(e,t){var n=e.value.document,r=n.getDescendant(t),o=n.getPreviousSibling(t);if(!o)throw new Error('Unable to merge node with path "'+t+'", because it has no previous sibling.');var a="text"===o.object?o.text.length:o.nodes.size;e.applyOperation({type:"merge_node",path:t,position:a,properties:{type:r.type,data:r.data},target:null})},moveNodeByPath:function(e,t,n,r){if(z.isEqual(t,n))return e;var o=n.concat(r);if(z.isEqual(t,o))return e;e.applyOperation({type:"move_node",path:t,newPath:o})},removeMarkByPath:function(e,t,n,r,o){o=J.create(o),e.removeMarksByPath(t,n,r,[o])},removeMarksByPath:function(e,t,n,r,o){if((o=J.createSet(o)).size){var a=e.value.document.assertNode(t);o.intersect(a.marks).isEmpty()||e.withoutNormalizing((function(){n+r<a.text.length&&e.splitNodeByPath(t,n+r),n>0&&(e.splitNodeByPath(t,n),t=z.increment(t),n=0),o.forEach((function(o){e.applyOperation({type:"remove_mark",path:t,offset:n,length:r,mark:o})}))}))}},removeAllMarksByPath:function(e,t){var n=e.state.document.assertNode(t);e.withoutNormalizing((function(){if("text"!==n.object){var r=!0,o=!1,a=void 0;try{for(var i,s=n.texts()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value,u=S(c,2),l=u[0],d=u[1],f=t.concat(d);e.removeMarksByPath(f,0,l.text.length,l.marks)}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}else e.removeMarksByPath(t,0,n.text.length,n.marks)}))},removeNodeByPath:function(e,t){var n=e.value.document.assertNode(t);e.applyOperation({type:"remove_node",path:t,node:n})},removeTextByPath:function(e,t,n,r){var o=e.value,a=o.document,i=o.annotations,s=a.assertNode(t).text.slice(n,n+r);e.withoutNormalizing((function(){var r=!0,o=!1,a=void 0;try{for(var c,u=i.values()[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var l=c.value,d=l.start,f=l.end;e.isAtomic(l)&&(d.path.equals(t)&&d.offset<n&&(!f.path.equals(t)||f.offset>n)&&e.removeAnnotation(l))}}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}e.applyOperation({type:"remove_text",path:t,offset:n,text:s})}))},replaceNodeByPath:function(e,t,n){n=ue.create(n);var r=t.last(),o=z.lift(t);e.withoutNormalizing((function(){e.removeNodeByPath(t),e.insertNodeByPath(o,r,n)}))},replaceTextByPath:function(e,t,n,r,o,a){e.withoutNormalizing((function(){e.removeTextByPath(t,n,r),e.insertTextByPath(t,n,o,a)}))},setMarkByPath:function(e,t,n,r,o,a){o=J.create(o),a=J.createProperties(a);var i=e.value.document.assertNode(t);e.withoutNormalizing((function(){n+r<i.text.length&&e.splitNodeByPath(t,n+r),n>0&&(e.splitNodeByPath(t,n),t=z.increment(t),n=0),e.applyOperation({type:"set_mark",path:t,properties:o,newProperties:a})}))},setNodeByPath:function(e,t,n){var r=e.value.document.assertNode(t);n=ue.createProperties(n);var o=f()(r,Object.keys(n));e.applyOperation({type:"set_node",path:t,properties:o,newProperties:n})},setTextByPath:function(e,t,n,r){var o=e.value.document.assertNode(t).text.length;e.replaceTextByPath(t,0,o,n,r)},splitNodeByPath:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.target,a=void 0===o?null:o,i=e.value,s=i.document,c=s.getDescendant(t);e.applyOperation({type:"split_node",path:t,position:n,target:a,properties:{type:c.type,data:c.data}})},splitDescendantsByPath:function(e,t,n,r){if(t.equals(n))e.splitNodeByPath(n,r);else{var o=e.value.document,a=r,i=n;e.withoutNormalizing((function(){e.splitNodeByKey(n,r);var s=!0,c=!1,u=void 0;try{for(var l,d=o.ancestors(n)[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var f=l.value,v=S(f,2)[1],h=a;if(a=i.last()+1,i=v,e.splitNodeByPath(v,a,{target:h}),v.equals(t))break}}catch(e){c=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}}))}},unwrapInlineByPath:function(e,t,n){var r=e.value,o=r.document,a=r.selection,i=o.assertNode(t),s=i.getFirstText(),c=i.getLastText(),u=a.moveToRangeOfNode(s,c);e.unwrapInlineAtRange(u,n)},unwrapBlockByPath:function(e,t,n){var r=e.value,o=r.document,a=r.selection,i=o.assertNode(t),s=i.getFirstText(),c=i.getLastText(),u=a.moveToRangeOfNode(s,c);e.unwrapBlockAtRange(u,n)},unwrapNodeByPath:function(e,t){var n=e.value.document;n.assertNode(t);var r=z.lift(t),o=n.assertNode(r),a=t.last(),i=r.last(),s=z.lift(r),c=0===a,u=a===o.nodes.size-1;e.withoutNormalizing((function(){if(1===o.nodes.size)e.moveNodeByPath(t,s,i+1),e.removeNodeByPath(r);else if(c)e.moveNodeByPath(t,s,i);else if(u)e.moveNodeByPath(t,s,i+1);else{var n=z.increment(t,1,r.size-1);n=n.set(n.size-1,0),e.splitNodeByPath(r,a),e.moveNodeByPath(n,s,i+1)}}))},unwrapChildrenByPath:function(e,t){t=z.create(t);var n=e.value.document.assertNode(t),r=z.lift(t),o=t.last(),a=n.nodes;e.withoutNormalizing((function(){a.reverse().forEach((function(n,i){var s=a.size-i-1,c=t.push(s);e.moveNodeByPath(c,r,o+1)})),e.removeNodeByPath(t)}))},wrapBlockByPath:function(e,t,n){n=(n=de.create(n)).set("nodes",n.nodes.clear());var r=z.lift(t),o=t.last(),a=z.increment(t);e.withoutNormalizing((function(){e.insertNodeByPath(r,o,n),e.moveNodeByPath(a,t,0)}))},wrapInlineByPath:function(e,t,n){n=(n=ae.create(n)).set("nodes",n.nodes.clear());var r=z.lift(t),o=t.last(),a=z.increment(t);e.withoutNormalizing((function(){e.insertNodeByPath(r,o,n),e.moveNodeByPath(a,t,0)}))},wrapNodeByPath:function(e,t,n){"block"===(n=ue.create(n)).object?e.wrapBlockByPath(t,n):"inline"===n.object&&e.wrapInlineByPath(t,n)}},ze=function(e){Ie[e+"ByKey"]=function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var i=t.value,s=i.document,c=s.assertPath(n);t[e+"ByPath"].apply(t,[c].concat(o))}},qe=!0,Ke=!1,Ue=void 0;try{for(var We,Je=["addMark","insertFragment","insertNode","insertText","mergeNode","removeAllMarks","removeMark","removeNode","removeText","replaceMarks","replaceNode","replaceText","setMark","setNode","setText","splitNode","unwrapBlock","unwrapChildren","unwrapInline","unwrapNode","wrapBlock","wrapInline","wrapNode"][Symbol.iterator]();!(qe=(We=Je.next()).done);qe=!0){ze(We.value)}}catch(e){Ke=!0,Ue=e}finally{try{!qe&&Je.return&&Je.return()}finally{if(Ke)throw Ue}}Ie.moveNodeByKey=function(e,t,n){for(var r=arguments.length,o=Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];var i=e.value,s=i.document,c=s.assertPath(t),u=s.assertPath(n);e.moveNodeByPath.apply(e,[c,u].concat(o))},Ie.splitDescendantsByKey=function(e,t,n){for(var r=arguments.length,o=Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];var i=e.value,s=i.document,c=s.assertPath(t),u=s.assertPath(n);e.splitDescendantsByPath.apply(e,[c,u].concat(o))};var Ve={};Ve.save=function(e,t){var n=e.operations,o=e.value.data,a=e.tmp,i=a.save,s=a.merge;if(!1!==i&&function(e){if("set_selection"===e.type){var t=e.newProperties,n=t.isFocused,r=t.anchor,o=t.focus;if(void 0!==n&&!r&&!o)return!1}return!0}(t)){var c,u,l=o.get("undos")||Object(r.List)(),d=l.last(),f=d&&d.last();if(null==s&&(0!==n.size?s=!0:(c=t,s=!!(u=f)&&("set_selection"===c.type&&"set_selection"===u.type||"insert_text"===c.type&&"insert_text"===u.type&&c.offset===u.offset+u.text.length&&c.path.equals(u.path)||"remove_text"===c.type&&"remove_text"===u.type&&c.offset+c.text.length===u.offset&&c.path.equals(u.path)))),s&&d){var v=d.push(t);l=(l=l.pop()).push(v)}else{var h=Object(r.List)([t]);l=l.push(h)}l.size>100&&(l=l.takeLast(100)),e.withoutSaving((function(){var t=Object(r.List)(),n=o.set("undos",l).set("redos",t);e.setData(n)}))}},Ve.redo=function(e){var t=e.value.data,n=t.get("redos")||Object(r.List)(),o=t.get("undos")||Object(r.List)(),a=n.last();a&&e.withoutSaving((function(){e.withoutNormalizing((function(){a.forEach((function(t){var n=t,r=n.type,o=n.newProperties;"set_selection"===r&&(t=t.set("newProperties",h()(o,"isFocused"))),e.applyOperation(t)})),n=n.pop(),o=o.push(a);var r=t.set("undos",o).set("redos",n);e.setData(r)}))}))},Ve.undo=function(e){var t=e.value.data,n=t.get("redos")||Object(r.List)(),o=t.get("undos")||Object(r.List)(),a=o.last();a&&e.withoutSaving((function(){e.withoutNormalizing((function(){a.slice().reverse().map((function(e){return e.invert()})).forEach((function(t){var n=t,r=n.type,o=n.newProperties;"set_selection"===r&&(t=t.set("newProperties",h()(o,"isFocused"))),e.applyOperation(t)})),n=n.push(a),o=o.pop();var r=t.set("undos",o).set("redos",n);e.setData(r)}))}))},Ve.withoutMerging=function(e,t){var n=e.tmp.merge;e.tmp.merge=!1,t(e),e.tmp.merge=n},Ve.withoutSaving=function(e,t){var n=e.tmp.save;e.tmp.save=!1,t(e),e.tmp.save=n};var He={};function Xe(e,t){for(var n,r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var i=(n=e.value.selection)[t].apply(n,o);e.select(i)}function Ye(e,t,n,r){var o=t.slice(0,1).toUpperCase()+t.slice(1),a=n.slice(0,1).toUpperCase()+n.slice(1),i=r.slice(0,1).toUpperCase()+r.slice(1),s="move"+o+"To"+a+"OfNode",c="text"===r?"getNode":"getClosest"+i,u=e.value,l=u.document,d=u.selection[t],f=l[c](d.key);f&&e[s](f)}function Ze(e,t,n,r,o){var a=t.slice(0,1).toUpperCase()+t.slice(1),i=n.slice(0,1).toUpperCase()+n.slice(1),s=r.slice(0,1).toUpperCase()+r.slice(1),c=o.slice(0,1).toUpperCase()+o.slice(1),u="move"+a+"To"+i+"OfNode",l="text"===o?"getNode":"getClosest"+c,d="get"+s+c,f=e.value,v=f.document,h=f.selection[t],p=v[l](h.key);if(p){var y=v[d](p.key);y&&e[u](y)}}function Ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){if(n<0)return $e(e,t,-n);var r=t.slice(0,1).toUpperCase()+t.slice(1),o=e.value,a=o.document,i=o.selection,s=i[t],c=a.hasVoidParent(s.path,e);if(!c&&s.offset-n>=0){var u=i["move"+r+"Backward"](n);e.select(u)}else{var l=a.getPreviousText(s.path);if(l){var d=a.getClosestBlock(s.path),f=d.hasNode(l.key),v=l&&a.hasVoidParent(l.key,e);if(e["move"+r+"ToEndOfNode"](l),!c&&!v&&f){var h=e.value.selection["move"+r+"Backward"](n);e.select(h)}}}}}function $e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){if(n<0)return Ge(e,t,-n);var r=t.slice(0,1).toUpperCase()+t.slice(1),o=e.value,a=o.document,i=o.selection,s=i[t],c=a.getNode(s.path),u=a.hasVoidParent(s.path,e);if(!u&&s.offset+n<=c.text.length){var l=i["move"+r+"Forward"](n);e.select(l)}else{var d=a.getNextText(s.path);if(d){var f=a.getClosestBlock(s.path),v=f.hasNode(d.key),h=a.hasVoidParent(d.key,e);if(e["move"+r+"ToStartOfNode"](d),!u&&!h&&v){var p=e.value.selection["move"+r+"Forward"](n);e.select(p)}}}}}function Qe(e,t){var n=e.value,r=n.document,o=n.selection[t],a=r.getClosestBlock(o.key),i=a.getOffset(o.key)+o.offset,s=a.text,c=Be.getWordOffsetBackward(s,i);e.command(Ge,t,c>0?c:1)}function et(e,t){var n=e.value,r=n.document,o=n.selection[t],a=r.getClosestBlock(o.key),i=a.getOffset(o.key)+o.offset,s=a.text,c=Be.getWordOffsetForward(s,i);e.command($e,t,c>0?c:1)}He.blur=function(e){e.select({isFocused:!1})},He.deselect=function(e){var t=Y.create();e.select(t)},He.focus=function(e){e.select({isFocused:!0})},He.flip=function(e){e.command(Xe,"flip")},He.moveAnchorBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Ge,"anchor"].concat(n))},He.moveAnchorWordBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Qe,"anchor"].concat(n))},He.moveAnchorForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[$e,"anchor"].concat(n))},He.moveAnchorWordForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[et,"anchor"].concat(n))},He.moveAnchorTo=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveAnchorTo"].concat(n))},He.moveAnchorToEndOfBlock=function(e){e.command(Ye,"anchor","end","block")},He.moveAnchorToEndOfInline=function(e){e.command(Ye,"anchor","end","inline")},He.moveAnchorToEndOfDocument=function(e){e.moveAnchorToEndOfNode(e.value.document).moveToAnchor()},He.moveAnchorToEndOfNextBlock=function(e){e.command(Ze,"anchor","end","next","block")},He.moveAnchorToEndOfNextInline=function(e){e.command(Ze,"anchor","end","next","inline")},He.moveAnchorToEndOfNextText=function(e){e.command(Ze,"anchor","end","next","text")},He.moveAnchorToEndOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveAnchorToEndOfNode"].concat(n))},He.moveAnchorToEndOfPreviousBlock=function(e){e.command(Ze,"anchor","end","previous","block")},He.moveAnchorToEndOfPreviousInline=function(e){e.command(Ze,"anchor","end","previous","inline")},He.moveAnchorToEndOfPreviousText=function(e){e.command(Ze,"anchor","end","previous","text")},He.moveAnchorToEndOfText=function(e){e.command(Ye,"anchor","end","text")},He.moveAnchorToStartOfBlock=function(e){e.command(Ye,"anchor","start","block")},He.moveAnchorToStartOfDocument=function(e){e.moveAnchorToStartOfNode(e.value.document).moveToAnchor()},He.moveAnchorToStartOfInline=function(e){e.command(Ye,"anchor","start","inline")},He.moveAnchorToStartOfNextBlock=function(e){e.command(Ze,"anchor","start","next","block")},He.moveAnchorToStartOfNextInline=function(e){e.command(Ze,"anchor","start","next","inline")},He.moveAnchorToStartOfNextText=function(e){e.command(Ze,"anchor","start","next","text")},He.moveAnchorToStartOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveAnchorToStartOfNode"].concat(n))},He.moveAnchorToStartOfPreviousBlock=function(e){e.command(Ze,"anchor","start","previous","block")},He.moveAnchorToStartOfPreviousInline=function(e){e.command(Ze,"anchor","start","previous","inline")},He.moveAnchorToStartOfPreviousText=function(e){e.command(Ze,"anchor","start","previous","text")},He.moveAnchorToStartOfText=function(e){e.command(Ye,"anchor","start","text")},He.moveBackward=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0!==t){var n=e.value,r=n.document,o=n.selection,a=o.start,i=r.getClosestBlock(a.key),s=i.getOffset(a.key),c=s+a.offset,u=i.text,l=Be.getCharOffsetBackward(u,c,t);e.moveAnchorBackward(l).moveFocusBackward(l)}},He.moveWordBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.moveFocusWordBackward.apply(e,n).moveToFocus()},He.moveEndBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Ge,"end"].concat(n))},He.moveEndWordBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Qe,"end"].concat(n))},He.moveEndForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[$e,"end"].concat(n))},He.moveEndWordForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[et,"end"].concat(n))},He.moveEndTo=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveEndTo"].concat(n))},He.moveEndToEndOfBlock=function(e){e.command(Ye,"end","end","block")},He.moveEndToEndOfDocument=function(e){e.moveEndToEndOfNode(e.value.document).moveToEnd()},He.moveEndToEndOfInline=function(e){e.command(Ye,"end","end","inline")},He.moveEndToEndOfNextBlock=function(e){e.command(Ze,"end","end","next","block")},He.moveEndToEndOfNextInline=function(e){e.command(Ze,"end","end","next","inline")},He.moveEndToEndOfNextText=function(e){e.command(Ze,"end","end","next","text")},He.moveEndToEndOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveEndToEndOfNode"].concat(n))},He.moveEndToEndOfPreviousBlock=function(e){e.command(Ze,"end","end","previous","block")},He.moveEndToEndOfPreviousInline=function(e){e.command(Ze,"end","end","previous","inline")},He.moveEndToEndOfPreviousText=function(e){e.command(Ze,"end","end","previous","text")},He.moveEndToEndOfText=function(e){e.command(Ye,"end","end","text")},He.moveEndToStartOfBlock=function(e){e.command(Ye,"end","start","block")},He.moveEndToStartOfDocument=function(e){e.moveEndToStartOfNode(e.value.document).moveToEnd()},He.moveEndToStartOfInline=function(e){e.command(Ye,"end","start","inline")},He.moveEndToStartOfNextBlock=function(e){e.command(Ze,"end","start","next","block")},He.moveEndToStartOfNextInline=function(e){e.command(Ze,"end","start","next","inline")},He.moveEndToStartOfNextText=function(e){e.command(Ze,"end","start","next","text")},He.moveEndToStartOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveEndToStartOfNode"].concat(n))},He.moveEndToStartOfPreviousBlock=function(e){e.command(Ze,"end","start","previous","block")},He.moveEndToStartOfPreviousInline=function(e){e.command(Ze,"end","start","previous","inline")},He.moveEndToStartOfPreviousText=function(e){e.command(Ze,"end","start","previous","text")},He.moveEndToStartOfText=function(e){e.command(Ye,"end","start","text")},He.moveFocusBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Ge,"focus"].concat(n))},He.moveFocusWordBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Qe,"focus"].concat(n))},He.moveFocusForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[$e,"focus"].concat(n))},He.moveFocusWordForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[et,"focus"].concat(n))},He.moveFocusTo=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveFocusTo"].concat(n))},He.moveFocusToEndOfBlock=function(e){e.command(Ye,"focus","end","block")},He.moveFocusToEndOfDocument=function(e){e.moveFocusToEndOfNode(e.value.document).moveToFocus()},He.moveFocusToEndOfInline=function(e){e.command(Ye,"focus","end","inline")},He.moveFocusToEndOfNextBlock=function(e){e.command(Ze,"focus","end","next","block")},He.moveFocusToEndOfNextInline=function(e){e.command(Ze,"focus","end","next","inline")},He.moveFocusToEndOfNextText=function(e){e.command(Ze,"focus","end","next","text")},He.moveFocusToEndOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveFocusToEndOfNode"].concat(n))},He.moveFocusToEndOfPreviousBlock=function(e){e.command(Ze,"focus","end","previous","block")},He.moveFocusToEndOfPreviousInline=function(e){e.command(Ze,"focus","end","previous","inline")},He.moveFocusToEndOfPreviousText=function(e){e.command(Ze,"focus","end","previous","text")},He.moveFocusToEndOfText=function(e){e.command(Ye,"focus","end","text")},He.moveFocusToStartOfBlock=function(e){e.command(Ye,"focus","start","block")},He.moveFocusToStartOfDocument=function(e){e.moveFocusToStartOfNode(e.value.document).moveToFocus()},He.moveFocusToStartOfInline=function(e){e.command(Ye,"focus","start","inline")},He.moveFocusToStartOfNextBlock=function(e){e.command(Ze,"focus","start","next","block")},He.moveFocusToStartOfNextInline=function(e){e.command(Ze,"focus","start","next","inline")},He.moveFocusToStartOfNextText=function(e){e.command(Ze,"focus","start","next","text")},He.moveFocusToStartOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveFocusToStartOfNode"].concat(n))},He.moveFocusToStartOfPreviousBlock=function(e){e.command(Ze,"focus","start","previous","block")},He.moveFocusToStartOfPreviousInline=function(e){e.command(Ze,"focus","start","previous","inline")},He.moveFocusToStartOfPreviousText=function(e){e.command(Ze,"focus","start","previous","text")},He.moveFocusToStartOfText=function(e){e.command(Ye,"focus","start","text")},He.moveForward=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0!==t){var n=e.value,r=n.document,o=n.selection,a=o.start,i=r.getClosestBlock(a.path),s=i.getOffset(a.key),c=s+a.offset,u=i.text,l=Be.getCharOffsetForward(u,c,t);e.moveAnchorForward(l).moveFocusForward(l)}},He.moveWordForward=function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=e.moveFocusWordForward.apply(e,r)).moveToFocus.apply(t,r)},He.moveStartBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Ge,"start"].concat(n))},He.moveStartWordBackward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Qe,"start"].concat(n))},He.moveStartForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[$e,"start"].concat(n))},He.moveStartWordForward=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[et,"start"].concat(n))},He.moveStartTo=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveStartTo"].concat(n))},He.moveStartToEndOfBlock=function(e){e.command(Ye,"start","end","block")},He.moveStartToEndOfDocument=function(e){e.moveStartToEndOfNode(e.value.document).moveToStart()},He.moveStartToEndOfInline=function(e){e.command(Ye,"start","end","inline")},He.moveStartToEndOfNextBlock=function(e){e.command(Ze,"start","end","next","block")},He.moveStartToEndOfNextInline=function(e){e.command(Ze,"start","end","next","inline")},He.moveStartToEndOfNextText=function(e){e.command(Ze,"start","end","next","text")},He.moveStartToEndOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveStartToEndOfNode"].concat(n))},He.moveStartToEndOfPreviousBlock=function(e){e.command(Ze,"start","end","previous","block")},He.moveStartToEndOfPreviousInline=function(e){e.command(Ze,"start","end","previous","inline")},He.moveStartToEndOfPreviousText=function(e){e.command(Ze,"start","end","previous","text")},He.moveStartToEndOfText=function(e){e.command(Ye,"start","end","text")},He.moveStartToStartOfBlock=function(e){e.command(Ye,"start","start","block")},He.moveStartToStartOfDocument=function(e){e.moveStartToStartOfNode(e.value.document).moveToStart()},He.moveStartToStartOfInline=function(e){e.command(Ye,"start","start","inline")},He.moveStartToStartOfNextBlock=function(e){e.command(Ze,"start","start","next","block")},He.moveStartToStartOfNextInline=function(e){e.command(Ze,"start","start","next","inline")},He.moveStartToStartOfNextText=function(e){e.command(Ze,"start","start","next","text")},He.moveStartToStartOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveStartToStartOfNode"].concat(n))},He.moveStartToStartOfPreviousBlock=function(e){e.command(Ze,"start","start","previous","block")},He.moveStartToStartOfPreviousInline=function(e){e.command(Ze,"start","start","previous","inline")},He.moveStartToStartOfPreviousText=function(e){e.command(Ze,"start","start","previous","text")},He.moveStartToStartOfText=function(e){e.command(Ye,"start","start","text")},He.moveTo=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveTo"].concat(n))},He.moveToAnchor=function(e){e.command(Xe,"moveToAnchor")},He.moveToEnd=function(e){e.command(Xe,"moveToEnd")},He.moveToEndOfBlock=function(e){e.moveEndToEndOfBlock().moveToEnd()},He.moveToEndOfDocument=function(e){e.moveEndToEndOfNode(e.value.document).moveToEnd()},He.moveToEndOfInline=function(e){e.moveEndToEndOfInline().moveToEnd()},He.moveToEndOfNextBlock=function(e){e.moveEndToEndOfNextBlock().moveToEnd()},He.moveToEndOfNextInline=function(e){e.moveEndToEndOfNextInline().moveToEnd()},He.moveToEndOfNextText=function(e){e.moveEndToEndOfNextText().moveToEnd()},He.moveToEndOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveToEndOfNode"].concat(n))},He.moveToEndOfPreviousBlock=function(e){e.moveStartToEndOfPreviousBlock().moveToStart()},He.moveToEndOfPreviousInline=function(e){e.moveStartToEndOfPreviousInline().moveToStart()},He.moveToEndOfPreviousText=function(e){e.moveStartToEndOfPreviousText().moveToStart()},He.moveToEndOfText=function(e){e.moveEndToEndOfText().moveToEnd()},He.moveToFocus=function(e){e.command(Xe,"moveToFocus")},He.moveToRangeOfDocument=function(e){e.moveToRangeOfNode(e.value.document)},He.moveToRangeOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveToRangeOfNode"].concat(n))},He.moveToStart=function(e){e.command(Xe,"moveToStart")},He.moveToStartOfBlock=function(e){e.moveStartToStartOfBlock().moveToStart()},He.moveToStartOfDocument=function(e){e.moveStartToStartOfNode(e.value.document).moveToStart()},He.moveToStartOfInline=function(e){e.moveStartToStartOfInline().moveToStart()},He.moveToStartOfNextBlock=function(e){e.moveEndToStartOfNextBlock().moveToEnd()},He.moveToStartOfNextInline=function(e){e.moveEndToStartOfNextInline().moveToEnd()},He.moveToStartOfNextText=function(e){e.moveEndToStartOfNextText().moveToEnd()},He.moveToStartOfNode=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"moveToStartOfNode"].concat(n))},He.moveToStartOfPreviousBlock=function(e){e.moveStartToStartOfPreviousBlock().moveToStart()},He.moveToStartOfPreviousInline=function(e){e.moveStartToStartOfPreviousInline().moveToStart()},He.moveToStartOfPreviousText=function(e){e.moveStartToStartOfPreviousText().moveToStart()},He.moveToStartOfText=function(e){e.moveStartToStartOfText().moveToStart()},He.select=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=Y.createProperties(t);var o=n.snapshot,a=void 0!==o&&o,i=e.value,s=i.document,c=i.selection,u={},l=c.setProperties(t);for(var d in l=s.resolveSelection(l),t=f()(l,Object.keys(t)))!0!==a&&Object(r.is)(t[d],c[d])||(u[d]=t[d]);if(c.marks&&!u.marks&&(u.anchor||u.focus)&&(u.marks=null),0!==Object.keys(u).length){var v=f()(c.toJSON(),Object.keys(u));e.applyOperation({type:"set_selection",value:i,properties:v,newProperties:u},a?{skip:!1,merge:!1}:{})}},He.setAnchor=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"setAnchor"].concat(n))},He.setEnd=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"setEnd"].concat(n))},He.setFocus=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"setFocus"].concat(n))},He.setStart=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.command.apply(e,[Xe,"setStart"].concat(n))},He.snapshotSelection=function(e){e.withoutMerging((function(){e.select(e.value.selection,{snapshot:!0})}))};var tt={};function nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function t(t,n){for(var r in e)t.registerQuery(r);return n()}function n(t,n,r){var o=t.type,a=t.args,i=e[o];if(!i)return r();var s=i.apply(void 0,[n].concat(F(a)));return void 0===s?r():s}return{onConstruct:t,onQuery:n}}tt.setData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.value,r=ve.createProperties({data:t}),o=f()(n,Object.keys(r));e.applyOperation({type:"set_value",properties:o,newProperties:r})},tt.addAnnotation=function(e,t){t=te.create(t),e.applyOperation({type:"add_annotation",annotation:t})},tt.removeAnnotation=function(e,t){t=te.create(t),e.applyOperation({type:"remove_annotation",annotation:t})},tt.setAnnotation=function(e,t,n){t=te.create(t),n=te.createProperties(n),e.applyOperation({type:"set_annotation",properties:t,newProperties:n})},tt.setAnnotations=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.value,r=ve.createProperties({annotations:t}),o=f()(n,Object.keys(r));e.applyOperation({type:"set_value",properties:o,newProperties:r})};var rt=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(this,t);var r=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));for(var o in r.code=e,n)r[o]=n[o];return Error.captureStackTrace?Error.captureStackTrace(r,r.constructor):r.stack=(new Error).stack,r}return E(t,e),t}(Error);function ot(e){var t=e.rules,n=e.document,r=e.blocks,o=e.inlines,a=e.marks,i=e.annotations,s=e.decorations,c=[];if(t&&(c=c.concat(t)),n&&c.push(C({match:[{object:"document"}]},n)),r)for(var u in r)c.push(C({match:[{object:"block",type:u}]},r[u]));if(o)for(var l in o)c.push(C({match:[{object:"inline",type:l}]},o[l]));if(a)for(var d in a)c.push(C({match:[{object:"mark",type:d}]},a[d]));if(i)for(var f in i)c.push(C({match:[{object:"annotation",type:f}]},i[f]));if(s)for(var v in s)c.push(C({match:[{object:"decoration",type:v}]},s[v]));function h(e,t,n){var r=c.filter((function(t){return at(e,t.match)})),o=it(e,r,c,{every:!0});return o?new rt(o.code,o):n()}return[{normalizeNode:function(e,t,n){var r=h(e,t,(function(){}));return r?function(){var e=r.rule,n=t.operations.size;e.normalize&&e.normalize(t,r),t.operations.size===n&&function(e,t){var n=t.code,r=t.node,o=t.child,a=t.next,i=t.previous,s=t.key,c=t.mark;switch(n){case"child_max_invalid":case"child_object_invalid":case"child_type_invalid":case"child_unknown":case"first_child_object_invalid":case"first_child_type_invalid":case"last_child_object_invalid":case"last_child_type_invalid":return"text"===o.object&&"block"===r.object&&1===r.nodes.size?e.removeNodeByKey(r.key):e.removeNodeByKey(o.key);case"previous_sibling_object_invalid":case"previous_sibling_type_invalid":return"text"===i.object&&"block"===r.object&&1===r.nodes.size?e.removeNodeByKey(r.key):e.removeNodeByKey(i.key);case"next_sibling_object_invalid":case"next_sibling_type_invalid":return"text"===a.object&&"block"===r.object&&1===r.nodes.size?e.removeNodeByKey(r.key):e.removeNodeByKey(a.key);case"child_min_invalid":case"node_text_invalid":case"parent_object_invalid":case"parent_type_invalid":return"document"===r.object?r.nodes.forEach((function(t){return e.removeNodeByKey(t.key)})):e.removeNodeByKey(r.key);case"node_data_invalid":return void 0===r.data.get(s)&&"document"!==r.object?e.removeNodeByKey(r.key):e.setNodeByKey(r.key,{data:r.data.delete(s)});case"node_mark_invalid":return r.getTexts().forEach((function(t){return e.removeMarkByKey(t.key,0,t.text.length,c)}));default:e.removeNodeByKey(r.key)}}(t,r)}:n()},validateNode:h},nt({isAtomic:function(e,t){var n=c.find((function(e){return"isAtomic"in e&&at(t,e.match)}));return n&&n.isAtomic},isVoid:function(e,t){var n=c.find((function(e){return"isVoid"in e&&at(t,e.match)}));return n&&n.isVoid}})]}function at(e,t){return!it(e,t)}function it(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.every,a=void 0!==o&&o,i=r.match,s=void 0===i?null:i;if("function"==typeof t){var c=t(e,s);return c?null:gt("node_invalid",{rule:t,node:e})}if(Array.isArray(t)){var u=t.length?t:[{}],l=void 0,d=!0,f=!1,v=void 0;try{for(var h,p=u[Symbol.iterator]();!(d=(h=p.next()).done);d=!0){var y=h.value,m=it(e,y,n);if(l=l||m,a&&m)return m;if(!a&&!m)return}}catch(e){f=!0,v=e}finally{try{!d&&p.return&&p.return()}finally{if(f)throw v}}return l}var g=st(e,t)||ct(e,t)||ut(e,t)||lt(e,t)||dt(e,t)||ft(e,t)||vt(e,t)||ht(e,t,n);return g}function st(e,t){if(null!=t.object&&t.object!==e.object&&("function"!=typeof t.object||!t.object(e.object)))return gt("node_object_invalid",{rule:t,node:e})}function ct(e,t){if(null!=t.type&&t.type!==e.type&&("function"!=typeof t.type||!t.type(e.type)))return gt("node_type_invalid",{rule:t,node:e})}function ut(e,t){if(null!=t.data&&null!=e.data){if("function"==typeof t.data){if(t.data(e.data))return;return gt("node_data_invalid",{rule:t,node:e})}for(var n in t.data){var r=t.data[n],o=e.data&&e.data.get(n);if(!("function"==typeof r?r(o):r===o))return gt("node_data_invalid",{rule:t,node:e,key:n,value:o})}}}function lt(e,t){if(null!=t.marks){var n="text"===e.object?e.marks.toArray():e.getMarks().toArray(),r=function(n){return t.marks.some((function(e){return"function"==typeof e.type?e.type(n.type):e.type===n.type}))?"continue":{v:gt("node_mark_invalid",{rule:t,node:e,mark:n})}},o=!0,a=!1,i=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=r(s.value);switch(u){case"continue":continue;default:if("object"===(void 0===u?"undefined":O(u)))return u.v}}}catch(e){a=!0,i=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw i}}}}function dt(e,t){if(null!=t.text){var n=e.text;if(!("function"==typeof t.text?t.text(n):t.text.test(n)))return gt("node_text_invalid",{rule:t,node:e,text:n})}}function ft(e,t){if(null!=t.first){var n=e.nodes.first();if(n){var r=it(n,t.first);if(r)return r.rule=t,r.node=e,r.child=n,r.code=r.code.replace("node_","first_child_"),r}}}function vt(e,t){if(null!=t.last){var n=e.nodes.last();if(n){var r=it(n,t.last);if(r)return r.rule=t,r.node=e,r.child=n,r.code=r.code.replace("node_","last_child_"),r}}}function ht(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null!=e.nodes){var r=e.nodes,o=null!=t.nodes?t.nodes.slice():[],a=0,i=0,s=null,c=-1,u=null,l=null,d=null,f=null,v=null;for(null!=t.nodes&&m();g();){var h=pt(e,d,n)||yt(e,d,f,c,n)||mt(e,d,v,c,n);if(h)return h;if(null!=t.nodes){if(!u)return gt("child_unknown",{rule:t,node:e,child:d,index:c});if(u.match){var p=it(d,u.match);if(p){if(null!=l&&a-1>l)return k(),gt("child_max_invalid",{rule:t,node:e,index:c,child:r.get(c),count:a,limit:l});var y=s;if(m()){if(i-1>=y){c-=1;continue}return null==it(d,u.match)?(k(),gt("child_min_invalid",{rule:t,node:e,index:c,count:i-1,limit:y})):(p.rule=t,p.node=e,p.child=d,p.index=c,p.code=p.code.replace("node_","child_"),p)}return null!=l&&a>l?gt("child_unknown",{rule:t,node:e,child:d,index:c}):(p.rule=t,p.node=e,p.child=d,p.index=c,p.code=p.code.replace("node_","child_"),p)}}}}if(null!=l&&a>l)return gt("child_max_invalid",{rule:t,node:e,index:c-1,count:a,child:r.get(c-1),limit:l});if(null!=t.nodes)do{if(a<s)return gt("child_min_invalid",{rule:t,node:e,index:c,count:a,limit:s})}while(m())}function m(){return 0!==o.length&&(u=o.shift(),i=a,a=0,s=u.min||null,l=u.max||null,!0)}function g(){return f=(c+=1)?r.get(c-1):null,d=r.get(c),v=r.get(c+1),!!d&&(i=a,a+=1,!0)}function k(){c>0&&(c-=1,a=i)}}function pt(e,t,n){var r=!0,o=!1,a=void 0;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;if(null!=c.parent&&at(t,c.match)){var u=it(e,c.parent);if(u)return u.rule=c,u.parent=e,u.node=t,u.code=u.code.replace("node_","parent_"),u}}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}function yt(e,t,n,r,o){if(n){var a=!0,i=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;if(null!=l.previous&&at(t,l.match)){var d=it(n,l.previous);if(d)return d.rule=l,d.node=e,d.child=t,d.index=r,d.previous=n,d.code=d.code.replace("node_","previous_sibling_"),d}}}catch(e){i=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw s}}}}function mt(e,t,n,r,o){if(n){var a=!0,i=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;if(null!=l.next&&at(t,l.match)){var d=it(n,l.next,[],{match:t});if(d)return d.rule=l,d.node=e,d.child=t,d.index=r,d.next=n,d.code=d.code.replace("node_","next_sibling_"),d}}}catch(e){i=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw s}}}}function gt(e,t){return C({code:e},t)}function kt(e){e.value.selection.isExpanded&&e.delete()}var bt={};function Ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=void 0===t?[]:t,r=xe(C({},_e,Ie,Ve,He,tt,bt)),o=nt({isAtomic:function(){return!1},isVoid:function(){return!1}}),a=ot({rules:[{match:{object:"document"},nodes:[{match:{object:"block"}}]},{match:{object:"block",first:{object:"block"}},nodes:[{match:{object:"block"}}]},{match:{object:"block",first:[{object:"inline"},{object:"text"}]},nodes:[{match:[{object:"inline"},{object:"text"}]}]},{match:{object:"inline"},nodes:[{match:[{object:"inline"},{object:"text"}]}]},{match:[{object:"block"},{object:"inline"}],nodes:[{min:1}],normalize:function(e,t){var n=t.code,r=t.node;"child_min_invalid"===n&&r.nodes.isEmpty()&&e.insertNodeByKey(r.key,0,ce.create())}},{match:{object:"block"},first:[{object:"block"},{object:"text"}],last:[{object:"block"},{object:"text"}],normalize:function(e,t){var n=t.code,r=t.node,o=ce.create(),a=void 0;if("first_child_object_invalid"===n)a=0;else{if("last_child_object_invalid"!==n)return;a=r.nodes.size}e.insertNodeByKey(r.key,a,o)}},{match:{object:"inline"},first:[{object:"block"},{object:"text"}],last:[{object:"block"},{object:"text"}],previous:[{object:"block"},{object:"text"}],next:[{object:"block"},{object:"text"}],normalize:function(e,t){var n=t.code,r=t.node,o=t.index,a=ce.create(),i=void 0;if("first_child_object_invalid"===n)i=0;else if("last_child_object_invalid"===n)i=r.nodes.size;else if("previous_sibling_object_invalid"===n)i=o;else{if("next_sibling_object_invalid"!==n)return;i=o+1}e.insertNodeByKey(r.key,i,a)}},{match:{object:"text"},next:function(e,t){return"text"!==e.object||!t.marks.equals(e.marks)},normalize:function(e,t){var n=t.code,r=t.next;"next_sibling_invalid"===n&&e.mergeNodeByKey(r.key)}},{match:{object:"text"},previous:function(e){return"text"!==e.object||""!==e.text},next:function(e){return"text"!==e.object||""!==e.text},normalize:function(e,t){var n=t.code,r=t.next,o=t.previous;"next_sibling_invalid"===n?e.removeNodeByKey(r.key):"previous_sibling_invalid"===n&&e.removeNodeByKey(o.key)}}]});return[a].concat(F(n),[r,o])}bt.addMark=function(e,t){t=J.create(t);var n=e.value,r=n.document,o=n.selection;if(o.isExpanded)e.addMarkAtRange(o,t);else if(o.marks){var a=o.marks.add(t),i=o.set("marks",a);e.select(i)}else{var s=r.getActiveMarksAtRange(o).add(t),c=o.set("marks",s);e.select(c)}},bt.addMarks=function(e,t){t.forEach((function(t){return e.addMark(t)}))},bt.delete=function(e){var t=e.value.selection;e.deleteAtRange(t),e.moveToFocus()},bt.deleteBackward=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.value,r=n.selection;r.isExpanded?e.delete():e.deleteBackwardAtRange(r,t)},bt.deleteCharBackward=function(e){var t=e.value.selection;t.isExpanded?e.delete():e.deleteCharBackwardAtRange(t)},bt.deleteLineBackward=function(e){var t=e.value.selection;t.isExpanded?e.delete():e.deleteLineBackwardAtRange(t)},bt.deleteWordBackward=function(e){var t=e.value.selection;t.isExpanded?e.delete():e.deleteWordBackwardAtRange(t)},bt.deleteForward=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.value,r=n.selection;r.isExpanded?e.delete():e.deleteForwardAtRange(r,t)},bt.deleteCharForward=function(e){var t=e.value.selection;t.isExpanded?e.delete():e.deleteCharForwardAtRange(t)},bt.deleteLineForward=function(e){var t=e.value.selection;t.isExpanded?e.delete():e.deleteLineForwardAtRange(t)},bt.deleteWordForward=function(e){var t=e.value.selection;t.isExpanded?e.delete():e.deleteWordForwardAtRange(t)},bt.insertBlock=function(e,t){kt(e),t=de.create(t);var n=e.value.selection;e.insertBlockAtRange(n,t);var r=e.value.document.getNode(t.key);r&&e.moveToEndOfNode(r)},bt.insertFragment=function(e,t){if(t.nodes.size){kt(e);var n=e.value,r=n,o=r.document,a=r.selection,i=a.start,s=Array.from(o.texts(),(function(e){return S(e,1)[0].key}));e.insertFragmentAtRange(a,t);var c=(o=(n=e.value).document).getTexts().filter((function(e){return!s.includes(e.key)}));if(0!==c.size){var u=t.text.length,l=o.getNode(i.key)||c.first(),d=c.last()||l;if(l!==d){var f=o.getCommonAncestor(l.key,d.key),v=f.getOffset(l.key)+(i.key===l.key?i.offset:0);d=f.getTextAtOffset(v+u-1)||d,e.moveTo(d.key,v+u-f.getOffset(d.key))}else e.moveTo(d.key,u)}}},bt.insertInline=function(e,t){kt(e),t=ae.create(t);var n=e.value.selection;e.insertInlineAtRange(n,t);var r=e.value.document.getNode(t.key);r&&e.moveToEndOfNode(r)},bt.insertText=function(e,t,n){kt(e);var r=e.value,o=r.document,a=r.selection;n=n||a.marks||o.getInsertMarksAtRange(a),e.withoutNormalizing((function(){e.insertTextAtRange(a,t,n),a.marks&&o!==e.value.document&&e.select({marks:null})}))},bt.removeMark=function(e,t){t=J.create(t);var n=e.value,r=n.document,o=n.selection;if(o.isExpanded)e.removeMarkAtRange(o,t);else if(o.marks){var a=o.marks.remove(t),i=o.set("marks",a);e.select(i)}else{var s=r.getActiveMarksAtRange(o).remove(t),c=o.set("marks",s);e.select(c)}},bt.replaceMark=function(e,t,n){e.removeMark(t),e.addMark(n)},bt.setBlocks=function(e,t){var n=e.value.selection;e.setBlocksAtRange(n,t)},bt.setInlines=function(e,t){var n=e.value.selection;e.setInlinesAtRange(n,t)},bt.splitBlock=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;kt(e);var n=e.value,r=n.selection,o=n.document,a=r.marks||o.getInsertMarksAtRange(r);e.splitBlockAtRange(r,t).moveToEnd(),a&&0!==a.size&&e.select({marks:a})},bt.splitInline=function(e,t){kt(e);var n=e.value.selection;e.splitInlineAtRange(n,t)},bt.toggleMark=function(e,t){t=J.create(t),e.value.activeMarks.has(t)?e.removeMark(t):e.addMark(t)},bt.unwrapBlock=function(e,t){var n=e.value.selection;e.unwrapBlockAtRange(n,t)},bt.unwrapInline=function(e,t){var n=e.value.selection;e.unwrapInlineAtRange(n,t)},bt.wrapBlock=function(e,t){var n=e.value.selection;e.wrapBlockAtRange(n,t)},bt.wrapInline=function(e,t){var n=e.value.selection;e.wrapInlineAtRange(n,t)},bt.wrapText=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.value,o=r.selection;e.wrapTextAtRange(o,t,n),o.isCollapsed&&e.moveStartBackward(t.length),e.moveEndBackward(n.length),o.isForward!==e.value.selection.isForward&&e.flip()};var wt=u()("slate:editor"),xt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(this,e);var o=n.controller,a=void 0===o?this:o,i=n.construct,s=void 0===i||i,c=t.onChange,u=void 0===c?function(){}:c,l=t.plugins,d=void 0===l?[]:l,f=t.readOnly,v=void 0!==f&&f,h=t.value,p=void 0===h?ve.create():h;this.controller=a,this.middleware={},this.onChange=u,this.operations=Object(r.List)(),this.readOnly=null,this.value=null,this.tmp={dirty:[],flushing:!1,merge:null,normalize:!0,save:!0};var y=Ot({plugins:d});Et(this,y),s&&(this.run("onConstruct"),this.setReadOnly(v),this.setValue(p,n))}return x(e,[{key:"applyOperation",value:function(e){var t=this,n=this.operations,r=this.controller,o=this.value;a()(e)&&(e=C({},e,{value:o})),e=be.create(e),this.withoutNormalizing((function(){r.save(e),o=t.value})),wt("apply",{operation:e}),this.value=e.apply(o),this.operations=n.push(e);var i=function(e){var t=e.type,n=e.node,r=e.path,o=e.newPath;switch(t){case"add_mark":case"insert_text":case"remove_mark":case"remove_text":case"set_mark":case"set_node":var a=z.getAncestors(r).toArray();return[].concat(F(a),[r]);case"insert_node":var i=n.getKeysToPathsTable(),s=Object.values(i).map((function(e){return r.concat(e)})),c=z.getAncestors(r).toArray();return[].concat(F(c),[r],F(s));case"split_node":var u=z.getAncestors(r).toArray(),l=z.increment(r);return[].concat(F(u),[r,l]);case"merge_node":var d=z.getAncestors(r).toArray(),f=z.decrement(r);return[].concat(F(d),[f]);case"move_node":if(z.isEqual(r,o))return[];var v=z.getAncestors(r).reduce((function(t,n){return t.push.apply(t,F(z.transform(n,e).toArray())),t}),[]),h=z.getAncestors(o).reduce((function(t,n){return t.push.apply(t,F(z.transform(n,e).toArray())),t}),[]);return[].concat(F(v),F(h));case"remove_node":var p=z.getAncestors(r).toArray();return[].concat(F(p));default:return[]}}(e),s=this.tmp.dirty.map((function(t){return t=z.create(t),z.transform(t,e).toArray()})),c={},u=Array.prototype.concat.apply(i,s);return this.tmp.dirty=[],u.forEach((function(e){var n=e.join(",");c[n]||t.tmp.dirty.push(e),c[n]=!0})),this.tmp.flushing||(this.tmp.flushing=!0,Promise.resolve().then((function(){return t.flush()}))),r}},{key:"flush",value:function(){this.run("onChange");var e=this.value,t=this.operations,n=this.controller,o={value:e,operations:t};return this.operations=Object(r.List)(),this.tmp.flushing=!1,this.onChange(o),n}},{key:"command",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.controller;if("function"==typeof e)return e.apply(void 0,[o].concat(n)),At(this),o;wt("command",{type:e,args:n});var a={type:e,args:n};return this.run("onCommand",a),At(this),o}},{key:"hasCommand",value:function(e){var t=this.controller;return e in t&&t[e].__command}},{key:"hasQuery",value:function(e){var t=this.controller;return e in t&&t[e].__query}},{key:"normalize",value:function(){var e=this.value,t=this.controller,n=e.document,r=n.getKeysToPathsTable(),o=Object.values(r).map(z.create);this.tmp.dirty=this.tmp.dirty.concat(o),At(this);var a=e.selection;return n=e.document,a.isUnset&&n.nodes.size&&t.moveToStartOfDocument(),t}},{key:"query",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.controller;if("function"==typeof e)return e.apply(void 0,[o].concat(n));wt("query",{type:e,args:n});var a={type:e,args:n};return this.run("onQuery",a)}},{key:"registerCommand",value:function(e){var t=this,n=this.controller;if(e in n&&n[e].__command)return n;Object(s.a)(!(e in n),"You cannot register a `"+e+"` command because it would overwrite an existing property of the `Editor`.");var r=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.command.apply(t,[e].concat(r))};return n[e]=r,r.__command=!0,n}},{key:"registerQuery",value:function(e){var t=this,n=this.controller;if(e in n&&n[e].__query)return n;Object(s.a)(!(e in n),"You cannot register a `"+e+"` query because it would overwrite an existing property of the `Editor`.");var r=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.query.apply(t,[e].concat(r))};return n[e]=r,r.__query=!0,n}},{key:"run",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.controller,a=this.middleware,i=a[e]||[],c=0;function u(){var e=i[c++];if(e){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];r.length&&(n=r);var s=e.apply(void 0,F(n).concat([o,u]));return s}}return Object.defineProperty(u,"change",{get:function(){Object(s.a)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(u,"onChange",{get:function(){Object(s.a)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(u,"props",{get:function(){Object(s.a)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(u,"schema",{get:function(){Object(s.a)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(u,"stack",{get:function(){Object(s.a)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),u()}},{key:"setReadOnly",value:function(e){return this.readOnly=e,this}},{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.normalize,r=void 0===n?e!==this.value:n;return this.value=e,r&&this.normalize(),this}},{key:"withoutNormalizing",value:function(e){var t=this.controller,n=this.tmp.normalize;return this.tmp.normalize=!1,e(t),this.tmp.normalize=n,At(this),t}},{key:"change",value:function(e){Object(i.a)(!1,"As of Slate 0.43 the `change` object has been replaced with `editor`, so the `editor.change()` method is deprecated.`");for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.apply(void 0,[this.controller].concat(n))}},{key:"call",value:function(e){Object(i.a)(!1,"As of Slate 0.43 the `editor.call(fn)` method has been deprecated, please use `editor.command(fn)` instead.");for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this.controller].concat(n)),this.controller}},{key:"applyOperations",value:function(e){var t=this;return Object(i.a)(!1,"As of Slate 0.43 the `applyOperations` method is deprecated, please apply each operation in a loop instead."),e.forEach((function(e){return t.applyOperation(e)})),this.controller}},{key:"setOperationFlag",value:function(e,t){return Object(i.a)(!1,"As of slate@0.41 the `change.setOperationFlag` method has been deprecated."),this.tmp[e]=t,this}},{key:"getFlag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(!1,"As of slate@0.41 the `change.getFlag` method has been deprecated."),void 0!==t[e]?t[e]:this.tmp[e]}},{key:"unsetOperationFlag",value:function(e){return Object(i.a)(!1,"As of slate@0.41 the `change.unsetOperationFlag` method has been deprecated."),delete this.tmp[e],this}},{key:"withoutNormalization",value:function(e){return Object(i.a)(!1,"As of slate@0.41 the `change.withoutNormalization` helper has been renamed to `change.withoutNormalizing`."),this.withoutNormalizing(e)}},{key:"editor",get:function(){return Object(i.a)(!1,"As of Slate 0.43 the `change` object has been replaced with `editor`, so you don't need to access `change.editor`."),this.controller}}]),e}();function At(e){e.tmp.normalize&&e.tmp.dirty.length&&e.withoutNormalizing((function(){for(;e.tmp.dirty.length;){var t=e.tmp.dirty.pop();Ct(e,t)}}))}function Ct(e,t){for(var n=e.controller,r=e.value,o=r.document,a=o.assertNode(t),i=0,s=100+("text"===a.object?1:a.nodes.size);a;){var c=a.normalize(n);if(!c)break;c(n),o=(r=e.value).document;var u=a.key,l=o.getDescendant(t);if(l&&l.key===u)a=l;else{if(!(l=o.getDescendant(u)))break;a=l,t=o.getPath(u)}if(++i>s)throw new Error("A schema rule could not be normalized after sufficient iterations. This is usually due to a `rule.normalize` or `plugin.normalizeNode` function of a schema being incorrectly written, causing an infinite loop.")}}function Et(e,t){if(Array.isArray(t))t.forEach((function(t){return Et(e,t)}));else if(null!=t){var n=t.commands,r=t.queries,o=t.schema,a=N(t,["commands","queries","schema"]);if(n){var i=xe(n);Et(e,i)}if(r){var s=nt(r);Et(e,s)}if(o){var c=ot(o);Et(e,c)}for(var u in a){var l=a[u];(e.middleware[u]=e.middleware[u]||[]).push(l)}}}var Nt={marks:void 0,text:void 0},Tt=function(e){function t(){return w(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),x(t,[{key:"updateMark",value:function(e,t){var n=this.marks;if(t.equals(e))return this;if(!n.has(e))return this;var r=n.withMutations((function(n){n.remove(e).add(t)}));return this.set("marks",r)}},{key:"addMark",value:function(e){var t=this.marks;return this.set("marks",t.add(e))}},{key:"addMarks",value:function(e){var t=this.marks;return this.set("marks",t.union(e))}},{key:"insertText",value:function(e,t){var n=this.text,r=n.slice(0,e)+t+n.slice(e);return this.set("text",r)}},{key:"removeMark",value:function(e){var t=this.marks;return this.set("marks",t.remove(e))}},{key:"toJSON",value:function(){return{object:this.object,text:this.text,marks:this.marks.toArray().map((function(e){return e.toJSON()}))}}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(i.a)(!1,"As of slate@0.47 the `Leaf` model is deprecated."),t.isLeaf(e))return e;if("string"==typeof e&&(e={text:e}),a()(e))return t.fromJSON(e);throw new Error("`Leaf.create` only accepts objects, strings or leaves, but you passed it: "+e)}},{key:"createLeaves",value:function(e){if(e.size<=1)return e;var t=!1,n=Object(r.List)().withMutations((function(n){e.findLast((function(e,r){var o=n.first();if(o){if(o.marks.equals(e.marks))return t=!0,void n.set(0,o.set("text",""+e.text+o.text));if(""===o.text)return t=!0,void n.set(0,e);if(""===e.text)return void(t=!0)}n.unshift(e)}))}));return t?n:e}},{key:"splitLeaves",value:function(e,t){if(t<0)return[Object(r.List)(),e];if(0===e.size)return[Object(r.List)(),Object(r.List)()];var n=0,o=-1,a=void 0,i=void 0;return e.find((function(e){o++;var r=n,s=e.text;if((n+=s.length)<t)return!1;if(r>t)return!1;var c=t-r;return a=e.set("text",s.slice(0,c)),i=e.set("text",s.slice(c)),!0})),a?""===a.text?0===o?[r.List.of(a),e]:[e.take(o),e.skip(o)]:""===i.text?o===e.size-1?[e,r.List.of(i)]:[e.take(o+1),e.skip(o+1)]:[e.take(o).push(a),e.skip(o+1).unshift(i)]:[e,Object(r.List)()]}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r.List.isList(e)||Array.isArray(e)){var n=new r.List(e.map(t.create));return n}throw new Error("`Leaf.createList` only accepts arrays or lists, but you passed it: "+e)}},{key:"fromJSON",value:function(e){var n=e.text,o=void 0===n?"":n,a=e.marks,i=void 0===a?[]:a;return new t({text:o,marks:Object(r.Set)(i.map(J.fromJSON))})}},{key:"isLeafList",value:function(e){return r.List.isList(e)&&e.every((function(e){return t.isLeaf(e)}))}}]),t}(Object(r.Record)(Nt));function St(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,c=!0,u=!1,l=void 0;try{for(var d,f=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var v=d.value;if(!s.hasOwnProperty(v)){var h=Object.getOwnPropertyDescriptor(e,v);Object.defineProperty(s,v,h)}}}catch(e){u=!0,l=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw l}}var p=!0,y=!1,m=void 0;try{for(var g,k=Object.getOwnPropertyNames(e.prototype)[Symbol.iterator]();!(p=(g=k.next()).done);p=!0){var b=g.value;if(!s.prototype.hasOwnProperty(b)){h=Object.getOwnPropertyDescriptor(e.prototype,b);Object.defineProperty(s.prototype,b,h)}}}catch(e){y=!0,m=e}finally{try{!p&&k.return&&k.return()}finally{if(y)throw m}}}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}}Object.entries({Annotation:te,Block:de,Change:we,Decoration:H,Document:re,Editor:xt,Inline:ae,Leaf:Tt,Mark:J,Node:ue,Operation:be,Point:K,Range:Q,Selection:Y,Text:ce,Value:ve}).forEach((function(e){var t,n,r,o,a=S(e,2),i=a[0],s=a[1];return St((t=i.toLowerCase(),n=Z[t],r="is"+t.charAt(0).toUpperCase()+t.slice(1),(o=function(){function e(){w(this,e)}return x(e,[{key:"object",get:function(){return t}}]),e}())[r]=G.bind(null,t),o.prototype[n]=!0,o),[s])})),St(function(){function e(){w(this,e)}return x(e,[{key:"toJS",value:function(){return this.toJSON.apply(this,arguments)}}],[{key:"fromJS",value:function(){return this.fromJSON.apply(this,arguments)}}]),e}(),[te,de,H,re,ae,Tt,J,ue,be,K,Q,Y,ce,ve]);var Ft=!0,Pt=Symbol("LEAF"),jt=Symbol("STORE_KEY"),Dt=Symbol("undefined"),Bt=Symbol("null"),Rt=new WeakMap;function _t(e,t){var n=function(t){var n=e[t];if(!n)throw new Error('Object does not have a property named "'+t+'".');e[t]=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];if(!Ft)return n.apply(this,r);Rt.has(this)||Rt.set(this,{noArgs:{},hasArgs:{}});var a=Rt.get(this),i=a.noArgs,s=a.hasArgs,c=0!==r.length,u=void 0,l=void 0;if(void 0!==(u=c?Mt(s,l=[t].concat(r)):i[t]))return u===Dt?void 0:u;var d=n.apply(this,r),f=void 0===d?Dt:d;return c?Lt(s,l,f):i[t]=f,d}},r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){n(i.value)}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}function Mt(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;if(void 0===s?s=Dt:null==s&&(s=Bt),void 0===(e="object"===(void 0===s?"undefined":O(s))?e[jt]&&e[jt].get(s):e[s]))return}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return e[Pt]}function Lt(e,t,n){var r=e,o=!0,a=!1,i=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;if(void 0===u?u=Dt:null==u&&(u=Bt),"object"===(void 0===u?"undefined":O(u)))if(r[jt]||(r[jt]=new WeakMap),r[jt].has(u))r=r[jt].get(u);else{var l={};r[jt].set(u,l),r=l}else r[u]||(r[u]={}),r=r[u]}}catch(e){a=!0,i=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw i}}return r[Pt]=n,e}var It=function(){function e(){w(this,e)}return x(e,[{key:"getFirstText",value:function(){if("text"===this.object)return this;var e=null,t=this.nodes.find((function(t){return"text"===t.object||!!(e=t.getFirstText())}));return e||t}},{key:"getKeysToPathsTable",value:function(){var e=A({},this.key,[]);return this.nodes&&this.nodes.forEach((function(t,n){var r=t.getKeysToPathsTable();for(var o in r){var a=r[o];Object(i.a)(!(o in e),'A node with a duplicate key of "'+o+'" was found! Duplicate keys are not allowed, you should use `node.regenerateKey` before inserting if you are reusing an existing node.'),e[o]=[n].concat(F(a))}})),e}},{key:"getLastText",value:function(){if("text"===this.object)return this;var e=null,t=this.nodes.findLast((function(t){return"text"===t.object||(e=t.getLastText())}));return e||t}},{key:"getNode",value:function(e){return(e=this.resolvePath(e))?"text"===this.object&&e.size?null:e.size?this.getDescendant(e):this:null}},{key:"getPath",value:function(e){if(r.List.isList(e))return e;if(ue.isNode(e)&&this.descendants){var t=!0,n=!1,o=void 0;try{for(var a,i=this.descendants()[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value,c=S(s,2),u=c[0],l=c[1];if(e===u)return l}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}}var d=this.getKeysToPathsTable()[e];return d?Object(r.List)(d):null}},{key:"getText",value:function(){return"text"===this.object?this.text:this.nodes.reduce((function(e,t){return e+t.text}),"")}},{key:"hasNode",value:function(e){return!!this.getNode(e)}},{key:"normalize",value:function(e){return e.run("normalizeNode",this)}},{key:"regenerateKey",value:function(){var e=b.create();return this.set("key",e)}},{key:"resolvePath",value:function(e,t){return"string"==typeof e?(e=this.getPath(e),null!=t&&(e=e.concat(t))):e=z.create(e),e}},{key:"validate",value:function(e){return e.run("validateNode",this)}}]),e}();_t(It.prototype,["getFirstText","getKeysToPathsTable","getLastText","getText","normalize","validate"]),St(It,[de,re,ae,ce]);var zt=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function qt(){return!0}var Kt=function(){function e(){w(this,e)}return x(e,[{key:"addMark",value:function(e,t){e=this.resolvePath(e);var n=this.assertDescendant(e);return n=n.addMark(t),this.replaceNode(e,n)}},{key:"ancestors",value:function(e){return this.createIterable({path:e,direction:null,downward:!1,includeTargetAncestors:!0,includeRoot:!0})}},{key:"blocks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onlyLeaves,n=e.onlyRoots,r=e.onlyTypes,o=e.match,a=N(e,["onlyLeaves","onlyRoots","onlyTypes","match"]),i=this.descendants(C({includeDocument:!1,includeInlines:!1,includeTexts:!1},a,{match:function(e,a){return!(r&&!r.includes(e.type))&&((!n||1===a.size)&&(!(t&&!e.isLeafBlock())&&!(o&&!o(e,a))))}}));return i}},{key:"createAnnotation",value:function(e){return e=te.createProperties(e),this.resolveAnnotation(e)}},{key:"createDecoration",value:function(e){return e=H.createProperties(e),this.resolveDecoration(e)}},{key:"createIterable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.direction,n=void 0===t?"forward":t,r=e.downward,o=void 0===r||r,a=e.upward,i=void 0===a||a,s=e.includeBlocks,c=void 0===s||s,u=e.includeDocument,l=void 0===u||u,d=e.includeInlines,f=void 0===d||d,v=e.includeRoot,h=void 0!==v&&v,p=e.includeTarget,y=void 0===p?!!e.range:p,m=e.includeTargetAncestors,g=void 0!==m&&m,k=e.includeTexts,b=void 0===k||k,O=e.match,w=void 0===O?null:O,x=this,C=null,E=null;e.range?(E=x.resolveRange(e.range),C=x.resolvePath(E.start.path)):e.path&&(C=x.resolvePath(e.path));var N=C&&x.assertNode(C),T="undefined"==typeof window?zt.Set:window.Set;return A({},Symbol.iterator,(function(){var e=new T,t=E&&E.start.path,r=E&&E.end.path,a=C,s=N,u=!1,d=!1,v=!1,p=function(){return a&&s?(h||s!==x)&&(c||"block"!==s.object)&&(l||"document"!==s.object)&&(f||"inline"!==s.object)&&(b||"text"!==s.object)?w&&!w(s,a)?m():{value:[s,a],done:!1}:m():{done:!0}},m=function c(){if(!a||!s)return p();if(t&&!d)return v?a.size===t.size-1?(d=!0,a=C,s=N,c()):(a=t.slice(0,a.size+1),s=x.assertNode(a),p()):(v=!0,a=z.create([]),s=x,p());if(y&&!u)return u=!0,p();if(r&&a.equals(r))return s=null,a=null,c();if(o&&s.nodes&&s.nodes.size&&!e.has(s)){e.add(s);var l="forward"===n?0:s.nodes.size-1;return a=a.push(l),s=x.assertNode(a),p()}if("forward"===n){var f=z.increment(a),h=x.getNode(f);if(h)return a=f,s=h,p()}if("backward"===n&&0!==a.last()){var m=z.decrement(a),k=x.getNode(m);if(k)return a=m,s=k,p()}return i&&a.size?(a=z.lift(a),s=x.assertNode(a),e.has(s)?c():(e.add(s),g?p():c())):(a=null,s=null,c())};return{next:m}}))}},{key:"createPoint",value:function(e){return e=K.createProperties(e),this.resolvePoint(e)}},{key:"createRange",value:function(e){return e=Q.createProperties(e),this.resolveRange(e)}},{key:"createSelection",value:function(e){return e=Y.createProperties(e),this.resolveSelection(e)}},{key:"descendants",value:function(e){return this.createIterable(C({path:[]},e))}},{key:"filterDescendants",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=[],n=!0,o=!1,a=void 0;try{for(var i,s=this.descendants()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var c=i.value,u=S(c,2),l=u[0],d=u[1];e(l,d)&&t.push(l)}}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return Object(r.List)(t)}},{key:"findDescendant",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=!0,n=!1,r=void 0;try{for(var o,a=this.descendants()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value,s=S(i,2),c=s[0],u=s[1];if(e(c,u))return c}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return null}},{key:"forEachDescendant",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=!0,n=!1,r=void 0;try{for(var o,a=this.descendants()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value,s=e.apply(void 0,F(i));if(!1===s)return}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"getActiveMarksAtRange",value:function(e){if((e=this.resolveRange(e)).isUnset)return Object(r.Set)();if(e.isCollapsed){var t=e.start;return this.getInsertMarksAtPoint(t)}var n=e,o=n.start,a=n.end,i=o.path,s=o.offset,c=a.path,u=a.offset,l=this.getDescendant(i),d=this.getDescendant(c);if(!i.equals(c)){for(;!i.equals(c)&&0===u;){var f=this.texts({path:c,direction:"backward"}),v=S(f,1),h=S(v[0],2);d=h[0],c=h[1],u=d.text.length}for(;!i.equals(c)&&s===l.text.length;){var p=this.texts({path:i}),y=S(p,1),m=S(y[0],2);l=m[0],i=m[1],s=0}}if(i.equals(c))return l.marks;var g=l.marks;if(0===g.size)return Object(r.Set)();var k=d.marks,b=g.intersect(k);if(0===b.size)return b;var O=this.texts({path:i}),w=S(O,1),x=S(w[0],2);for(l=x[0],i=x[1];!i.equals(c);){if(0!==l.text.length&&0===(b=b.intersect(l.marks)).size)return Object(r.Set)();var A=this.texts({path:i}),C=S(A,1),E=S(C[0],2);l=E[0],i=E[1]}return b}},{key:"getAncestors",value:function(e){var t=this.ancestors(e),n=Array.from(t,(function(e){return S(e,1)[0]})).reverse();return Object(r.List)(n)}},{key:"getBlocks",value:function(){var e=this.blocks({onlyLeaves:!0}),t=Array.from(e,(function(e){return S(e,1)[0]}));return Object(r.List)(t)}},{key:"getBlocksByType",value:function(e){var t=this.blocks({onlyLeaves:!0,onlyTypes:[e]}),n=Array.from(t,(function(e){return S(e,1)[0]}));return Object(r.List)(n)}},{key:"getChild",value:function(e){return!(e=this.resolvePath(e))||e.size>1?null:this.nodes.get(e.first())}},{key:"getClosest",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=this.ancestors(e)[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,c=S(s,2),u=c[0];if(t(u,c[1]))return u}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return null}},{key:"getClosestBlock",value:function(e){return this.getClosest(e,(function(e){return"block"===e.object}))}},{key:"getClosestInline",value:function(e){return this.getClosest(e,(function(e){return"inline"===e.object}))}},{key:"getClosestVoid",value:function(e,t){return Object(s.a)(!ve.isValue(t),"As of Slate 0.42.0, the `node.getClosestVoid` method takes an `editor` instead of a `value`."),this.getClosest(e,(function(e){return t.isVoid(e)}))}},{key:"getCommonAncestor",value:function(e,t){if(e=this.resolvePath(e),t=this.resolvePath(t),!e||!t)return null;var n=z.relate(e,t);return this.getNode(n)}},{key:"getDecorations",value:function(e){var t=e.run("decorateNode",this);return t=H.createList(t)}},{key:"getDepth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!(e=this.resolvePath(e)))return null;var n=this.getNode(e),r=n?e.size-1+t:null;return r}},{key:"getDescendant",value:function(e){if(!(e=this.resolvePath(e))||!e.size)return null;var t=this;return e.forEach((function(e){return!!(t=t.getIn(["nodes",e]))})),t}},{key:"getDescendantsAtRange",value:function(e){var t=this.descendants({range:e}),n=Array.from(t,(function(e){return S(e,1)[0]}));return Object(r.List)(n)}},{key:"getFragmentAtRange",value:function(e){if((e=this.resolveRange(e)).isUnset)return re.create();for(var t=e,n=t.start,r=t.end,o=this,a=r.path,i=r.offset,s="end";a.size;){var c=a.last();o=o.splitNode(a,i),i=c+1,(a=z.lift(a)).size||"end"!==s||(a=n.path,i=n.offset,s="start")}var u=n.path.first()+1,l=r.path.first()+2,d=o.nodes.slice(u,l);return re.create({nodes:d})}},{key:"getFurthest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qt,n=this.ancestors(e),r=Array.from(n).reverse(),o=!0,a=!1,i=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,l=S(u,2),d=l[0],f=l[1];if(t(d,f))return d}}catch(e){a=!0,i=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw i}}return null}},{key:"getFurthestBlock",value:function(e){return this.getFurthest(e,(function(e){return"block"===e.object}))}},{key:"getFurthestChild",value:function(e){return(e=this.resolvePath(e))&&e.size?this.nodes.get(e.first()):null}},{key:"getFurthestInline",value:function(e){return this.getFurthest(e,(function(e){return"inline"===e.object}))}},{key:"getInlines",value:function(){var e=this.inlines({onlyLeaves:!0}),t=Array.from(e,(function(e){return S(e,1)[0]}));return Object(r.List)(t)}},{key:"getInlinesByType",value:function(e){var t=this.inlines({onlyLeaves:!0,onlyTypes:[e]}),n=Array.from(t,(function(e){return S(e,1)[0]}));return Object(r.List)(n)}},{key:"getInsertMarksAtPoint",value:function(e){var t=e=this.resolvePoint(e),n=t.path,r=t.offset,o=this.getDescendant(n);if(0!==r)return o.marks;var a=void 0,i=void 0,s=!0,c=!1,u=void 0;try{for(var l,d=this.ancestors(n)[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var f=l.value,v=S(f,2),h=v[0],p=v[1];"block"===h.object&&(a=h,i=p)}}catch(e){c=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}var y=z.drop(n,i.size),m=a.texts({path:y,direction:"backward"}),g=S(m,1)[0];return g?S(g,1)[0].marks:o.marks}},{key:"getInsertMarksAtRange",value:function(e){var t=(e=this.resolveRange(e)).start;return e.isUnset?Object(r.Set)():e.isCollapsed?this.getInsertMarksAtPoint(t):this.getDescendant(t.path).marks}},{key:"getLeafBlocksAtRange",value:function(e){var t=this.blocks({range:e,onlyLeaves:!0}),n=Array.from(t,(function(e){return S(e,1)[0]}));return Object(r.List)(n)}},{key:"getLeafInlinesAtRange",value:function(e){var t=this.inlines({range:e,onlyLeaves:!0}),n=Array.from(t,(function(e){return S(e,1)[0]}));return Object(r.List)(n)}},{key:"getNodesToPathsMap",value:function(){var e="undefined"==typeof window?new zt.Map:new window.Map;return e.set(this,z.create([])),this.forEachDescendant((function(t,n){e.set(t,n)})),e}},{key:"getMarks",value:function(){var e=this.marks(),t=Array.from(e,(function(e){return S(e,1)[0]}));return Object(r.OrderedSet)(t)}},{key:"getMarksAtRange",value:function(e){var t=this.marks({range:e}),n=Array.from(t,(function(e){return S(e,1)[0]}));return Object(r.OrderedSet)(n)}},{key:"getMarksByType",value:function(e){var t=this.marks({onlyTypes:[e]}),n=Array.from(t,(function(e){return S(e,1)[0]}));return Object(r.OrderedSet)(n)}},{key:"getNextBlock",value:function(e){var t=this.blocks({path:e,onlyLeaves:!0}),n=S(t,1)[0];return n?n[0]:null}},{key:"getNextNode",value:function(e){var t=this.createIterable({path:e,downward:!1}),n=S(t,1)[0];return n?n[0]:null}},{key:"getNextSibling",value:function(e){var t=this.siblings(e),n=S(t,1)[0];return n?n[0]:null}},{key:"getNextText",value:function(e){var t=this.texts({path:e}),n=S(t,1)[0];return n?n[0]:null}},{key:"getOffset",value:function(e){e=this.resolvePath(e),this.assertDescendant(e);var t=e.first(),n=this.nodes.slice(0,t).reduce((function(e,t){return e+t.text.length}),0);return 1===e.size?n:n+this.nodes.get(t).getOffset(z.drop(e))}},{key:"getOffsetAtRange",value:function(e){if((e=this.resolveRange(e)).isUnset)throw new Error("The range cannot be unset to calculcate its offset.");if(e.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");var t=e.start;return this.getOffset(t.path)+t.offset}},{key:"getParent",value:function(e){if(!(e=this.resolvePath(e)))return null;if(!e.size)return null;var t=z.lift(e);return this.getNode(t)}},{key:"getPreviousBlock",value:function(e){var t=this.blocks({path:e,onlyLeaves:!0,direction:"backward"}),n=S(t,1)[0];return n?n[0]:null}},{key:"getPreviousNode",value:function(e){var t=this.createIterable({path:e,downward:!1,direction:"backward"}),n=S(t,1)[0];return n?n[0]:null}},{key:"getPreviousSibling",value:function(e){var t=this.siblings(e,{direction:"backward"}),n=S(t,1)[0];return n?n[0]:null}},{key:"getPreviousText",value:function(e){var t=this.texts({path:e,direction:"backward"}),n=S(t,1)[0];return n?n[0]:null}},{key:"getRootBlocksAtRange",value:function(e){var t=this.blocks({range:e,onlyRoots:!0}),n=Array.from(t,(function(e){return S(e,1)[0]}));return Object(r.List)(n)}},{key:"getRootInlinesAtRange",value:function(e){var t=this.inlines({range:e,onlyRoots:!0}),n=Array.from(t,(function(e){return S(e,1)[0]}));return Object(r.List)(n)}},{key:"getTextAtOffset",value:function(e){if(0===e)return this.getFirstText();if(e===this.text.length)return this.getLastText();if(e<0||e>this.text.length)return null;var t=0,n=!0,r=!1,o=void 0;try{for(var a,i=this.texts()[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,c=S(s,1)[0];if((t+=c.text.length)>e)return c}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return null}},{key:"getTextDirection",value:function(){var e=y()(this.text);return"neutral"===e?null:e}},{key:"getTexts",value:function(){var e=this.texts(),t=Array.from(e,(function(e){return S(e,1)[0]}));return Object(r.List)(t)}},{key:"getTextsAtRange",value:function(e){var t=this.texts({range:e}),n=Array.from(t,(function(e){return S(e,1)[0]}));return Object(r.List)(n)}},{key:"hasBlockChildren",value:function(){return!(!this.nodes||!this.nodes.find((function(e){return"block"===e.object})))}},{key:"hasChild",value:function(e){return!!this.getChild(e)}},{key:"hasInlineChildren",value:function(){return!(!this.nodes||!this.nodes.find((function(e){return"inline"===e.object||"text"===e.object})))}},{key:"hasDescendant",value:function(e){return!!this.getDescendant(e)}},{key:"hasVoidParent",value:function(e,t){return Object(s.a)(!ve.isValue(t),"As of Slate 0.42.0, the `node.hasVoidParent` method takes an `editor` instead of a `value`."),!!this.getClosestVoid(e,t)}},{key:"inlines",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onlyLeaves,r=t.onlyRoots,o=t.onlyTypes,a=t.match,i=N(t,["onlyLeaves","onlyRoots","onlyTypes","match"]),s=this.descendants(C({includeBlocks:!1,includeTexts:!1,includeDocument:!1},i,{match:function(t,i){return!(o&&!o.includes(t.type))&&(!(n&&!t.isLeafInline())&&((!r||"block"===e.getParent(i).object)&&!(a&&!a(t,i))))}}));return s}},{key:"insertNode",value:function(e,t){var n=(e=this.resolvePath(e)).last(),r=z.lift(e),o=this.assertNode(r),a=o.nodes.splice(n,0,t);return o=o.set("nodes",a),this.replaceNode(r,o)}},{key:"insertText",value:function(e,t,n){e=this.resolvePath(e);var r=this.assertDescendant(e);return r=r.insertText(t,n),this.replaceNode(e,r)}},{key:"isLeafBlock",value:function(){return"block"===this.object&&!this.nodes.some((function(e){return"block"===e.object}))}},{key:"isLeafInline",value:function(){return"inline"===this.object&&!this.nodes.some((function(e){return"inline"===e.object}))}},{key:"isInRange",value:function(e,t){if(e=this.resolvePath(e),(t=this.resolveRange(t)).isUnset)return!1;var n=z.compare(e,t.start.path),r=z.compare(e,t.end.path),o=-1!==n&&1!==r;return o}},{key:"mapChildren",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,n=this.nodes;n.forEach((function(r,o){var a=t(r,o,e.nodes);a!==r&&(n=n.set(a.key,a))}));var r=this.set("nodes",n);return r}},{key:"mapDescendants",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,n=this.nodes;n.forEach((function(r,o){var a=r;"text"!==a.object&&(a=a.mapDescendants(t)),(a=t(a,o,e.nodes))!==r&&(n=n.set(o,a))}));var r=this.set("nodes",n);return r}},{key:"marks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onlyTypes,n=void 0===t?null:t,r=e.match,o=N(e,["onlyTypes","match"]),a=this.texts(o);return A({},Symbol.iterator,(function(){var e=a[Symbol.iterator](),t=null,o=null,i=[];return{next:function a(){if(i.length){var s=i.shift();return n&&!n.includes(s.type)||r&&!r(s,t,o)?a():{value:[s,t,o],done:!1}}var c=e.next(),u=c.value;if(c.done)return{done:!0};var l=S(u,2);return t=l[0],o=l[1],i=t.marks.toArray(),a()}}}))}},{key:"mergeNode",value:function(e){var t=this.assertNode(e);if(0===(e=this.resolvePath(e)).last())throw new Error("Unable to merge node because it has no previous sibling: "+t);var n=z.decrement(e),r=this.assertNode(n);if(r.object!==t.object)throw new Error("Unable to merge two different kinds of nodes: "+r+" and "+t);var o="text"===r.object?r.mergeText(t):r.set("nodes",r.nodes.concat(t.nodes)),a=this;return a=(a=(a=a.removeNode(e)).removeNode(n)).insertNode(n,o)}},{key:"moveNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.assertNode(e);e=this.resolvePath(e),t=this.resolvePath(t,n);var o=z.lift(t);this.assertNode(o);var a=be.create({type:"move_node",path:e,newPath:t});t=z.transform(e,a).first();var i=this;return i=(i=i.removeNode(e)).insertNode(t,r)}},{key:"removeMark",value:function(e,t){e=this.resolvePath(e);var n=this.assertDescendant(e);return n=n.removeMark(t),this.replaceNode(e,n)}},{key:"removeNode",value:function(e){this.assertDescendant(e);var t=(e=this.resolvePath(e)).flatMap((function(e){return["nodes",e]}));return this.deleteIn(t)}},{key:"removeText",value:function(e,t,n){var r=this.assertDescendant(e);return r=r.removeText(t,n.length),this.replaceNode(e,r)}},{key:"replaceNode",value:function(e,t){if(!(e=this.resolvePath(e)))throw new Error("Unable to replace a node because it could not be found in the first place: "+e);if(!e.size)return t;this.assertNode(e);var n=e.flatMap((function(e){return["nodes",e]}));return this.setIn(n,t)}},{key:"resolveAnnotation",value:function(e){return e=(e=te.create(e)).normalize(this)}},{key:"resolveDecoration",value:function(e){return e=(e=H.create(e)).normalize(this)}},{key:"resolvePoint",value:function(e){return e=(e=K.create(e)).normalize(this)}},{key:"resolveRange",value:function(e){return e=(e=Q.create(e)).normalize(this)}},{key:"resolveSelection",value:function(e){return e=(e=Y.create(e)).normalize(this)}},{key:"setNode",value:function(e,t){var n=this.assertNode(e);return n=n.merge(t),this.replaceNode(e,n)}},{key:"setMark",value:function(e,t,n){e=this.resolvePath(e);var r=this.assertDescendant(e);return r=r.setMark(t,n),this.replaceNode(e,r)}},{key:"siblings",value:function(e,t){return this.createIterable(C({path:e,upward:!1,downward:!1},t))}},{key:"splitNode",value:function(e,t,n){var r=this.assertNode(e);e=this.resolvePath(e);var o=void 0,a=void 0;if("text"===r.object){var i=r.splitText(t),s=S(i,2);o=s[0],a=s[1]}else{var c=r.nodes.take(t),u=r.nodes.skip(t);o=r.set("nodes",c),a=r.set("nodes",u).regenerateKey()}n&&"text"!==r.object&&(a=a.merge(n));var l=this;return l=(l=(l=l.removeNode(e)).insertNode(e,a)).insertNode(e,o)}},{key:"texts",value:function(e){return this.descendants(C({includeBlocks:!1,includeInlines:!1,includeDocument:!1},e))}},{key:"getBlocksAtRange",value:function(e){return Object(i.a)(!1,"As of slate@0.44 the `node.getBlocksAtRange` method has been renamed to `getLeafBlocksAtRange`."),this.getLeafBlocksAtRange(e)}},{key:"getBlocksAtRangeAsArray",value:function(e){return Object(i.a)(!1,"As of slate@0.44 the `node.getBlocksAtRangeAsArray` method has been renamed to `getLeafBlocksAtRangeAsArray`."),this.getLeafBlocksAtRangeAsArray(e)}},{key:"getInlinesAtRange",value:function(e){return Object(i.a)(!1,"As of slate@0.44 the `node.getInlinesAtRange` method has been renamed to `getLeafInlinesAtRange`."),this.getLeafInlinesAtRange(e)}},{key:"getInlinesAtRangeAsArray",value:function(e){return Object(i.a)(!1,"As of slate@0.44 the `node.getInlinesAtRangeAsArray` method has been renamed to `getLeafInlinesAtRangeAsArray`."),this.getLeafInlinesAtRangeAsArray(e)}},{key:"getNextTextAndPath",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getNextTextAndPath` method has been renamed to `getNextTextEntry`."),this.getNextTextEntry(e)}},{key:"getNextDeepMatchingNodeAndPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};Object(i.a)(!1,"As of slate@0.47, the `getNextDeepMatchingNodeAndPath` method is deprecated.");var n=this.getNextMatchingNodeAndPath(e);if(!n)return null;for(var r=S(n,2),o=r[0],a=r[1],s=void 0,c=function(){return s="text"!==o.object&&o.findFirstDescendantAndPath(t,a)};c(s);){var u=s,l=S(u,2);o=l[0],a=l[1]}return o?t(o)?[o,a]:this.getNextDeepMatchingNodeAndPath(n[1],t):null}},{key:"getPreviousTextAndPath",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getPreviousTextAndPath` method has been renamed to `getPreviousTextEntry`."),this.getPreviousTextEntry(e)}},{key:"findFirstDescendantAndPath",value:function(e,t){return Object(i.a)(!1,"As of slate@0.47, the `findFirstDescendantAndPath` method is deprecated."),this.findDescendantAndPath(e,t,!1)}},{key:"getPreviousMatchingNodeAndPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(Object(i.a)(!1,"As of slate@0.47, the `getPreviousMatchingNodeAndPath` method is deprecated."),!e)return null;for(var n=e.size;n>0;n--){var r=e.slice(0,n);if(0!==r.last()){for(var o=z.decrement(r),a=this.getNode(o);a&&!t(a);)o=z.decrement(o),a=this.getNode(o);if(a)return[a,o]}}return null}},{key:"getPreviousDeepMatchingNodeAndPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};Object(i.a)(!1,"As of slate@0.47, the `getPreviousDeepMatchingNodeAndPath` method is deprecated.");var n=this.getPreviousMatchingNodeAndPath(e);if(!n)return null;for(var r=S(n,2),o=r[0],a=r[1],s=void 0,c=function(){return s="text"!==o.object&&o.findLastDescendantAndPath(t,a)};c(s);){var u=s,l=S(u,2);o=l[0],a=l[1]}return o?t(o)?[o,a]:this.getPreviousDeepMatchingNodeAndPath(n[1],t):null}},{key:"findLastDescendantAndPath",value:function(e,t){return Object(i.a)(!1,"As of slate@0.47, the `findLastDescendantAndPath` method is deprecated."),this.findDescendantAndPath(e,t,!0)}},{key:"findDescendantAndPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.create([]),n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(i.a)(!1,"As of slate@0.47, the `findDescendantAndPath` method is deprecated.");var r=void 0,o=void 0;return this.forEachDescendantWithPath((function(t,n,a){if(e(t,n,a))return r=t,o=n,!1}),t,n),r?[r,o]:null}},{key:"forEachDescendantWithPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.create([]),n=arguments[2];Object(i.a)(!1,"As of slate@0.47, the `forEachDescendantWithPath` method is deprecated.");var r=this.nodes,o=void 0;return n&&(r=r.reverse()),r.forEach((function(a,i){var s=t.concat(i);return!1===e(a,s,r)?(o=!1,!1):"text"!==a.object?o=a.forEachDescendantWithPath(e,s,n):void 0})),o}},{key:"getNextMatchingNodeAndPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(Object(i.a)(!1,"As of slate@0.47, the `getNextMatchingNodeAndPath` method is deprecated."),!e)return null;for(var n=e.size;n>0;n--){for(var r=e.slice(0,n),o=z.increment(r),a=this.getNode(o);a&&!t(a);)o=z.increment(o),a=this.getNode(o);if(a)return[a,o]}return null}},{key:"getSelectionIndexes",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(i.a)(!1,"As of slate@0.47, the `getSelectionIndexes` method is deprecated.");var n=e.start,r=e.end;if(!t)return null;if(e.isUnset)return null;if(n.path.equals(r.path)){var o=this.getFurthestAncestor(n.path),a=o?this.nodes.indexOf(o):null;return{start:a,end:a+1}}var s=null,c=null;return this.nodes.forEach((function(e,t){return"text"===e.object?(null==s&&e.key===n.key&&(s=t),null==c&&e.key===r.key&&(c=t+1)):(null==s&&e.hasDescendant(n.key)&&(s=t),null==c&&e.hasDescendant(r.key)&&(c=t+1)),null==s||null==c})),t&&null==s&&(s=0),t&&null==c&&(c=this.nodes.size),null==s?null:{start:s,end:c}}},{key:"getTextsBetweenPositionsAsArray",value:function(e,t){return Object(i.a)(!1,"As of slate@0.47, the `getTextsBetweenPositionsAsArray` method is deprecated."),e=this.resolvePath(e),t=this.resolvePath(t),this.getTextsBetweenPathPositionsAsArray(e,t)}},{key:"getOrderedMarksBetweenPositions",value:function(e,t,n,o){Object(i.a)(!1,"As of slate@0.47, the `getOrderedMarksBetweenPositions` method is deprecated."),e=this.resolvePath(e),n=this.resolvePath(n);var a=this.getDescendant(e);if(z.isEqual(e,n))return a.marks;var s=this.getTextsBetweenPathPositionsAsArray(e,n);return Object(r.OrderedSet)().withMutations((function(e){s.forEach((function(t){e.union(t.marks)}))}))}},{key:"getTextsBetweenPathPositionsAsArray",value:function(e,t){if(Object(i.a)(!1,"As of slate@0.47, the `getTextsBetweenPathPositionsAsArray` method is deprecated."),e&&t&&z.isEqual(e,t))return[this.getDescendant(e)];if(!e&&!t)return this.getTextsAsArray();var n=e?e.get(0,0):0,r=t?t.get(0,this.nodes.size-1):this.nodes.size-1,o=[];return this.nodes.slice(n,r+1).forEach((function(a,i){if("text"===a.object)o.push(a);else{var s=e&&0===i?z.drop(e):null,c=t&&i===r-n?z.drop(t):null;o=o.concat(a.getTextsBetweenPathPositionsAsArray(s,c))}})),o}},{key:"getFurthestAncestor",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getFurthestAncestor` method has been renamed to `getFurthestChild`."),this.getFurthestChild(e)}},{key:"getLeafBlocksAtRangeAsArray",value:function(e){if(Object(i.a)(!1,"As of slate@0.47, the `getLeafBlocksAtRangeAsArray` method is deprecated."),(e=this.resolveRange(e)).isUnset)return[];var t=e,n=t.start,r=t.end;return this.getLeafBlocksBetweenPathPositionsAsArray(n.path,r.path)}},{key:"getLeafBlocksBetweenPathPositionsAsArray",value:function(e,t){if(Object(i.a)(!1,"As of slate@0.47, the `getLeafBlocksBetweenPathPositionsAsArray` method is deprecated."),e&&t&&z.isEqual(e,t))return[this.getClosestBlock(e)];if(!e&&!t)return this.getBlocksAsArray();var n=e?e.get(0,0):0,r=t?t.get(0,this.nodes.size-1):this.nodes.size-1,o=[];return this.nodes.slice(n,r+1).forEach((function(a,i){if("block"===a.object)if(a.isLeafBlock())o.push(a);else{var s=e&&0===i?z.drop(e):null,c=t&&i===r-n?z.drop(t):null;o=o.concat(a.getLeafBlocksBetweenPathPositionsAsArray(s,c))}})),o}},{key:"getBlocksAsArray",value:function(){Object(i.a)(!1,"As of slate@0.47, the `getBlocksAsArray` method is deprecated.");var e=this.blocks({onlyLeaves:!0});return Array.from(e,(function(e){return S(e,1)[0]}))}},{key:"getBlocksByTypeAsArray",value:function(e){Object(i.a)(!1,"As of slate@0.47, the `getBlocksByTypeAsArray` method is deprecated.");var t=this.blocks({onlyLeaves:!0,onlyTypes:[e]});return Array.from(t,(function(e){return S(e,1)[0]}))}},{key:"getFurthestOnlyChildAncestor",value:function(e){Object(i.a)(!1,"As of slate@0.47, the `getFurthestOnlyChildAncestor` method is deprecated.");var t=this.getAncestors(e);return t&&t.rest().reverse().takeUntil((function(e){return e.nodes.size>1})).last()||null}},{key:"getInlinesAsArray",value:function(){return Object(i.a)(!1,"As of slate@0.47, the `getInlinesAsArray` method is deprecated."),Array.from(this.inlines({onlyLeaves:!0}),(function(e){return S(e,1)[0]}))}},{key:"getInlinesByTypeAsArray",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getInlinesByTypeAsArray` method is deprecated."),Array.from(this.inlines({onlyLeaves:!0,onlyTypes:[e]}),(function(e){return S(e,1)[0]}))}},{key:"getLeafInlinesAtRangeAsArray",value:function(e){var t=this;return Object(i.a)(!1,"As of slate@0.47, the `getLeafInlinesAtRangeAsArray` method is deprecated."),(e=this.resolveRange(e)).isUnset?[]:this.getTextsAtRangeAsArray(e).map((function(e){return t.getClosestInline(e.key)})).filter((function(e){return e}))}},{key:"getOrderedMarks",value:function(){return Object(i.a)(!1,"As of slate@0.47, the `getOrderedMarks` method has been folded into `getMarks`, which will now return an ordered set."),this.getMarks()}},{key:"getOrderedMarksAtRange",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getOrderedMarksAtRange` method has been folded into `getMarksAtRange`, which will now return an ordered set."),this.getMarksAtRange(e)}},{key:"getOrderedMarksByType",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getOrderedMarksByType` method has been folded into `getMarksByType`, which will now return an ordered set."),this.getMarksByType(e)}},{key:"getMarksByTypeAsArray",value:function(e){return Object(i.a)(!1,"As of slate@0.47, the `getMarksByTypeAsArray` method is deprecated."),this.nodes.reduce((function(t,n){return"text"===n.object?t.concat(n.marks.filter((function(t){return t.type===e}))):t.concat(n.getMarksByTypeAsArray(e))}),[])}},{key:"getMarksAsArray",value:function(){var e;Object(i.a)(!1,"As of slate@0.47, the `getMarksAsArray` method is deprecated.");var t=[],n=!0,r=!1,o=void 0;try{for(var a,s=this.texts()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value,u=S(c,1)[0];t.push(u.marks.toArray())}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return(e=[]).concat.apply(e,t)}},{key:"getRootInlinesAtRangeAsArray",value:function(e){var t=this;return Object(i.a)(!1,"As of slate@0.47, the `getRootInlinesAtRangeAsArray` method is deprecated."),(e=this.resolveRange(e)).isUnset?Object(r.List)():this.getTextsAtRangeAsArray(e).map((function(e){return t.getFurthestInline(e.key)})).filter((function(e){return e}))}},{key:"getTextsAsArray",value:function(){Object(i.a)(!1,"As of slate@0.47, the `getTextsAsArray` method is deprecated.");var e=this.texts();return Array.from(e,(function(e){return S(e,1)[0]}))}},{key:"getTextsAtRangeAsArray",value:function(e){Object(i.a)(!1,"As of slate@0.47, the `getTextsAtRangeAsArray` method is deprecated.");var t=this.texts({range:e});return Array.from(t,(function(e){return S(e,1)[0]}))}},{key:"getMarksAtPosition",value:function(e,t){Object(i.a)(!1,"As of slate@0.47, the `getMarksAtPosition` method is deprecated."),e=this.resolvePath(e);var n=this.getDescendant(e).marks;if(0!==t)return Object(r.OrderedSet)(n);var o=this.getClosestBlock(e);if(""===o.text)return Object(r.OrderedSet)(n);var a=this.texts({path:e,direction:"backward"}),s=S(a,1)[0];if(!s)return Object(r.OrderedSet)();var c=S(s,2),u=c[0],l=c[1];return o.hasDescendant(l)?Object(r.OrderedSet)(u.marks):Object(r.OrderedSet)(n)}},{key:"getNodesAtRange",value:function(e){Object(i.a)(!1,"As of slate@0.47, the `getNodesAtRange` method has been renamed to `getDescendantsAtRange`.");var t=this.descendants({range:e}),n=Array.from(t,(function(e){return S(e,1)[0]}));return Object(r.List)(n)}},{key:"isNodeInRange",value:function(e,t){return Object(i.a)(!1,"As of slate@0.47, the `isNodeInRange` method has been renamed to `isInRange`."),this.isInRange(e,t)}},{key:"text",get:function(){return this.getText()}}]),e}(),Ut=function(e){Kt.prototype["assert"+e]=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=this["get"+e].apply(this,[t].concat(r));if(null==a)throw new Error("`Node.assert"+e+"` could not find node with path or key: "+t);return a}},Wt=!0,Jt=!1,Vt=void 0;try{for(var Ht,Xt=["Child","Depth","Descendant","Node","Parent","Path"][Symbol.iterator]();!(Wt=(Ht=Xt.next()).done);Wt=!0){Ut(Ht.value)}}catch(e){Jt=!0,Vt=e}finally{try{!Wt&&Xt.return&&Xt.return()}finally{if(Jt)throw Vt}}_t(Kt.prototype,["getBlocksAsArray","getBlocksByTypeAsArray","getDecorations","getFragmentAtRange","getInlinesAsArray","getInlinesByTypeAsArray","getInsertMarksAtRange","getLeafBlocksAtRangeAsArray","getLeafBlocksAtRangeAsArray","getLeafInlinesAtRangeAsArray","getMarksAsArray","getMarksAtPosition","getMarksByTypeAsArray","getNextBlock","getNodesAtRange","getNodesToPathsMap","getOffset","getOffsetAtRange","getOrderedMarksBetweenPositions","getPreviousBlock","getRootBlocksAtRange","getRootInlinesAtRangeAsArray","getTextAtOffset","getTextDirection","getTextsAsArray","getTextsBetweenPathPositionsAsArray"]),St(Kt,[de,re,ae]),St(function(){function e(){w(this,e)}return x(e,[{key:"flip",value:function(){return this.setPoints([this.focus,this.anchor])}},{key:"moveForward",value:function(e){return this.updatePoints((function(t){return t.moveForward(e)}))}},{key:"moveBackward",value:function(e){return this.updatePoints((function(t){return t.moveBackward(e)}))}},{key:"moveAnchorBackward",value:function(e){return this.setAnchor(this.anchor.moveBackward(e))}},{key:"moveAnchorForward",value:function(e){return this.setAnchor(this.anchor.moveForward(e))}},{key:"moveAnchorTo",value:function(e,t){return this.setAnchor(this.anchor.moveTo(e,t))}},{key:"moveAnchorToStartOfNode",value:function(e){return this.setAnchor(this.anchor.moveToStartOfNode(e))}},{key:"moveAnchorToEndOfNode",value:function(e){return this.setAnchor(this.anchor.moveToEndOfNode(e))}},{key:"moveEndBackward",value:function(e){return this.setEnd(this.end.moveBackward(e))}},{key:"moveEndForward",value:function(e){return this.setEnd(this.end.moveForward(e))}},{key:"moveEndTo",value:function(e,t){return this.setEnd(this.end.moveTo(e,t))}},{key:"moveEndToStartOfNode",value:function(e){return this.setEnd(this.end.moveToStartOfNode(e))}},{key:"moveEndToEndOfNode",value:function(e){return this.setEnd(this.end.moveToEndOfNode(e))}},{key:"moveFocusBackward",value:function(e){return this.setFocus(this.focus.moveBackward(e))}},{key:"moveFocusForward",value:function(e){return this.setFocus(this.focus.moveForward(e))}},{key:"moveFocusTo",value:function(e,t){return this.setFocus(this.focus.moveTo(e,t))}},{key:"moveFocusToStartOfNode",value:function(e){return this.setFocus(this.focus.moveToStartOfNode(e))}},{key:"moveFocusToEndOfNode",value:function(e){return this.setFocus(this.focus.moveToEndOfNode(e))}},{key:"moveStartBackward",value:function(e){return this.setStart(this.start.moveBackward(e))}},{key:"moveStartForward",value:function(e){return this.setStart(this.start.moveForward(e))}},{key:"moveStartTo",value:function(e,t){return this.setStart(this.start.moveTo(e,t))}},{key:"moveStartToStartOfNode",value:function(e){return this.setStart(this.start.moveToStartOfNode(e))}},{key:"moveStartToEndOfNode",value:function(e){return this.setStart(this.start.moveToEndOfNode(e))}},{key:"moveTo",value:function(e,t){return this.updatePoints((function(n){return n.moveTo(e,t)}))}},{key:"moveToAnchor",value:function(){return this.setFocus(this.anchor)}},{key:"moveToEnd",value:function(){return this.setStart(this.end)}},{key:"moveToEndOfNode",value:function(e){return this.updatePoints((function(t){return t.moveToEndOfNode(e)}))}},{key:"moveToFocus",value:function(){return this.setAnchor(this.focus)}},{key:"moveToRangeOfNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.setPoints([this.anchor.moveToStartOfNode(e),this.focus.moveToEndOfNode(t)]);return n}},{key:"moveToStart",value:function(){return this.setEnd(this.start)}},{key:"moveToStartOfNode",value:function(e){return this.updatePoints((function(t){return t.moveToStartOfNode(e)}))}},{key:"normalize",value:function(e){return this.updatePoints((function(t){return t.normalize(e)}))}},{key:"setAnchor",value:function(e){return this.set("anchor",e)}},{key:"setEnd",value:function(e){return this.isBackward?this.setAnchor(e):this.setFocus(e)}},{key:"setFocus",value:function(e){return this.set("focus",e)}},{key:"setPoints",value:function(e){var t=S(e,2),n=t[0],r=t[1];return this.set("anchor",n).set("focus",r)}},{key:"updatePoints",value:function(e){var t=this.anchor,n=this.focus;return t=e(t),n=e(n),this.merge({anchor:t,focus:n})}},{key:"setStart",value:function(e){return this.isBackward?this.setFocus(e):this.setAnchor(e)}},{key:"setProperties",value:function(e){var t=e=Q.createProperties(e),n=t.anchor,r=t.focus,o=N(t,["anchor","focus"]);return n&&(o.anchor=K.create(n)),r&&(o.focus=K.create(r)),this.merge(o)}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={object:this.object,anchor:this.anchor.toJSON(e),focus:this.focus.toJSON(e)};return t}},{key:"toRange",value:function(){var e=Q.createProperties(this);return Q.create(e)}},{key:"unset",value:function(){return this.updatePoints((function(e){return e.unset()}))}},{key:"isCollapsed",get:function(){return this.anchor===this.focus||this.anchor.key===this.focus.key&&this.anchor.offset===this.focus.offset}},{key:"isExpanded",get:function(){return!this.isCollapsed}},{key:"isBackward",get:function(){var e=this.isUnset,t=this.anchor,n=this.focus;return e?null:t.key===n.key?t.offset>n.offset:z.isBefore(n.path,t.path)}},{key:"isForward",get:function(){var e=this.isBackward;return null==e?null:!e}},{key:"isUnset",get:function(){var e=this.anchor,t=this.focus;return e.isUnset||t.isUnset}},{key:"isSet",get:function(){return!this.isUnset}},{key:"start",get:function(){return this.isBackward?this.focus:this.anchor}},{key:"end",get:function(){return this.isBackward?this.anchor:this.focus}}]),e}(),[te,H,Q,Y])}).call(this,n(110))},1838:function(e,t,n){"use strict";n.d(t,"a",(function(){return pt}));var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(1730),c=n(1731),u=n.n(c),l=n(1863),d=n.n(l),f=n(1723),v=n(134),h=n(1732),p=n.n(h),y=n(1733),m=n.n(y),g=n(1351),k=n(491),b=n.n(k),O=n(1722),w=n.n(O),x=n(841),A=n(1734),C=n(6),E=n.n(C),N=n(1735),T=n(1736),S=n(1724),F=n(1737),P=n(1738),j=!1;try{var D=document.createElement("div");D.addEventListener("focus",(function(e){e.preventDefault(),e.stopPropagation()}),!0),D.focus(Object.defineProperty({},"preventScroll",{get:function(){j=!0}}))}catch(e){}if(void 0===HTMLElement.prototype.nativeFocus&&!j){HTMLElement.prototype.nativeFocus=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(e){var t=window.scrollY||window.pageYOffset;this.nativeFocus(),e&&e.preventScroll&&window.scroll(window.scrollX||window.pageXOffset,t)}}var B=["onBeforeInput","onBlur","onClick","onContextMenu","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onInput","onFocus","onKeyDown","onKeyUp","onMouseDown","onMouseUp","onPaste","onSelect"],R="data-slate-editor",_="data-slate-fragment",M="data-key",L="data-slate-leaf",I="data-slate-length",z="data-slate-object",q="data-offset-key",K="data-slate-spacer",U="data-slate-string",W="data-slate-void",J="data-slate-zero-width",V={BLOCK:"["+z+'="block"]',EDITOR:"["+R+"]",INLINE:"["+z+'="inline"]',KEY:"["+M+"]",LEAF:"["+L+"]",OBJECT:"["+z+"]",STRING:"["+U+"]",TEXT:"["+z+'="text"]',VOID:"["+W+"]",ZERO_WIDTH:"["+J+"]"},H=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},X=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Y=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},$=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Q=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ee=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},te=/^([\w-]+)(?::(\d+))?$/;var ne={parse:function(e){var t=te.exec(e);if(!t)throw new Error('Invalid offset key string "'+e+'".');var n=Q(t,3),r=(n[0],n[1]),o=n[2];return{key:r,index:parseInt(o,10)}},stringify:function(e){return e.key+":"+e.index}},re=function(e){var t=e.text,n=void 0===t?"":t,r=e.isTrailing,a=void 0!==r&&r;return o.a.createElement("span",Y({},U,!0),n,a?"\n":null)},oe=function(e){var t,n=e.length,r=void 0===n?0:n,a=e.isLineBreak,i=void 0!==a&&a;return o.a.createElement("span",(Y(t={},J,i?"n":"z"),Y(t,I,r),t),"\ufeff",i?o.a.createElement("br",null):null)},ae=function(e){var t,n=e.marks,r=e.annotations,a=e.decorations,i=e.node,s=e.index,c=e.offset,u=e.text,l=e.editor,d=e.parent,f=e.block,v=e.leaves,h=ne.stringify({key:i.key,index:s}),p=void 0;if(l.query("isVoid",d))p=o.a.createElement(oe,{length:d.text.length});else if(""===u&&"block"===d.object&&""===d.text&&d.nodes.last()===i)p=o.a.createElement(oe,{isLineBreak:!0});else if(""===u)p=o.a.createElement(oe,null);else{var y=f.getLastText(),m=u.charAt(u.length-1),g=i===y,k=s===v.size-1;p=g&&k&&"\n"===m?o.a.createElement(re,{isTrailing:!0,text:u}):o.a.createElement(re,{text:u})}var b={editor:l,marks:n,annotations:r,decorations:a,node:i,offset:c,text:u},O=!0,w=!1,x=void 0;try{for(var A,C=n[Symbol.iterator]();!(O=(A=C.next()).done);O=!0){var E=A.value;(I=l.run("renderMark",Z({},b,{mark:E,children:p,attributes:Y({},z,"mark")})))&&(p=I)}}catch(e){w=!0,x=e}finally{try{!O&&C.return&&C.return()}finally{if(w)throw x}}var N=!0,T=!1,S=void 0;try{for(var F,P=a[Symbol.iterator]();!(N=(F=P.next()).done);N=!0){var j=F.value;(I=l.run("renderDecoration",Z({},b,{decoration:j,children:p,attributes:Y({},z,"decoration")})))&&(p=I)}}catch(e){T=!0,S=e}finally{try{!N&&P.return&&P.return()}finally{if(T)throw S}}var D=!0,B=!1,R=void 0;try{for(var _,M=r[Symbol.iterator]();!(D=(_=M.next()).done);D=!0){var I,K=_.value;(I=l.run("renderAnnotation",Z({},b,{annotation:K,children:p,attributes:Y({},z,"annotation")})))&&(p=I)}}catch(e){B=!0,R=e}finally{try{!D&&M.return&&M.return()}finally{if(B)throw R}}var U=(Y(t={},L,!0),Y(t,q,h),t);return o.a.createElement("span",U,p)};ae.propTypes={annotations:u.a.list.isRequired,block:s.a.block.isRequired,decorations:u.a.list.isRequired,editor:i.a.object.isRequired,index:i.a.number.isRequired,leaves:i.a.object.isRequired,marks:s.a.marks.isRequired,node:s.a.node.isRequired,offset:i.a.number.isRequired,parent:s.a.node.isRequired,text:i.a.string.isRequired};var ie=o.a.memo(ae,(function(e,t){return t.block===e.block&&t.index===e.index&&t.marks===e.marks&&t.parent===e.parent&&t.text===e.text&&t.annotations.equals(e.annotations)&&t.decorations.equals(e.decorations)})),se=o.a.forwardRef((function(e,t){var n,r=e.annotations,a=e.block,i=e.decorations,s=e.node,c=e.parent,u=e.editor,l=e.style,d=s.key,f=s.getLeaves(r,i),v=0;return o.a.createElement("span",Z({ref:t,style:l},(Y(n={},z,s.object),Y(n,M,d),n)),f.map((function(e,t){var n=e.text,r=v;return v+=n.length,o.a.createElement(ie,{key:s.key+"-"+t,block:a,editor:u,index:t,annotations:e.annotations,decorations:e.decorations,marks:e.marks,node:s,offset:r,parent:c,leaves:f,text:n})})))}));se.propTypes={annotations:u.a.map.isRequired,block:s.a.block,decorations:u.a.list.isRequired,editor:i.a.object.isRequired,node:s.a.node.isRequired,parent:s.a.node.isRequired,style:i.a.object};var ce=o.a.memo(se,(function(e,t){return t.node===e.node&&"block"===t.parent.object&&e.parent.nodes.last()===e.node&&t.parent.nodes.last()!==t.node&&t.annotations.equals(e.annotations)&&t.decorations.equals(e.decorations)})),ue=d()("slate:void"),le=function(e){function t(){var e,n,r;H(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=$(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),de.call(r),$(r,n)}return G(t,e),X(t,[{key:"render",value:function(){var e,t=this.props,n=t.children,r=t.node,a=t.readOnly,i="block"===r.object?"div":"span",s=Y({},K,!0),c=o.a.createElement(i,Z({style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},s),this.renderText()),u=o.a.createElement(i,{contentEditable:!!a&&null},n);this.debug("render",{props:t});var l=(Y(e={},W,!0),Y(e,M,r.key),e);return o.a.createElement(i,Z({contentEditable:!(!a&&"block"!==r.object)&&null},l),a?null:c,u)}}]),t}(o.a.Component);le.propTypes={block:s.a.block,children:i.a.any.isRequired,editor:i.a.object.isRequired,node:s.a.node.isRequired,parent:s.a.node.isRequired,readOnly:i.a.bool.isRequired};var de=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key,s=a.type,c=i+" ("+s+")";ue.apply(void 0,[t,""+c].concat(r))},this.renderText=function(){var t=e.props,n=t.annotations,r=t.block,a=t.decorations,i=t.node,s=t.readOnly,c=t.editor,u=t.textRef,l=i.getFirstText();return o.a.createElement(ce,{ref:u,annotations:n,block:"block"===i.object?i:r,decorations:a,editor:c,key:l.key,node:l,parent:i,readOnly:s})}},fe=d()("slate:node"),ve=function(e){function t(){var e,n,r;H(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=$(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),he.call(r),$(r,n)}return G(t,e),X(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.editor.run("shouldNodeComponentUpdate",t,e),r=e,o=t;if(null!=n){if(Object(f.a)(!1,'As of slate-react@0.22 the `shouldNodeComponentUpdate` middleware is deprecated. You can pass specific values down the tree using React\'s built-in "context" construct instead.'),n)return!0;Object(f.a)(!1!==n,"Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return r.readOnly!==o.readOnly||(r.node!==o.node||(!!(!r.selection&&o.selection||r.selection&&!o.selection||r.selection&&o.selection&&!r.selection.equals(o.selection))||(!r.annotations.equals(o.annotations)||!r.decorations.equals(o.decorations))))}},{key:"render",value:function(){var e,n=this;this.debug("render",this);var r=this.props,a=r.annotations,i=r.block,s=r.decorations,c=r.editor,u=r.node,l=r.parent,d=r.readOnly,f=r.selection,v=u.getDecorations(c),h=u.nodes.toArray().map((function(e,r){var l="text"===e.object?ce:t,h=f&&pe(u,r,f),p=v.concat(s).map((function(e){return pe(u,r,e)})).filter((function(e){return e})),y=a.map((function(e){return pe(u,r,e)})).filter((function(e){return e}));return o.a.createElement(l,{block:"block"===u.object?u:i,editor:c,annotations:y,decorations:p,selection:h,key:e.key,node:e,parent:u,readOnly:d,ref:function(e){e?n.tmp.nodeRefs[r]=e:delete n.tmp.nodeRefs[r]}})})),p=(Y(e={},z,u.object),Y(e,M,u.key),Y(e,"ref",this.ref),e);u.isLeafBlock()&&("rtl"===u.getTextDirection()&&(p.dir="rtl"));var y=void 0;"block"===u.object?y="renderBlock":"document"===u.object?y="renderDocument":"inline"===u.object&&(y="renderInline");var m=c.run(y,{attributes:p,children:h,editor:c,isFocused:!!f&&f.isFocused,isSelected:!!f,node:u,parent:l,readOnly:d});return c.isVoid(u)?o.a.createElement(le,Z({},this.props,{textRef:function(e){e?n.tmp.nodeRefs[0]=e:delete n.tmp.nodeRefs[0]}}),m):m}}]),t}(o.a.Component);ve.propTypes={annotations:u.a.map.isRequired,block:s.a.block,decorations:u.a.list.isRequired,editor:i.a.object.isRequired,node:s.a.node.isRequired,parent:s.a.node,readOnly:i.a.bool.isRequired,selection:s.a.selection};var he=function(){var e=this;this.tmp={nodeRefs:{}},this.ref=o.a.createRef(),this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key,s=a.type;fe.apply(void 0,[t,i+" ("+s+")"].concat(r))}};function pe(e,t,n){if(n.isUnset)return null;var r=e.nodes.get(t),o=n,a=o.start,i=o.end,s=a.path,c=i.path,u=s.first(),l=c.first();if(u===t)a=a.setPath(s.rest());else if(u<t&&t<=l)if("text"===r.object)a=a.moveTo(v.j.create([t]),0).setKey(r.key);else{var d=r.texts(),f=Q(d,1)[0],h=Q(f,2),p=h[0],y=h[1];a=a.moveTo(y,0).setKey(p.key)}else a=null;if(l===t)i=i.setPath(c.rest());else if(u<=t&&t<l)if("text"===r.object){var m=r.text.length;i=i.moveTo(v.j.create([t]),m).setKey(r.key)}else{var g=r.texts({direction:"backward"}),k=Q(g,1)[0],b=Q(k,2),O=b[0],w=b[1];i=i.moveTo(w,O.text.length).setKey(O.key)}else i=null;return a&&i?n=(n=n.setAnchor(a)).setFocus(i):null}var ye=["auto","overlay","scroll"],me=g.f&&!!window.navigator.userAgent.match(/os 11_/i);function ge(e){if(!me&&e.anchorNode){var t=p()(e.anchorNode),n=function(e,t){for(var n=e.parentNode,r=void 0;!r&&n.parentNode;){var o=t.getComputedStyle(n).overflowY;if(ye.includes(o)){r=n;break}n=n.parentNode}return r||t.document.body}(e.anchorNode,t),r=n===t.document.body||n===t.document.documentElement,o=m()(e),a=e.getRangeAt(0).cloneRange();a.collapse(o);var i=a.getBoundingClientRect();g.h&&a.collapsed&&0===i.top&&0===i.height&&(0===a.startOffset?a.setEnd(a.endContainer,1):a.setStart(a.startContainer,a.startOffset-1),0===(i=a.getBoundingClientRect()).top&&0===i.height&&a.getClientRects().length&&(i=a.getClientRects()[0]));var s=void 0,c=void 0,u=void 0,l=void 0,d=0,f=0,v=0,h=0,y=0,k=0,b=0,O=0;if(r){s=t.innerWidth,c=t.innerHeight,u=t.pageYOffset,l=t.pageXOffset}else{var w=n.offsetWidth,x=n.offsetHeight,A=n.scrollTop,C=n.scrollLeft,E=t.getComputedStyle(n),N=E.borderTopWidth,T=E.borderBottomWidth,S=E.borderLeftWidth,F=E.borderRightWidth,P=E.paddingTop,j=E.paddingBottom,D=E.paddingLeft,B=E.paddingRight,R=n.getBoundingClientRect();s=w,c=x,d=R.top+parseInt(N,10),f=R.left+parseInt(S,10),v=parseInt(N,10)+parseInt(T,10),h=parseInt(S,10)+parseInt(F,10),y=parseInt(P,10),k=parseInt(j,10),b=parseInt(D,10),O=parseInt(B,10),u=A,l=C}var _=i.top+u-d,M=i.left+l-f,L=l,I=u;M<l?L=M-b:M+i.width+h>l+s&&(L=M+h+O-s),_<u?I=_-y:_+i.height+v>u+c&&(I=_+v+k+i.height-c),r?t.scrollTo(L,I):(n.scrollTop=I,n.scrollLeft=L)}}function ke(e){if(g.e){var t=window.document.body.createTextRange();t.collapse(),t.select()}else e.removeAllRanges()}var be=/Permission denied to access property "nodeType"/,Oe=d()("slate:content");Oe.update=d()("slate:update");var we=function(e){function t(){var e,n,r;H(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=$(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.tmp={isUpdatingSelection:!1,isComposing:!1,nodeRef:o.a.createRef(),nodeRefs:{},contentKey:0,nativeSelection:{}},r.ref=o.a.createRef(),r.setRef=function(e){r.ref.current=e,r.props.editor.el=e},r.handlers=B.reduce((function(e,t){return e[t]=function(e){return r.onEvent(t,e)},e}),{}),r.updateSelection=function(){var e=r.props.editor,t=e.value.selection,n=t.isBackward,o=p()(r.ref.current),a=o.getSelection(),i=o.document.activeElement;if(Oe.update.enabled&&Oe.update("updateSelection",{selection:t.toJSON()}),a){var s=a.rangeCount,c=a.anchorNode,u=!1;t.isBlurred&&i===r.ref.current&&(r.ref.current.blur(),u=!0);var l=!0,d=!0,v=!1,h=void 0;try{for(var y,m=["anchorNode","anchorOffset","focusNode","focusOffset","isCollapsed","rangeCount","type"][Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var k=y.value;r.tmp.nativeSelection[k]!==a[k]&&(l=!1)}}catch(e){v=!0,h=e}finally{try{!d&&m.return&&m.return()}finally{if(v)throw h}}if(t.isUnset&&s&&r.isInEditor(c)&&l&&(ke(a),u=!0),t.isFocused&&i!==r.ref.current&&(r.ref.current.focus({preventScroll:!0}),u=!0),t.isFocused&&t.isSet){var b=!!a.rangeCount&&a.getRangeAt(0),O=e.findDOMRange(t);if(!O)return void Object(f.a)(!1,"Unable to find a native DOM range from the current selection.");var w=O.startContainer,x=O.startOffset,A=O.endContainer,C=O.endOffset;if(b&&(w===b.startContainer&&x===b.startOffset&&A===b.endContainer&&C===b.endOffset||w===b.endContainer&&x===b.endOffset&&A===b.startContainer&&C===b.startOffset))return;u=!0,r.tmp.isUpdatingSelection=!0,ke(a),a.setBaseAndExtent?n?a.setBaseAndExtent(O.endContainer,O.endOffset,O.startContainer,O.startOffset):a.setBaseAndExtent(O.startContainer,O.startOffset,O.endContainer,O.endOffset):a.addRange(O),!0===e.userActionPerformed()&&ge(a),setTimeout((function(){g.d&&r.ref.current&&r.ref.current.focus(),r.tmp.isUpdatingSelection=!1,Oe.update("updateSelection:setTimeout",{anchorOffset:o.getSelection().anchorOffset})}))}u&&(Oe.enabled||Oe.update.enabled)&&(Oe("updateSelection",{selection:t,native:a,activeElement:i}),Oe.update("updateSelection:applied",{selection:t.toJSON(),native:{anchorOffset:a.anchorOffset,focusOffset:a.focusOffset}}))}},r.isInEditor=function(e){var t=void 0;try{if(8===e.nodeType)return!1;t=3===e.nodeType?e.parentNode:e}catch(e){if(g.d&&be.test(e.message))return!1;throw e}return t.isContentEditable&&(t===r.ref.current||t.closest(V.EDITOR)===r.ref.current)},r.onNativeSelectionChange=b()((function(e){if(!r.props.readOnly){var t=p()(e.target),n=t.document.activeElement,o=t.getSelection();Oe.update("onNativeSelectionChange",{anchorOffset:o.anchorOffset}),n===r.ref.current&&(r.tmp.nativeSelection={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset,isCollapsed:o.isCollapsed,rangeCount:o.rangeCount,type:o.type},r.props.onEvent("onSelect",e))}}),100),$(r,n)}return G(t,e),X(t,[{key:"componentDidCatch",value:function(e,t){Oe("componentDidCatch",{error:e,info:t}),this.setState({})}},{key:"componentDidMount",value:function(){p()(this.ref.current).document.addEventListener("selectionchange",this.onNativeSelectionChange),g.a&&this.ref.current.addEventListener("beforeinput",this.handlers.onBeforeInput),this.updateSelection(),this.props.onEvent("onComponentDidMount")}},{key:"componentWillUnmount",value:function(){var e=p()(this.ref.current);e&&e.document.removeEventListener("selectionchange",this.onNativeSelectionChange),g.a&&this.ref.current.removeEventListener("beforeinput",this.handlers.onBeforeInput),this.props.onEvent("onComponentWillUnmount")}},{key:"componentDidUpdate",value:function(){Oe.update("componentDidUpdate"),this.updateSelection(),this.props.editor.clearUserActionPerformed(),this.props.onEvent("onComponentDidUpdate")}},{key:"onEvent",value:function(e,t){var n=this;(Oe("onEvent",e),"onCompositionStart"===e&&(this.tmp.isComposing=!0),"onCompositionEnd"===e)&&p()(t.target).requestAnimationFrame((function(){return n.tmp.isComposing=!1}));var r=t.nativeEvent||t,o="keydown"===t.type&&(A.a.isUndo(r)||A.a.isRedo(r));if(!this.tmp.isUpdatingSelection&&!o||"onSelect"!==e&&"onBlur"!==e&&"onFocus"!==e){if(!g.b&&"onSelect"===e&&!this.tmp.isComposing){var a=this.props.editor,i=a.value.selection,s=p()(t.target).getSelection(),c=a.findRange(s);if(c&&c.equals(i.toRange()))return void this.updateSelection()}if("onDragEnd"===e||"onDragEnter"===e||"onDragExit"===e||"onDragLeave"===e||"onDragOver"===e||"onDragStart"===e||"onDrop"===e)if(t.target.closest(V.EDITOR)!==this.ref.current)return;("onBeforeInput"!==e&&"onBlur"!==e&&"onCompositionEnd"!==e&&"onCompositionStart"!==e&&"onCopy"!==e&&"onCut"!==e&&"onFocus"!==e&&"onInput"!==e&&"onKeyDown"!==e&&"onKeyUp"!==e&&"onPaste"!==e&&"onSelect"!==e||this.isInEditor(t.target))&&this.props.onEvent(e,t)}}},{key:"render",value:function(){var e,n=this.props,r=this.handlers,a=n.id,i=n.className,s=n.readOnly,c=n.editor,u=n.tabIndex,l=n.role,d=n.tagName,f=n.spellCheck,v=c.value,h=d,p=v.document,y=v.selection,m=Z({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},s?{}:{WebkitUserModify:"read-write-plaintext-only"},n.style);Oe("render",{props:n}),Oe.update("render",this.tmp.contentKey,p.text),this.props.onEvent("onRender");var g=(Y(e={},R,!0),Y(e,M,p.key),e),k=w()(this.props,Object.keys(t.propTypes));return o.a.createElement(h,Z({},k,{key:this.tmp.contentKey},r,g,{ref:this.setRef,contentEditable:!s||null,suppressContentEditableWarning:!0,id:a,className:i,autoCorrect:n.autoCorrect?"on":"off",spellCheck:f,style:m,role:s?null:l||"textbox",tabIndex:u,"data-gramm":!!k["data-gramm"]&&void 0}),o.a.createElement(ve,{annotations:v.annotations,block:null,decorations:Object(x.List)(),editor:c,node:p,parent:null,readOnly:s,selection:y,ref:this.tmp.nodeRef}))}}]),t}(o.a.Component);we.propTypes={autoCorrect:i.a.bool.isRequired,className:i.a.string,contentKey:i.a.number,editor:i.a.object.isRequired,id:i.a.string,onEvent:i.a.func.isRequired,readOnly:i.a.bool.isRequired,role:i.a.string,spellCheck:i.a.bool.isRequired,style:i.a.object,tabIndex:i.a.number,tagName:i.a.string},we.defaultProps={style:{},tagName:"div"};var xe=[].concat(ee(B),["commands","decorateNode","queries","renderAnnotation","renderBlock","renderDecoration","renderDocument","renderEditor","renderInline","renderMark","schema"]);function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=xe.reduce((function(t,n){return n in e&&(t[n]=e[n]),t}),{});return t}function Ce(){return{decorateNode:function(){return[]},renderAnnotation:function(e){var t=e.attributes,n=e.children;return o.a.createElement("span",t,n)},renderBlock:function(e){var t=e.attributes,n=e.children;return o.a.createElement("div",Z({},t,{style:{position:"relative"}}),n)},renderDecoration:function(e){var t=e.attributes,n=e.children;return o.a.createElement("span",t,n)},renderDocument:function(e){return e.children},renderEditor:function(e){return e.children},renderInline:function(e){var t=e.attributes,n=e.children;return o.a.createElement("span",Z({},t,{style:{position:"relative"}}),n)},renderMark:function(e){var t=e.attributes,n=e.children;return o.a.createElement("span",t,n)}}}function Ee(){return{queries:{findDOMNode:function(e,t){t=v.j.create(t);var n=e.tmp.contentRef.current;return n?t.size?function e(t,n){if(!t)return null;if(!n.size)return t.ref?t.ref.current||null:t||null;var r=n.first(),o=n.rest();return e(t.tmp.nodeRefs[r],o)}(n.tmp.nodeRef.current,t):n.ref.current||null:null},findDOMPoint:function(e,t){var n=e.findDOMNode(t.path),r=0;if(!n)return null;var o=Array.from(n.querySelectorAll(V.STRING+", "+V.ZERO_WIDTH)),a=!0,i=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value,d=l.childNodes[0],f=d.textContent.length,v=f;l.hasAttribute(I)&&(v=parseInt(l.getAttribute(I),10));var h=r+v;if(t.offset<=h)return{node:d,offset:Math.min(f,Math.max(0,t.offset-r))};r=h}}catch(e){i=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw s}}return null},findDOMRange:function(e,t){var n=t.anchor,r=t.focus,o=t.isBackward,a=t.isCollapsed,i=e.findDOMPoint(n),s=a?i:e.findDOMPoint(r);if(!i||!s)return null;var c=p()(i.node).document.createRange(),u=o?s:i,l=o?i:s;return c.setStart(u.node,u.offset),c.setEnd(l.node,l.offset),c},findEventRange:function(e,t){t.nativeEvent&&(t=t.nativeEvent);var n=t,r=n.clientX,o=n.clientY,a=n.target;if(null==r||null==o)return null;var i=e.value.document,s=e.findPath(t.target);if(!s)return null;var c=i.getNode(s);if(e.isVoid(c)){var u=a.getBoundingClientRect(),l="inline"===c.object?r-u.left<u.left+u.width-r:o-u.top<u.top+u.height-o,d=i.createRange(),f=l?"moveToEndOfNode":"moveToStartOfNode",v=i[l?"getPreviousText":"getNextText"](s);return v?d[f](v):null}var h=p()(a),y=void 0;if(h.document.caretRangeFromPoint)y=h.document.caretRangeFromPoint(r,o);else if(h.document.caretPositionFromPoint){var m=h.document.caretPositionFromPoint(r,o);(y=h.document.createRange()).setStart(m.offsetNode,m.offset),y.setEnd(m.offsetNode,m.offset)}else if(h.document.body.createTextRange){y=h.document.body.createTextRange();try{y.moveToPoint(r,o)}catch(e){return null}}return e.findRange(y)},findNode:function(e,t){var n=e.findPath(t);return n?e.value.document.getNode(n):null},findPath:function(e,t){var n=e.tmp.contentRef.current,r=t;if(r.hasAttribute(M)||(r=r.closest(V.KEY)),!r||!r.getAttribute(M))return null;if(r===n.ref.current)return v.j.create([]);var o=function e(t,n){if(r===t)return n;if(!t.ref)return null;if(r===t.ref.current)return n;if(!t.tmp)return null;var o=t.tmp.nodeRefs,a=Object.keys(o),i=!0,s=!1,c=void 0;try{for(var u,l=a[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value,f=o[d],v=parseInt(d,10),h=e(f,[].concat(ee(n),[v]));if(h)return h}}catch(e){s=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}return null}(n.tmp.nodeRef.current,[]);return o?v.j.create(o):null},findPoint:function(e,t,n){var r=function(e,t){if(1===e.nodeType&&e.childNodes.length){var n=t===e.childNodes.length,r=n?"backward":"forward";for(e=Ne(e,n?t-1:t,r);1===e.nodeType&&e.childNodes.length;){var o=n?e.childNodes.length-1:0;e=Ne(e,o,r)}t=n?e.textContent.length:0}return{node:e,offset:t}}(t,n),o=r.node,a=r.offset,i=p()(t),s=o.parentNode,c=s.closest(V.LEAF),u=void 0,l=void 0,d=void 0;if(c){u=c.closest(V.TEXT);var f=i.document.createRange();f.setStart(u,0),f.setEnd(o,a);var v=f.cloneContents(),h=v.querySelectorAll(V.ZERO_WIDTH);Array.from(h).forEach((function(e){e.parentNode.removeChild(e)})),l=v.textContent.length,d=u}else{var y=s.closest(V.VOID);if(!y)return null;if(!(c=y.querySelector(V.LEAF)))return null;u=c.closest(V.TEXT),l=(d=c).textContent.length}l===d.textContent.length&&s.hasAttribute(J)&&l--;var m=e.findPath(u);return m?e.value.document.createPoint({path:m,offset:l}):null},findRange:function(e,t){var n=t.anchorNode||t.startContainer;if(!n)return null;var r=p()(n);(t instanceof r.Range||r.StaticRange&&t instanceof r.StaticRange)&&(t={anchorNode:t.startContainer,anchorOffset:t.startOffset,focusNode:t.endContainer,focusOffset:t.endOffset});var o=t,a=o.anchorNode,i=o.anchorOffset,s=o.focusNode,c=o.focusOffset,u=o.isCollapsed,l=e.value,d=e.findPoint(a,i),f=u?d:e.findPoint(s,c);return d&&f?l.document.createRange({anchor:d,focus:f}):null},findSelection:function(e,t){var n=e.value,r=n.document;if(!t.rangeCount)return null;var o=e.findRange(t);if(!o)return null;var a=o,i=a.anchor,s=a.focus,c=r.getNode(i.path),u=r.getNode(s.path),l=r.getClosestInline(i.path),d=r.getClosestInline(s.path),f=r.getClosestBlock(s.path),h=r.getClosestBlock(i.path);if(h&&!e.isVoid(h)&&0===i.offset&&f&&e.isVoid(f)&&0!==s.offset&&(o=o.setFocus(s.setOffset(0))),l&&!e.isVoid(l)&&i.offset===c.text.length){var p=r.getClosestBlock(i.path),y=r.getDepth(p.key),m=v.j.drop(i.path,y),g=p.texts({path:m}),k=Q(g,1)[0];if(k){var b=Q(k,2)[1],O=i.path.slice(0,y).concat(b);o=o.moveAnchorTo(O,0)}}if(d&&!e.isVoid(d)&&s.offset===u.text.length){var w=r.getClosestBlock(s.path),x=r.getDepth(w.key),A=v.j.drop(s.path,x),C=w.texts({path:A}),E=Q(C,1)[0];if(E){var N=Q(E,2)[1],T=s.path.slice(0,x).concat(N);o=o.moveFocusTo(T,0)}}var S=r.createSelection(o);return S=(S=S.setIsFocused(!0)).set("marks",n.selection.marks)}}}}function Ne(e,t,n){for(var r=e.childNodes,o=r[t],a=t,i=!1,s=!1;(8===o.nodeType||1===o.nodeType&&0===o.childNodes.length||1===o.nodeType&&"false"===o.getAttribute("contenteditable"))&&(!i||!s);)a>=r.length?(i=!0,a=t-1,n="backward"):a<0?(s=!0,a=t+1,n="forward"):(o=r[a],"forward"===n&&a++,"backward"===n&&a--);return o||null}function Te(e,t){if(e===t)return null;var n=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length!==t.length?n:null}(e,t),r=function(e,t,n){for(var r=e.length,o=t.length,a=Math.min(r,o,n),i=0;i<a;i++){if(e.charAt(r-i-1)!==t.charAt(o-i-1))return i}return e.length!==t.length?a:null}(e,t,Math.min(e.length-n,t.length-n));return{start:n,end:r,total:n+r}}function Se(e,t){return e.slice(t.start,e.length-t.end)}var Fe=d()("slate:composition-manager"),Pe=String.fromCharCode(65279),je=E.a.unstable_flushControlled;function De(e,t){je((function(){t(),e.controller.flush()}))}function Be(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t,o=e,a=0;-1!==a&&-1!==(a=o.indexOf(Pe,a));)r>a&&r--,o=""+o.slice(0,a)+o.slice(a+1);var i=o.charAt(o.length-1);n&&"\n"===i&&(o=o.slice(0,-1));var s=o.length;return r>s&&(r=s),{text:o,offset:r}}function Re(e){var t=new window.MutationObserver((function(e){var t;Fe("flush"),(t=c).push.apply(t,ee(e)),d()})),n=null,r={rootEl:null,diff:null,range:null,domNode:null};function o(){Fe("clearAction"),r.diff=null,r.domNode=null}function a(){Fe("applyDiff");var t=r.diff;if(null!=t){Fe("applyDiff:run");var n=e.value.document,o=e.value.selection.moveAnchorTo(t.path,t.start).moveFocusTo(t.path,t.end);o=n.resolveRange(o),e.insertTextAtRange(o,t.insertText)}}function i(){Fe("splitBlock"),De(e,(function(){a(),r.range?e.select(r.range):Fe("splitBlock:NO-SELECTION"),e.splitBlock().focus().restoreDOM(),o()}))}var s=null,c=[],u=null,l=!1;function d(){s&&(window.cancelAnimationFrame(s),s=null),l=!0,u&&window.cancelAnimationFrame(u),u=window.requestAnimationFrame((function(){c.length>0&&function(t){if(Fe("flushAction",t.length,t),r.range&&!r.range.isCollapsed)return void De(e,(function(){e.select(r.range).deleteBackward().focus().restoreDOM()}));if(t.length>1){if(t.find((function(t){if("childList"!==t.type)return!1;if(0===t.addedNodes.length)return!1;var n=t.addedNodes[0];if(n.nodeType===window.Node.TEXT_NODE&&"\n"===n.textContent)return!0;if(n.nodeType!==window.Node.ELEMENT_NODE)return!1;var r=n.dataset.key;return null!=r&&!!e.value.document.getClosestBlock(r)})))return void i()}var s=t[0];"characterData"===s.type?function(t){Fe("resolveDOMNode");var n=e.value.document,o=t.closest("[data-key]").dataset.key,a=n.getPath(o),i=n.getClosestBlock(o),s=n.getDescendant(o),c=s.text,u=i.nodes.last()===s,l=Be(t.textContent,0,u).text;if(l===c)return void(r.diff=null);var d=function(e,t){var n=Te(e,t);if(null==n)return null;var r=Se(t,n),o=Se(e,n);return{start:n.start,end:e.length-n.end,cursor:n.start+r.length,insertText:r,removeText:o}}(c,l);r.diff={path:a,start:d.start,end:d.end,insertText:d.insertText},Fe("resolveDOMNode:diff",r.diff)}(s.target.parentNode):"childList"===s.type&&(s.removedNodes.length>0?1===t.length?function(t){if(Fe("removeNode"),t.nodeType!==window.Node.ELEMENT_NODE)return;var n=e.value,r=n.document,o=n.selection,a=e.findNode(t),i=r.resolveRange(o.moveToRangeOfNode(a));De(e,(function(){e.select(i).delete().restoreDOM()}))}(s.removedNodes[0]):(Fe("mergeBlock"),n.requestAnimationFrame((function(){De(e,(function(){a(),e.select(r.range).deleteBackward().focus().restoreDOM(),o()}))}))):s.addedNodes.length>0&&i())}(c),u=null,c=[],l=!1}))}return{clearDiff:function(){Fe("clearDIff"),r.diff=null},connect:function(){Fe("connect",{rootEl:o});var o=e.findDOMNode([]);r.rootEl!==o&&(Fe("connect:run"),n=p()(o),t.observe(o,{childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0}))},disconnect:function(){Fe("disconnect"),t.disconnect(),r.rootEl=null},onKeyDown:d,onCompositionStart:function(){Fe("onCompositionStart")},onCompositionEnd:function(){Fe("onCompositionEnd"),window.setTimeout((function(){r.diff&&(Fe("onCompositionEnd:applyDiff"),De(e,(function(){a();var t=n.getSelection().getRangeAt(0),r=Be(t.startContainer.textContent,t.startOffset),o=e.findRange({anchorNode:t.startContainer,anchorOffset:0,focusNode:t.startContainer,focusOffset:0,isCollapsed:!0}).moveTo(r.offset);e.select(o).focus().restoreDOM()}))),o()}),20)},onSelect:function(t){Fe("onSelect:try"),t=t.nativeEvent?t.nativeEvent:t,window.cancelAnimationFrame(s),s=null,l||(s=window.requestAnimationFrame((function(){Fe("onSelect:save-selection");var n,i=p()(t.target).getSelection(),s=e.findRange(i),c=Be(i.anchorNode.textContent,i.anchorOffset),u=Be(i.focusNode.textContent,i.focusOffset);s.anchor.offset!==c.offset&&(s=s.set("anchor",s.anchor.set("offset",c.offset))),s.focus.offset!==u.offset&&(s=s.set("focus",s.focus.set("offset",u.offset))),Fe("onSelect:save-data",{domSelection:(n=i,{anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),range:s.toJS()}),i.isCollapsed&&r.node!==i.anchorNode&&null!=r.diff&&(Fe("onSelect:applyDiff",r.diff),a(),e.select(s),o()),r.range=s,r.node=i.anchorNode})))}}}function _e(e){var t=new Re(e.editor);return{onComponentDidMount:function(){t.connect()},onComponentDidUpdate:function(){t.connect()},onComponentWillUnmount:function(){t.disconnect()},onCompositionEnd:function(){t.onCompositionEnd()},onCompositionStart:function(){t.onCompositionStart()},onRender:function(){t.disconnect(),t.clearDiff()},onSelect:function(e){!function(e){var t=e.getSelection(),n=t.anchorNode;if(null!=n){var r=n.parentElement.dataset;if(!!r&&"n"===r.slateZeroWidth&&1===n.textContent.length&&0!==t.anchorOffset){var o=e.document.createRange();o.setStart(n,0),o.setEnd(n,0),t.removeAllRanges(),t.addRange(o)}}}(p()(e.target)),t.onSelect(e)}}}function Me(){var e={},t=!0,n=!1,r=void 0;try{for(var o,a=B[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){e[o.value]=function(e,t,n){}}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return e}var Le={FRAGMENT:"application/x-slate-fragment",HTML:"text/html",NODE:"application/x-slate-node",RICH:"text/rtf",TEXT:"text/plain"},Ie=Le.FRAGMENT,ze=Le.HTML,qe=Le.TEXT;function Ke(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};Object(S.a)(!v.n.isValue(t),"As of Slate 0.42.0, the `cloneFragment` utility takes an `editor` instead of a `value`.");var r=p()(e.target),o=r.getSelection(),a=t.value,i=a.document,s=a.fragment,c=a.selection,u=c.start,l=c.end,d=i.getClosestVoid(u.path,t),f=i.getClosestVoid(l.path,t);if(!o.isCollapsed||d){var h=N.a.serializeNode(s),y=o.getRangeAt(0),m=y.cloneContents(),k=m.childNodes[0];if(m.childNodes.forEach((function(e){e.textContent&&""!==e.textContent.trim()&&(k=e)})),f){var b=y.cloneRange(),O=i.getPath(f.key);if(O){var w=t.findDOMNode(O);b.setEndAfter(w),m=b.cloneContents()}}if(d&&(k=m.childNodes[0].childNodes[1].firstChild),[].slice.call(m.querySelectorAll(V.ZERO_WIDTH)).forEach((function(e){var t="n"===e.getAttribute(J);e.textContent=t?"\n":""})),3===k.nodeType){var x=r.document.createElement("span");x.style.whiteSpace="pre",x.appendChild(k),m.appendChild(x),k=x}k.setAttribute(_,h);var A=v.n.create({document:s}),C=T.a.serialize(A),E=r.document.createElement("div");if(E.appendChild(m),e.clipboardData&&e.clipboardData.setData&&!g.e)return e.preventDefault(),e.clipboardData.setData(qe,C),e.clipboardData.setData(Ie,h),e.clipboardData.setData(ze,E.innerHTML),void n();var F=e.target.closest(V.EDITOR);E.setAttribute("contenteditable",!0),E.style.position="absolute",E.style.left="-9999px",F.appendChild(E),o.selectAllChildren(E),r.requestAnimationFrame((function(){F.removeChild(E),ke(o),o.addRange(y),n()}))}}var Ue=Le.FRAGMENT,We=Le.HTML,Je=Le.NODE,Ve=Le.RICH,He=Le.TEXT,Xe=/ data-slate-fragment="([^\s"]+)"/;function Ye(e){!g.e&&e.nativeEvent&&(e=e.nativeEvent);var t=e.dataTransfer||e.clipboardData,n=Ze(t,Ue),r=Ze(t,Je),o=Ze(t,We),a=Ze(t,Ve),i=Ze(t,He),s=void 0;if(!n&&o&&~o.indexOf(" "+_+'="')){var c=Xe.exec(o),u=Q(c,2),l=(u[0],u[1]);l&&(n=l)}if(i){var d=function(e){var t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!==t)return{TEXT:e};try{return JSON.parse(e.substring(t.length))}catch(e){throw new Error("Unable to parse custom Slate drag event data.")}}(i);d[Ue]&&(n=d[Ue]),d[Je]&&(r=d[Je]),d[He]&&(i=d[He])}n&&(n=N.a.deserializeNode(n)),r&&(r=N.a.deserializeNode(r));try{t.items&&t.items.length?s=Array.from(t.items).map((function(e){return"file"===e.kind?e.getAsFile():null})).filter((function(e){return e})):t.files&&t.files.length&&(s=Array.from(t.files))}catch(e){t.files&&t.files.length&&(s=Array.from(t.files))}var f={files:s,fragment:n,html:o,node:r,rich:a,text:i};return f.type=function(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}(f),f}function Ze(e,t){return e.types&&e.types.length?-1!==Array.from(e.types).indexOf(t)&&e.getData(t)||null:t===He&&e.getData("Text")||null}var Ge=Le.TEXT;function $e(e,t,n){var r=Le[t.toUpperCase()];if(!r)throw new Error('Cannot set unknown transfer type "'+r+'".');e.nativeEvent&&(e=e.nativeEvent);var o=e.dataTransfer||e.clipboardData;try{o.setData(r,n),o.setData("text",o.getData("text"))}catch(e){var a="SLATE-DATA-EMBED::",i=o.getData(Ge),s={};if(i.substring(0,a.length)===a)try{s=JSON.parse(i.substring(a.length))}catch(e){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else s[Ge]=i;s[r]=n;var c=""+a+JSON.stringify(s);o.setData(Ge,c)}}var Qe=d()("slate:after");function et(){var e=null,t=!1;return{onBeforeInput:function(e,t,n){var r=t.value;if(!!e.nativeEvent)return e.preventDefault(),t.insertText(e.data),n();var o=e.getTargetRanges(),a=Q(o,1)[0];if(!a)return n();Qe("onBeforeInput",{event:e}),e.preventDefault();var i=r.document,s=r.selection,c=t.findRange(a);switch(e.inputType){case"deleteByDrag":case"deleteByCut":case"deleteContent":case"deleteContentBackward":case"deleteContentForward":t.deleteAtRange(c);break;case"deleteWordBackward":t.deleteWordBackwardAtRange(c);break;case"deleteWordForward":t.deleteWordForwardAtRange(c);break;case"deleteSoftLineBackward":case"deleteHardLineBackward":t.deleteLineBackwardAtRange(c);break;case"deleteSoftLineForward":case"deleteHardLineForward":t.deleteLineForwardAtRange(c);break;case"insertLineBreak":case"insertParagraph":i.hasVoidParent(s.start.path,t)?t.moveToStartOfNextText():t.splitBlockAtRange(c);break;case"insertFromYank":case"insertReplacementText":case"insertText":var u=null==e.data?e.dataTransfer.getData("text/plain"):e.data;if(null==u)break;t.insertTextAtRange(c,u,s.marks),s.marks&&r.document!==t.value.document&&t.select({marks:null})}n()},onBlur:function(e,t,n){Qe("onBlur",{event:e}),t.blur(),n()},onClick:function(e,t,n){if(t.readOnly)return n();var r=t.value.document,o=t.findPath(e.target);if(!o)return n();Qe("onClick",{event:e});var a=r.getNode(o),i=r.getAncestors(o);a&&(t.isVoid(a)||i.some((function(e){return t.isVoid(e)})))&&t.focus().moveToEndOfNode(a),n()},onCopy:function(e,t,n){Qe("onCopy",{event:e}),Ke(e,t),n()},onCut:function(e,t,n){Qe("onCut",{event:e}),Ke(e,t,(function(){var e=t.value,n=e.document,r=e.selection,o=r.end,a=void 0;if(r.isCollapsed){var i=!0,s=!1,c=void 0;try{for(var u,l=n.ancestors(o.path)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value,f=Q(d,2),v=f[0],h=f[1];if(t.isVoid(v)){a=h;break}}}catch(e){s=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}}a?t.removeNodeByKey(a):t.delete()})),n()},onDragEnd:function(t,n,r){Qe("onDragEnd",{event:t}),e=null,r()},onDragStart:function(t,n,r){Qe("onDragStart",{event:t}),e=!0;var o=n.value,a=o.document,i=n.findPath(t.target),s=a.getNode(i),c=a.getAncestors(i),u=s&&(n.isVoid(s)||c.some((function(e){return n.isVoid(e)}))),l=o.blocks.some((function(e){return e===s}));u&&!l&&n.moveToRangeOfNode(s);var d=n.value.fragment;$e(t,"fragment",N.a.serializeNode(d)),r()},onDrop:function(t,n,r){var o=n.value,a=o.document,i=o.selection,s=p()(t.target),c=n.findEventRange(t);if(!c)return r();Qe("onDrop",{event:t});var u=Ye(t),l=u.type,d=u.fragment,f=u.text;n.focus();var v=n.findDOMNode(c.focus.path);v&&v.dispatchEvent(new MouseEvent("mouseup",{view:s,bubbles:!0,cancelable:!0}));var h=i;if(n.select(c),e&&n.deleteAtRange(h),"text"===l||"html"===l){var y=c.anchor,m=a.hasVoidParent(y.path,n);if(m){for(var g=y.path,k=a.getNode(y.path);m;){var b=a.texts({path:g}),O=Q(b,1)[0];if(!O)break;var w=Q(O,2);k=w[0],g=w[1],m=a.hasVoidParent(g,n)}k&&n.moveToStartOfNode(k)}f&&f.split("\n").forEach((function(e,t){t>0&&n.splitBlock(),n.insertText(e)}))}"fragment"===l&&n.insertFragment(d),r()},onFocus:function(e,n,r){Qe("onFocus",{event:e}),!t||g.e||g.c?n.focus():n.deselect().focus(),r()},onInput:function(e,t,n){Qe("onInput");var r=p()(e.target).getSelection(),o=t.findSelection(r);o?t.select(o):t.blur();var a=r.anchorNode;t.reconcileDOMNode(a),n()},onKeyDown:function(e,t,n){Qe("onKeyDown",{event:e});var r=t.value,o=r.document,a=r.selection,i=a.start,s=o.hasVoidParent(i.path,t);if(A.a.isSplitBlock(e)&&!g.f)return s?t.moveToStartOfNextText():t.splitBlock();if(A.a.isDeleteBackward(e)&&!g.f)return t.deleteCharBackward();if(A.a.isDeleteForward(e)&&!g.f)return t.deleteCharForward();if(A.a.isDeleteLineBackward(e))return t.deleteLineBackward();if(A.a.isDeleteLineForward(e))return t.deleteLineForward();if(A.a.isDeleteWordBackward(e))return t.deleteWordBackward();if(A.a.isDeleteWordForward(e))return t.deleteWordForward();if(A.a.isRedo(e))return t.redo();if(A.a.isUndo(e))return t.undo();if(A.a.isMoveLineBackward(e))return e.preventDefault(),t.moveToStartOfBlock();if(A.a.isMoveLineForward(e))return e.preventDefault(),t.moveToEndOfBlock();if(A.a.isExtendLineBackward(e))return e.preventDefault(),t.moveFocusToStartOfBlock();if(A.a.isExtendLineForward(e))return e.preventDefault(),t.moveFocusToEndOfBlock();if(A.a.isMoveBackward(e))return e.preventDefault(),a.isCollapsed?t.moveBackward():t.moveToStart();if(A.a.isMoveForward(e))return e.preventDefault(),a.isCollapsed?t.moveForward():t.moveToEnd();if(A.a.isMoveWordBackward(e))return e.preventDefault(),t.moveWordBackward();if(A.a.isMoveWordForward(e))return e.preventDefault(),t.moveWordForward();if(A.a.isExtendBackward(e)){var c=o.getNode(i.path),u=o.texts({path:i.path,direction:"backward"}),l=Q(u,1)[0],d=!1;if(l){var f=Q(l,2)[1];d=o.hasVoidParent(f,t)}if(s||d||""===c.text)return e.preventDefault(),t.moveFocusBackward()}if(A.a.isExtendForward(e)){var v=o.getNode(i.path),h=o.texts({path:i.path}),p=Q(h,1)[0],y=!1;if(p){var m=Q(p,2)[1];y=o.hasVoidParent(m,t)}if(s||y||""===v.text)return e.preventDefault(),t.moveFocusForward()}n()},onMouseDown:function(e,n,r){Qe("onMouseDown",{event:e}),t=!0,r()},onMouseUp:function(e,n,r){Qe("onMouseUp",{event:e}),t=!1,r()},onPaste:function(e,t,n){Qe("onPaste",{event:e});var r=t.value,o=Ye(e),a=o.type,i=o.fragment,s=o.text;if("fragment"===a&&t.insertFragment(i),"text"===a||"html"===a){if(!s)return n();var c=r.document,u=r.selection,l=r.startBlock;if(t.isVoid(l))return n();var d=l,f=c.getInsertMarksAtRange(u),v=T.a.deserialize(s,{defaultBlock:d,defaultMarks:f}).document;t.insertFragment(v)}n()},onSelect:function(e,n,r){Qe("onSelect",{event:e});var o=p()(e.target).getSelection(),a=n.findSelection(o);a?n.select(a):n.blur(),t=!1,r()}}}var tt=d()("slate:before");function nt(){var e=null,t=!1,n=!1,r=!1,o=!1;return{onBeforeInput:function(e,t,n){var r=!!e.nativeEvent;t.readOnly||(o=!0,r&&g.a||(tt("onBeforeInput",{event:e}),n()))},onBlur:function(t,r,o){if(!n&&!r.readOnly){var a=t.relatedTarget,i=t.target,s=p()(i);if(e!==s.document.activeElement){if(a){var c=r.findDOMNode([]);if(a===c)return;if(a.hasAttribute(K))return;var u=r.findNode(a);if(c.contains(a)&&u&&!r.isVoid(u))return}tt("onBlur",{event:t}),o()}}},onClick:function(e,t,n){tt("onClick",{event:e}),o=!0,n()},onCompositionEnd:function(e,n,r){o=!0,!!e.nativeEvent&&g.a&&n.insertText(e.data),window.requestAnimationFrame((function(){})),setTimeout((function(){t=!1})),tt("onCompositionEnd",{event:e}),r()},onCompositionStart:function(e,n,r){t=!0;var a=n.value.selection;o=!0,a.isCollapsed||n.delete(),tt("onCompositionStart",{event:e}),r()},onCopy:function(e,t,r){var o=p()(e.target);n=!0,o.requestAnimationFrame((function(){return n=!1})),tt("onCopy",{event:e}),r()},onCut:function(e,t,r){if(!t.readOnly){var o=p()(e.target);n=!0,o.requestAnimationFrame((function(){return n=!1})),tt("onCut",{event:e}),r()}},onDragEnd:function(e,t,n){r=!1,tt("onDragEnd",{event:e}),n()},onDragEnter:function(e,t,n){tt("onDragEnter",{event:e}),n()},onDragExit:function(e,t,n){tt("onDragExit",{event:e}),n()},onDragLeave:function(e,t,n){tt("onDragLeave",{event:e}),n()},onDragOver:function(e,t,n){var o=t.findNode(e.target);o&&!t.isVoid(o)||e.preventDefault(),g.e&&e.preventDefault(),r||(r=!0,g.e||(e.nativeEvent.dataTransfer.dropEffect="move")),tt("onDragOver",{event:e}),n()},onDragStart:function(e,t,n){r=!0,tt("onDragStart",{event:e}),n()},onDrop:function(e,t,n){t.readOnly||(o=!0,e.preventDefault(),tt("onDrop",{event:e}),n())},onFocus:function(t,r,o){if(!n&&!r.readOnly){var a=r.findDOMNode([]),i=p()(t.target);e=i.document.activeElement,g.d&&t.target!==a?a.focus():(tt("onFocus",{event:t}),o())}},onInput:function(e,n,r){t||n.value.selection.isBlurred||(o=!0,tt("onInput",{event:e}),r())},onKeyDown:function(e,n,r){n.readOnly||(t?A.a.isCompose(e)&&e.preventDefault():(!g.f&&(A.a.isBold(e)||A.a.isDeleteBackward(e)||A.a.isDeleteForward(e)||A.a.isDeleteLineBackward(e)||A.a.isDeleteLineForward(e)||A.a.isDeleteWordBackward(e)||A.a.isDeleteWordForward(e)||A.a.isItalic(e)||A.a.isRedo(e)||A.a.isSplitBlock(e)||A.a.isTransposeCharacter(e)||A.a.isUndo(e))&&e.preventDefault(),o=!0,tt("onKeyDown",{event:e}),r()))},onPaste:function(e,t,n){t.readOnly||(o=!0,e.preventDefault(),tt("onPaste",{event:e}),n())},onSelect:function(r,a,i){if(!n&&!t&&!a.readOnly){var s=p()(r.target);e=s.document.activeElement,o=!0,tt("onSelect",{event:r}),i()}},queries:{userActionPerformed:function(){return o}},commands:{clearUserActionPerformed:function(){return o=!1,null}}}}function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=void 0===t?[]:t,r=nt(),o=et(),a=g.b?[_e(e),Me()]:[];return[].concat(a,[r],ee(n),[o])}function ot(e){var t=e.nativeEvent||e;switch(t.type){case"keydown":return t.type+" "+JSON.stringify(t.key);case"input":case"beforeinput":case"textInput":return t.type+":"+t.inputType+" "+JSON.stringify(t.data);default:return t.type}}var at=d()("slate:events");function it(){var e={},t=!0,n=!1,r=void 0;try{for(var o,a=B[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){e[o.value]=function(e,t,n){var r=ot(e);at(r),n()}}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return e}var st=d()("slate:batch-events");function ct(){var e=null,t=null,n=[];function r(){st("\n"+n.join("\n")),n.length=0}function o(o){0===n.length&&(e=new Date);var a=ot(o),i=new Date;n.push("- "+(i-e)+" - "+a),clearTimeout(t),t=setTimeout(r,2e3)}var a={},i=!0,s=!1,c=void 0;try{for(var u,l=B[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){a[u.value]=function(e,t,n){o(e),n()}}}catch(e){s=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}return a}var ut=d()("slate:mutations"),lt=["type","oldValue","target","addedNodes","removedNodes","attributeName","attributeNamespace","nextSibling","previousSibling"];function dt(e){if(e.nodeType===window.Node.TEXT_NODE)return e.textContent;if(e.nodeType===window.Node.ELEMENT_NODE){var t=e.outerHTML,n=e.innerHTML;return null==t?JSON.stringify(e.textContent):t.slice(0,t.indexOf(n))}return"Node(type="+e.nodeType}function ft(){var e=new window.MutationObserver((function(e){var t=Array.from(e).map((function(e){var t={};return lt.forEach((function(n){var r=e[n];if(null!=r)if(r instanceof window.NodeList){if(0===r.length)return;t[n]=Array.from(r).map(dt).join(", ")}else r instanceof window.Node&&(r=dt(r)),t[n]=r})),t}));ut.apply(void 0,[t.length+" Mutations"].concat(ee(t)))})),t=null;function n(n,r,o){var a=r.findDOMNode([]);if(a===t)return o();ut("start"),e.observe(a,{childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0}),t=a,o()}return{onComponentDidMount:n,onComponentDidUpdate:n,onComponentWillUnmount:function(n,r,o){ut("stop"),e.disconnect(),t=null,o()}}}function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.placeholder,n=void 0===t?"":t,r=d.a.enabled("slate:events")?it():null,o=d.a.enabled("slate:batch-events")?ct():null,a=d.a.enabled("slate:mutations")?ft():null,i=Ce(),s={commands:{reconcileNode:function(e,t){var n=e.value,r=n.document,o=n.selection,a=r.getPath(t.key),i=e.findDOMNode(a),s=r.getClosestBlock(a),c=t.text,u=i.textContent,l=s.nodes.last()===t,d=u.charAt(u.length-1);if(l&&"\n"===d&&(u=u.slice(0,-1)),c!==u){var f=o.moveAnchorTo(a,0).moveFocusTo(a,c.length);f=r.resolveRange(f),e.insertTextAtRange(f,u,t.marks)}},reconcileDOMNode:function(e,t){var n=t.parentElement.closest("[data-key]"),r=e.findNode(n);e.reconcileNode(r)}}},c=Ee(),u=Ae(e),l=rt(e),f={commands:{restoreDOM:function(e){var t=e.tmp.contentRef.current.tmp;t.contentKey=t.contentKey+1}}},v=g.b?null:Object(F.a)({placeholder:n,when:function(e,t){return"document"===t.object&&""===t.text&&1===t.nodes.size&&1===Array.from(t.texts()).length}});return[r,o,a,u,l,f,v,i,s,c]}var ht=d()("slate:editor"),pt=function(e){function t(){var e,n,r;H(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=$(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={value:r.props.defaultValue,contentKey:0},r.tmp={mounted:!1,change:null,resolves:0,updates:0,contentRef:o.a.createRef()},r.resolveController=Object(P.a)((function(){var e=arguments[5];Object(f.a)(r.tmp.resolves<5||r.tmp.resolves!==r.tmp.updates,"A Slate <Editor> component is re-resolving the `plugins`, `schema`, `commands`, `queries` or `placeholder` prop on each update, which leads to poor performance. This is often due to passing in a new references for these props with each render by declaring them inline in your render function. Do not do this! Declare them outside your render function, or memoize them instead."),r.tmp.resolves++;var t=e(Z({},r.props,{editor:r,value:r.props.value||r.state.value})),n=function(e){r.tmp.mounted?r.handleChange(e):r.tmp.change=e};r.controller=new v.e({plugins:[t],onChange:n},{controller:r,construct:!1}),r.controller.run("onConstruct")})),$(r,n)}return G(t,e),X(t,[{key:"componentDidMount",value:function(){this.tmp.mounted=!0,this.tmp.updates++,this.props.autoFocus&&this.focus(),this.tmp.change&&(this.handleChange(this.tmp.change),this.tmp.change=null)}},{key:"componentDidUpdate",value:function(){this.tmp.updates++,this.tmp.change&&(this.handleChange(this.tmp.change),this.tmp.change=null)}},{key:"componentWillUnmount",value:function(){this.tmp.mounted=!1}},{key:"render",value:function(){var e=this;ht("render",this);var n=this.props,r=n.commands,a=n.placeholder,i=n.plugins,s=n.queries,c=n.schema;this.resolveController(i,c,r,s,a,vt);var u=this.props,l=u.options,d=u.readOnly,f=u.value,v=this.state.value,h=f||v,p=this.state.contentKey;this.controller.setReadOnly(d),this.controller.setValue(h,l);var y=this.props,m=y.autoCorrect,g=y.className,k=y.id,b=y.role,O=y.spellCheck,x=y.tabIndex,A=y.style,C=y.tagName,E=w()(this.props,Object.keys(t.propTypes)),N=o.a.createElement(we,Z({},E,{ref:this.tmp.contentRef,autoCorrect:m,className:g,contentKey:p,editor:this,id:k,onEvent:function(t,n){return e.run(t,n)},readOnly:d,role:b,spellCheck:O,style:A,tabIndex:x,tagName:C}));return this.controller.run("renderEditor",Z({},this.props,{editor:this,children:N}))}},{key:"handleChange",value:function(e){var t=this.props.onChange;this.state.value&&this.setState({value:e.value}),t(e)}},{key:"applyOperation",value:function(){var e;return(e=this.controller).applyOperation.apply(e,arguments)}},{key:"command",value:function(){var e;return(e=this.controller).command.apply(e,arguments)}},{key:"hasCommand",value:function(){var e;return(e=this.controller).hasCommand.apply(e,arguments)}},{key:"hasQuery",value:function(){var e;return(e=this.controller).hasQuery.apply(e,arguments)}},{key:"normalize",value:function(){var e;return(e=this.controller).normalize.apply(e,arguments)}},{key:"query",value:function(){var e;return(e=this.controller).query.apply(e,arguments)}},{key:"registerCommand",value:function(){var e;return(e=this.controller).registerCommand.apply(e,arguments)}},{key:"registerQuery",value:function(){var e;return(e=this.controller).registerQuery.apply(e,arguments)}},{key:"run",value:function(){var e;return(e=this.controller).run.apply(e,arguments)}},{key:"withoutNormalizing",value:function(){var e;return(e=this.controller).withoutNormalizing.apply(e,arguments)}},{key:"call",value:function(){var e;return(e=this.controller).call.apply(e,arguments)}},{key:"change",value:function(){var e;return(e=this.controller).change.apply(e,arguments)}},{key:"onChange",value:function(){var e;return(e=this.controller).onChange.apply(e,arguments)}},{key:"applyOperations",value:function(){var e;return(e=this.controller).applyOperations.apply(e,arguments)}},{key:"setOperationFlag",value:function(){var e;return(e=this.controller).setOperationFlag.apply(e,arguments)}},{key:"getFlag",value:function(){var e;return(e=this.controller).getFlag.apply(e,arguments)}},{key:"unsetOperationFlag",value:function(){var e;return(e=this.controller).unsetOperationFlag.apply(e,arguments)}},{key:"withoutNormalization",value:function(){var e;return(e=this.controller).withoutNormalization.apply(e,arguments)}},{key:"operations",get:function(){return this.controller.operations}},{key:"readOnly",get:function(){return this.controller.readOnly}},{key:"value",get:function(){return this.controller.value}},{key:"editor",get:function(){return this.controller.editor}},{key:"schema",get:function(){Object(S.a)(!1,"As of Slate 0.42, the `editor.schema` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}},{key:"stack",get:function(){Object(S.a)(!1,"As of Slate 0.42, the `editor.stack` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}}]),t}(o.a.Component);pt.propTypes=Z({autoCorrect:i.a.bool,autoFocus:i.a.bool,className:i.a.string,defaultValue:s.a.value,id:i.a.string,onChange:i.a.func,options:i.a.object,placeholder:i.a.any,plugins:i.a.array,readOnly:i.a.bool,role:i.a.string,schema:i.a.object,spellCheck:i.a.bool,style:i.a.object,tabIndex:i.a.number,value:s.a.value},B.reduce((function(e,t){return e[t]=i.a.func,e}),{}),["decorateNode","renderAnnotation","renderBlock","renderDecoration","renderDocument","renderEditor","renderInline","renderMark"].reduce((function(e,t){return e[t]=i.a.func,e}),{})),pt.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:function(){},options:{},placeholder:"",plugins:[],readOnly:!1,schema:{},spellCheck:!0}},1839:function(e,t,n){"use strict";n.d(t,"a",(function(){return He}));var r=n(0),o=n.n(r),a=n(1),i=n.n(a),s=n(1730),c=n(1731),u=n.n(c),l=n(1865),d=n.n(l),f=n(1723),v=n(134),h=n(1732),p=n.n(h),y=n(1733),m=n.n(y),g=n(1351),k=n(491),b=n.n(k),O=n(1722),w=n.n(O),x=n(841),A=n(1734),C=n(6),E=n.n(C),N=n(1735),T=n(1736),S=n(1724),F=n(1737),P=n(1738),j=["onBeforeInput","onBlur","onClick","onContextMenu","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onInput","onFocus","onKeyDown","onKeyUp","onMouseDown","onMouseUp","onPaste","onSelect"],D="data-slate-editor",B="data-slate-fragment",R="data-key",_="data-slate-leaf",M="data-slate-length",L="data-slate-object",I="data-offset-key",z="data-slate-spacer",q="data-slate-string",K="data-slate-void",U="data-slate-zero-width",W={BLOCK:"["+L+'="block"]',EDITOR:"["+D+"]",INLINE:"["+L+'="inline"]',KEY:"["+R+"]",LEAF:"["+_+"]",OBJECT:"["+L+"]",STRING:"["+q+"]",TEXT:"["+L+'="text"]',VOID:"["+K+"]",ZERO_WIDTH:"["+U+"]"},J=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},V=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),H=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Z=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},G=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},$=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},Q=/^([\w-]+)(?::(\d+))?$/;var ee={parse:function(e){var t=Q.exec(e);if(!t)throw new Error('Invalid offset key string "'+e+'".');var n=G(t,3),r=(n[0],n[1]),o=n[2];return{key:r,index:parseInt(o,10)}},stringify:function(e){return e.key+":"+e.index}},te=function(e){var t=e.text,n=void 0===t?"":t,r=e.isTrailing,a=void 0!==r&&r;return o.a.createElement("span",H({},q,!0),n,a?"\n":null)},ne=function(e){var t,n=e.length,r=void 0===n?0:n,a=e.isLineBreak,i=void 0!==a&&a;return o.a.createElement("span",(H(t={},U,i?"n":"z"),H(t,M,r),t),"\ufeff",i?o.a.createElement("br",null):null)},re=function(e){var t,n=e.marks,r=e.annotations,a=e.decorations,i=e.node,s=e.index,c=e.offset,u=e.text,l=e.editor,d=e.parent,f=e.block,v=e.leaves,h=ee.stringify({key:i.key,index:s}),p=void 0;if(l.query("isVoid",d))p=o.a.createElement(ne,{length:d.text.length});else if(""===u&&"block"===d.object&&""===d.text&&d.nodes.last()===i)p=o.a.createElement(ne,{isLineBreak:!0});else if(""===u)p=o.a.createElement(ne,null);else{var y=f.getLastText(),m=u.charAt(u.length-1),g=i===y,k=s===v.size-1;p=g&&k&&"\n"===m?o.a.createElement(te,{isTrailing:!0,text:u}):o.a.createElement(te,{text:u})}var b={editor:l,marks:n,annotations:r,decorations:a,node:i,offset:c,text:u},O=!0,w=!1,x=void 0;try{for(var A,C=n[Symbol.iterator]();!(O=(A=C.next()).done);O=!0){var E=A.value;(q=l.run("renderMark",X({},b,{mark:E,children:p,attributes:H({},L,"mark")})))&&(p=q)}}catch(e){w=!0,x=e}finally{try{!O&&C.return&&C.return()}finally{if(w)throw x}}var N=!0,T=!1,S=void 0;try{for(var F,P=a[Symbol.iterator]();!(N=(F=P.next()).done);N=!0){var j=F.value;(q=l.run("renderDecoration",X({},b,{decoration:j,children:p,attributes:H({},L,"decoration")})))&&(p=q)}}catch(e){T=!0,S=e}finally{try{!N&&P.return&&P.return()}finally{if(T)throw S}}var D=!0,B=!1,R=void 0;try{for(var M,z=r[Symbol.iterator]();!(D=(M=z.next()).done);D=!0){var q,K=M.value;(q=l.run("renderAnnotation",X({},b,{annotation:K,children:p,attributes:H({},L,"annotation")})))&&(p=q)}}catch(e){B=!0,R=e}finally{try{!D&&z.return&&z.return()}finally{if(B)throw R}}var U=(H(t={},_,!0),H(t,I,h),t);return o.a.createElement("span",U,p)};re.propTypes={annotations:u.a.list.isRequired,block:s.a.block.isRequired,decorations:u.a.list.isRequired,editor:i.a.object.isRequired,index:i.a.number.isRequired,leaves:i.a.object.isRequired,marks:s.a.marks.isRequired,node:s.a.node.isRequired,offset:i.a.number.isRequired,parent:s.a.node.isRequired,text:i.a.string.isRequired};var oe=o.a.memo(re,(function(e,t){return t.block===e.block&&t.index===e.index&&t.marks===e.marks&&t.parent===e.parent&&t.text===e.text&&t.annotations.equals(e.annotations)&&t.decorations.equals(e.decorations)})),ae=o.a.forwardRef((function(e,t){var n,r=e.annotations,a=e.block,i=e.decorations,s=e.node,c=e.parent,u=e.editor,l=e.style,d=s.key,f=s.getLeaves(r,i),v=0;return o.a.createElement("span",X({ref:t,style:l},(H(n={},L,s.object),H(n,R,d),n)),f.map((function(e,t){var n=e.text,r=v;return v+=n.length,o.a.createElement(oe,{key:s.key+"-"+t,block:a,editor:u,index:t,annotations:e.annotations,decorations:e.decorations,marks:e.marks,node:s,offset:r,parent:c,leaves:f,text:n})})))}));ae.propTypes={annotations:u.a.map.isRequired,block:s.a.block,decorations:u.a.list.isRequired,editor:i.a.object.isRequired,node:s.a.node.isRequired,parent:s.a.node.isRequired,style:i.a.object};var ie=o.a.memo(ae,(function(e,t){return t.node===e.node&&"block"===t.parent.object&&e.parent.nodes.last()===e.node&&t.parent.nodes.last()!==t.node&&t.annotations.equals(e.annotations)&&t.decorations.equals(e.decorations)})),se=d()("slate:void"),ce=function(e){function t(){var e,n,r;J(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=Z(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),ue.call(r),Z(r,n)}return Y(t,e),V(t,[{key:"render",value:function(){var e,t=this.props,n=t.children,r=t.node,a=t.readOnly,i="block"===r.object?"div":"span",s=H({},z,!0),c=o.a.createElement(i,X({style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},s),this.renderText()),u=o.a.createElement(i,{contentEditable:!!a&&null},n);this.debug("render",{props:t});var l=(H(e={},K,!0),H(e,R,r.key),e);return o.a.createElement(i,X({contentEditable:!(!a&&"block"!==r.object)&&null},l),a?null:c,u)}}]),t}(o.a.Component);ce.propTypes={block:s.a.block,children:i.a.any.isRequired,editor:i.a.object.isRequired,node:s.a.node.isRequired,parent:s.a.node.isRequired,readOnly:i.a.bool.isRequired};var ue=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key,s=a.type,c=i+" ("+s+")";se.apply(void 0,[t,""+c].concat(r))},this.renderText=function(){var t=e.props,n=t.annotations,r=t.block,a=t.decorations,i=t.node,s=t.readOnly,c=t.editor,u=t.textRef,l=i.getFirstText();return o.a.createElement(ie,{ref:u,annotations:n,block:"block"===i.object?i:r,decorations:a,editor:c,key:l.key,node:l,parent:i,readOnly:s})}},le=d()("slate:node"),de=function(e){function t(){var e,n,r;J(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=Z(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),fe.call(r),Z(r,n)}return Y(t,e),V(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.editor.run("shouldNodeComponentUpdate",t,e),r=e,o=t;if(null!=n){if(Object(f.a)(!1,'As of slate-react@0.22 the `shouldNodeComponentUpdate` middleware is deprecated. You can pass specific values down the tree using React\'s built-in "context" construct instead.'),n)return!0;Object(f.a)(!1!==n,"Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return r.readOnly!==o.readOnly||(r.node!==o.node||(!!(!r.selection&&o.selection||r.selection&&!o.selection||r.selection&&o.selection&&!r.selection.equals(o.selection))||(!r.annotations.equals(o.annotations)||!r.decorations.equals(o.decorations))))}},{key:"render",value:function(){var e,n=this;this.debug("render",this);var r=this.props,a=r.annotations,i=r.block,s=r.decorations,c=r.editor,u=r.node,l=r.parent,d=r.readOnly,f=r.selection,v=u.getDecorations(c),h=u.nodes.toArray().map((function(e,r){var l="text"===e.object?ie:t,h=f&&ve(u,r,f),p=v.concat(s).map((function(e){return ve(u,r,e)})).filter((function(e){return e})),y=a.map((function(e){return ve(u,r,e)})).filter((function(e){return e}));return o.a.createElement(l,{block:"block"===u.object?u:i,editor:c,annotations:y,decorations:p,selection:h,key:e.key,node:e,parent:u,readOnly:d,ref:function(e){e?n.tmp.nodeRefs[r]=e:delete n.tmp.nodeRefs[r]}})})),p=(H(e={},L,u.object),H(e,R,u.key),H(e,"ref",this.ref),e);u.isLeafBlock()&&("rtl"===u.getTextDirection()&&(p.dir="rtl"));var y=void 0;"block"===u.object?y="renderBlock":"document"===u.object?y="renderDocument":"inline"===u.object&&(y="renderInline");var m=c.run(y,{attributes:p,children:h,editor:c,isFocused:!!f&&f.isFocused,isSelected:!!f,node:u,parent:l,readOnly:d});return c.isVoid(u)?o.a.createElement(ce,X({},this.props,{textRef:function(e){e?n.tmp.nodeRefs[0]=e:delete n.tmp.nodeRefs[0]}}),m):m}}]),t}(o.a.Component);de.propTypes={annotations:u.a.map.isRequired,block:s.a.block,decorations:u.a.list.isRequired,editor:i.a.object.isRequired,node:s.a.node.isRequired,parent:s.a.node,readOnly:i.a.bool.isRequired,selection:s.a.selection};var fe=function(){var e=this;this.tmp={nodeRefs:{}},this.ref=o.a.createRef(),this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key,s=a.type;le.apply(void 0,[t,i+" ("+s+")"].concat(r))}};function ve(e,t,n){if(n.isUnset)return null;var r=e.nodes.get(t),o=n,a=o.start,i=o.end,s=a.path,c=i.path,u=s.first(),l=c.first();if(u===t)a=a.setPath(s.rest());else if(u<t&&t<=l)if("text"===r.object)a=a.moveTo(v.j.create([t]),0).setKey(r.key);else{var d=r.texts(),f=G(d,1)[0],h=G(f,2),p=h[0],y=h[1];a=a.moveTo(y,0).setKey(p.key)}else a=null;if(l===t)i=i.setPath(c.rest());else if(u<=t&&t<l)if("text"===r.object){var m=r.text.length;i=i.moveTo(v.j.create([t]),m).setKey(r.key)}else{var g=r.texts({direction:"backward"}),k=G(g,1)[0],b=G(k,2),O=b[0],w=b[1];i=i.moveTo(w,O.text.length).setKey(O.key)}else i=null;return a&&i?n=(n=n.setAnchor(a)).setFocus(i):null}var he=["auto","overlay","scroll"],pe=g.f&&!!window.navigator.userAgent.match(/os 11_/i);function ye(e){if(!pe&&e.anchorNode){var t=p()(e.anchorNode),n=function(e,t){for(var n=e.parentNode,r=void 0;!r&&n.parentNode;){var o=t.getComputedStyle(n).overflowY;if(he.includes(o)){r=n;break}n=n.parentNode}return r||t.document.body}(e.anchorNode,t),r=n===t.document.body||n===t.document.documentElement,o=m()(e),a=e.getRangeAt(0).cloneRange();a.collapse(o);var i=a.getBoundingClientRect();g.h&&a.collapsed&&0===i.top&&0===i.height&&(0===a.startOffset?a.setEnd(a.endContainer,1):a.setStart(a.startContainer,a.startOffset-1),0===(i=a.getBoundingClientRect()).top&&0===i.height&&a.getClientRects().length&&(i=a.getClientRects()[0]));var s=void 0,c=void 0,u=void 0,l=void 0,d=0,f=0,v=0,h=0,y=0,k=0,b=0,O=0;if(r){s=t.innerWidth,c=t.innerHeight,u=t.pageYOffset,l=t.pageXOffset}else{var w=n.offsetWidth,x=n.offsetHeight,A=n.scrollTop,C=n.scrollLeft,E=t.getComputedStyle(n),N=E.borderTopWidth,T=E.borderBottomWidth,S=E.borderLeftWidth,F=E.borderRightWidth,P=E.paddingTop,j=E.paddingBottom,D=E.paddingLeft,B=E.paddingRight,R=n.getBoundingClientRect();s=w,c=x,d=R.top+parseInt(N,10),f=R.left+parseInt(S,10),v=parseInt(N,10)+parseInt(T,10),h=parseInt(S,10)+parseInt(F,10),y=parseInt(P,10),k=parseInt(j,10),b=parseInt(D,10),O=parseInt(B,10),u=A,l=C}var _=i.top+u-d,M=i.left+l-f,L=l,I=u;M<l?L=M-b:M+i.width+h>l+s&&(L=M+h+O-s),_<u?I=_-y:_+i.height+v>u+c&&(I=_+v+k+i.height-c),r?t.scrollTo(L,I):(n.scrollTop=I,n.scrollLeft=L)}}function me(e){if(g.e){var t=window.document.body.createTextRange();t.collapse(),t.select()}else e.removeAllRanges()}var ge=/Permission denied to access property "nodeType"/,ke=d()("slate:content");ke.update=d()("slate:update");var be=function(e){function t(){var e,n,r;J(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Z(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.tmp={isUpdatingSelection:!1,nodeRef:o.a.createRef(),nodeRefs:{},contentKey:0,nativeSelection:{}},r.ref=o.a.createRef(),r.setRef=function(e){r.ref.current=e,r.props.editor.el=e},r.handlers=j.reduce((function(e,t){return e[t]=function(e){return r.onEvent(t,e)},e}),{}),r.updateSelection=function(){var e=r.props.editor,t=e.value.selection,n=t.isBackward,o=p()(r.ref.current),a=o.getSelection(),i=o.document.activeElement;if(ke.update.enabled&&ke.update("updateSelection",{selection:t.toJSON()}),a){var s=a.rangeCount,c=a.anchorNode,u=!1;t.isBlurred&&i===r.ref.current&&(r.ref.current.blur(),u=!0);var l=!0,d=!0,v=!1,h=void 0;try{for(var y,m=["anchorNode","anchorOffset","focusNode","focusOffset","isCollapsed","rangeCount","type"][Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var k=y.value;r.tmp.nativeSelection[k]!==a[k]&&(l=!1)}}catch(e){v=!0,h=e}finally{try{!d&&m.return&&m.return()}finally{if(v)throw h}}if(t.isUnset&&s&&r.isInEditor(c)&&l&&(me(a),u=!0),t.isFocused&&i!==r.ref.current&&(r.ref.current.focus({preventScroll:!0}),u=!0),t.isFocused&&t.isSet){var b=!!a.rangeCount&&a.getRangeAt(0),O=e.findDOMRange(t);if(!O)return void Object(f.a)(!1,"Unable to find a native DOM range from the current selection.");var w=O.startContainer,x=O.startOffset,A=O.endContainer,C=O.endOffset;if(b&&(w===b.startContainer&&x===b.startOffset&&A===b.endContainer&&C===b.endOffset||w===b.endContainer&&x===b.endOffset&&A===b.startContainer&&C===b.startOffset))return;u=!0,r.tmp.isUpdatingSelection=!0,me(a),a.setBaseAndExtent?n?a.setBaseAndExtent(O.endContainer,O.endOffset,O.startContainer,O.startOffset):a.setBaseAndExtent(O.startContainer,O.startOffset,O.endContainer,O.endOffset):a.addRange(O),!0===e.userActionPerformed()&&ye(a),setTimeout((function(){g.d&&r.ref.current&&r.ref.current.focus(),r.tmp.isUpdatingSelection=!1,ke.update("updateSelection:setTimeout",{anchorOffset:o.getSelection().anchorOffset})}))}u&&(ke.enabled||ke.update.enabled)&&(ke("updateSelection",{selection:t,native:a,activeElement:i}),ke.update("updateSelection:applied",{selection:t.toJSON(),native:{anchorOffset:a.anchorOffset,focusOffset:a.focusOffset}}))}},r.isInEditor=function(e){var t=void 0;try{if(8===e.nodeType)return!1;t=3===e.nodeType?e.parentNode:e}catch(e){if(g.d&&ge.test(e.message))return!1;throw e}return t.isContentEditable&&(t===r.ref.current||t.closest(W.EDITOR)===r.ref.current)},r.onNativeSelectionChange=b()((function(e){if(!r.props.readOnly){var t=p()(e.target),n=t.document.activeElement,o=t.getSelection();ke.update("onNativeSelectionChange",{anchorOffset:o.anchorOffset}),n===r.ref.current&&(r.tmp.nativeSelection={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset,isCollapsed:o.isCollapsed,rangeCount:o.rangeCount,type:o.type},r.props.onEvent("onSelect",e))}}),100),Z(r,n)}return Y(t,e),V(t,[{key:"componentDidCatch",value:function(e,t){ke("componentDidCatch",{error:e,info:t}),this.setState({})}},{key:"componentDidMount",value:function(){p()(this.ref.current).document.addEventListener("selectionchange",this.onNativeSelectionChange),g.a&&this.ref.current.addEventListener("beforeinput",this.handlers.onBeforeInput),this.updateSelection(),this.props.onEvent("onComponentDidMount")}},{key:"componentWillUnmount",value:function(){var e=p()(this.ref.current);e&&e.document.removeEventListener("selectionchange",this.onNativeSelectionChange),g.a&&this.ref.current.removeEventListener("beforeinput",this.handlers.onBeforeInput),this.props.onEvent("onComponentWillUnmount")}},{key:"componentDidUpdate",value:function(){ke.update("componentDidUpdate"),this.updateSelection(),this.props.editor.clearUserActionPerformed(),this.props.onEvent("onComponentDidUpdate")}},{key:"onEvent",value:function(e,t){ke("onEvent",e);var n=t.nativeEvent||t,r="keydown"===t.type&&(A.a.isUndo(n)||A.a.isRedo(n));if(!this.tmp.isUpdatingSelection&&!r||"onSelect"!==e&&"onBlur"!==e&&"onFocus"!==e){if(!g.b&&"onSelect"===e){var o=this.props.editor,a=o.value.selection,i=p()(t.target).getSelection(),s=o.findRange(i);if(s&&s.equals(a.toRange()))return void this.updateSelection()}if("onDragEnd"===e||"onDragEnter"===e||"onDragExit"===e||"onDragLeave"===e||"onDragOver"===e||"onDragStart"===e||"onDrop"===e)if(t.target.closest(W.EDITOR)!==this.ref.current)return;("onBeforeInput"!==e&&"onBlur"!==e&&"onCompositionEnd"!==e&&"onCompositionStart"!==e&&"onCopy"!==e&&"onCut"!==e&&"onFocus"!==e&&"onInput"!==e&&"onKeyDown"!==e&&"onKeyUp"!==e&&"onPaste"!==e&&"onSelect"!==e||this.isInEditor(t.target))&&this.props.onEvent(e,t)}}},{key:"render",value:function(){var e,n=this.props,r=this.handlers,a=n.id,i=n.className,s=n.readOnly,c=n.editor,u=n.tabIndex,l=n.role,d=n.tagName,f=n.spellCheck,v=c.value,h=d,p=v.document,y=v.selection,m=X({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},s?{}:{WebkitUserModify:"read-write-plaintext-only"},n.style);ke("render",{props:n}),ke.update("render",this.tmp.contentKey,p.text),this.props.onEvent("onRender");var g=(H(e={},D,!0),H(e,R,p.key),e),k=w()(this.props,Object.keys(t.propTypes));return o.a.createElement(h,X({},k,{key:this.tmp.contentKey},r,g,{ref:this.setRef,contentEditable:!s||null,suppressContentEditableWarning:!0,id:a,className:i,autoCorrect:n.autoCorrect?"on":"off",spellCheck:f,style:m,role:s?null:l||"textbox",tabIndex:u,"data-gramm":!!k["data-gramm"]&&void 0}),o.a.createElement(de,{annotations:v.annotations,block:null,decorations:Object(x.List)(),editor:c,node:p,parent:null,readOnly:s,selection:y,ref:this.tmp.nodeRef}))}}]),t}(o.a.Component);be.propTypes={autoCorrect:i.a.bool.isRequired,className:i.a.string,contentKey:i.a.number,editor:i.a.object.isRequired,id:i.a.string,onEvent:i.a.func.isRequired,readOnly:i.a.bool.isRequired,role:i.a.string,spellCheck:i.a.bool.isRequired,style:i.a.object,tabIndex:i.a.number,tagName:i.a.string},be.defaultProps={style:{},tagName:"div"};var Oe=[].concat($(j),["commands","decorateNode","queries","renderAnnotation","renderBlock","renderDecoration","renderDocument","renderEditor","renderInline","renderMark","schema"]);function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Oe.reduce((function(t,n){return n in e&&(t[n]=e[n]),t}),{});return t}function xe(){return{decorateNode:function(){return[]},renderAnnotation:function(e){var t=e.attributes,n=e.children;return o.a.createElement("span",t,n)},renderBlock:function(e){var t=e.attributes,n=e.children;return o.a.createElement("div",X({},t,{style:{position:"relative"}}),n)},renderDecoration:function(e){var t=e.attributes,n=e.children;return o.a.createElement("span",t,n)},renderDocument:function(e){return e.children},renderEditor:function(e){return e.children},renderInline:function(e){var t=e.attributes,n=e.children;return o.a.createElement("span",X({},t,{style:{position:"relative"}}),n)},renderMark:function(e){var t=e.attributes,n=e.children;return o.a.createElement("span",t,n)}}}function Ae(){return{queries:{findDOMNode:function(e,t){t=v.j.create(t);var n=e.tmp.contentRef.current;return n?t.size?function e(t,n){if(!t)return null;if(!n.size)return t.ref?t.ref.current||null:t||null;var r=n.first(),o=n.rest();return e(t.tmp.nodeRefs[r],o)}(n.tmp.nodeRef.current,t):n.ref.current||null:null},findDOMPoint:function(e,t){var n=e.findDOMNode(t.path),r=0;if(!n)return null;var o=Array.from(n.querySelectorAll(W.STRING+", "+W.ZERO_WIDTH)),a=!0,i=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value,d=l.childNodes[0],f=d.textContent.length,v=f;l.hasAttribute(M)&&(v=parseInt(l.getAttribute(M),10));var h=r+v;if(t.offset<=h)return{node:d,offset:Math.min(f,Math.max(0,t.offset-r))};r=h}}catch(e){i=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw s}}return null},findDOMRange:function(e,t){var n=t.anchor,r=t.focus,o=t.isBackward,a=t.isCollapsed,i=e.findDOMPoint(n),s=a?i:e.findDOMPoint(r);if(!i||!s)return null;var c=p()(i.node).document.createRange(),u=o?s:i,l=o?i:s;return c.setStart(u.node,u.offset),c.setEnd(l.node,l.offset),c},findEventRange:function(e,t){t.nativeEvent&&(t=t.nativeEvent);var n=t,r=n.clientX,o=n.clientY,a=n.target;if(null==r||null==o)return null;var i=e.value.document,s=e.findPath(t.target);if(!s)return null;var c=i.getNode(s);if(e.isVoid(c)){var u=a.getBoundingClientRect(),l="inline"===c.object?r-u.left<u.left+u.width-r:o-u.top<u.top+u.height-o,d=i.createRange(),f=l?"moveToEndOfNode":"moveToStartOfNode",v=i[l?"getPreviousText":"getNextText"](s);return v?d[f](v):null}var h=p()(a),y=void 0;if(h.document.caretRangeFromPoint)y=h.document.caretRangeFromPoint(r,o);else if(h.document.caretPositionFromPoint){var m=h.document.caretPositionFromPoint(r,o);(y=h.document.createRange()).setStart(m.offsetNode,m.offset),y.setEnd(m.offsetNode,m.offset)}else if(h.document.body.createTextRange){y=h.document.body.createTextRange();try{y.moveToPoint(r,o)}catch(e){return null}}return e.findRange(y)},findNode:function(e,t){var n=e.findPath(t);return n?e.value.document.getNode(n):null},findPath:function(e,t){var n=e.tmp.contentRef.current,r=t;if(r.hasAttribute(R)||(r=r.closest(W.KEY)),!r||!r.getAttribute(R))return null;if(r===n.ref.current)return v.j.create([]);var o=function e(t,n){if(r===t)return n;if(!t.ref)return null;if(r===t.ref.current)return n;if(!t.tmp)return null;var o=t.tmp.nodeRefs,a=Object.keys(o),i=!0,s=!1,c=void 0;try{for(var u,l=a[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value,f=o[d],v=parseInt(d,10),h=e(f,[].concat($(n),[v]));if(h)return h}}catch(e){s=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}return null}(n.tmp.nodeRef.current,[]);return o?v.j.create(o):null},findPoint:function(e,t,n){var r=function(e,t){if(1===e.nodeType&&e.childNodes.length){var n=t===e.childNodes.length,r=n?"backward":"forward";for(e=Ce(e,n?t-1:t,r);1===e.nodeType&&e.childNodes.length;){var o=n?e.childNodes.length-1:0;e=Ce(e,o,r)}t=n?e.textContent.length:0}return{node:e,offset:t}}(t,n),o=r.node,a=r.offset,i=p()(t),s=o.parentNode,c=s.closest(W.LEAF),u=void 0,l=void 0,d=void 0;if(c){u=c.closest(W.TEXT);var f=i.document.createRange();f.setStart(u,0),f.setEnd(o,a);var v=f.cloneContents(),h=v.querySelectorAll(W.ZERO_WIDTH);Array.from(h).forEach((function(e){e.parentNode.removeChild(e)})),l=v.textContent.length,d=u}else{var y=s.closest(W.VOID);if(!y)return null;if(!(c=y.querySelector(W.LEAF)))return null;u=c.closest(W.TEXT),l=(d=c).textContent.length}l===d.textContent.length&&s.hasAttribute(U)&&l--;var m=e.findPath(u);return m?e.value.document.createPoint({path:m,offset:l}):null},findRange:function(e,t){var n=t.anchorNode||t.startContainer;if(!n)return null;var r=p()(n);(t instanceof r.Range||r.StaticRange&&t instanceof r.StaticRange)&&(t={anchorNode:t.startContainer,anchorOffset:t.startOffset,focusNode:t.endContainer,focusOffset:t.endOffset});var o=t,a=o.anchorNode,i=o.anchorOffset,s=o.focusNode,c=o.focusOffset,u=o.isCollapsed,l=e.value,d=e.findPoint(a,i),f=u?d:e.findPoint(s,c);return d&&f?l.document.createRange({anchor:d,focus:f}):null},findSelection:function(e,t){var n=e.value,r=n.document;if(!t.rangeCount)return null;var o=e.findRange(t);if(!o)return null;var a=o,i=a.anchor,s=a.focus,c=r.getNode(i.path),u=r.getNode(s.path),l=r.getClosestInline(i.path),d=r.getClosestInline(s.path),f=r.getClosestBlock(s.path),h=r.getClosestBlock(i.path);if(h&&!e.isVoid(h)&&0===i.offset&&f&&e.isVoid(f)&&0!==s.offset&&(o=o.setFocus(s.setOffset(0))),l&&!e.isVoid(l)&&i.offset===c.text.length){var p=r.getClosestBlock(i.path),y=r.getDepth(p.key),m=v.j.drop(i.path,y),g=p.texts({path:m}),k=G(g,1)[0];if(k){var b=G(k,2)[1],O=i.path.slice(0,y).concat(b);o=o.moveAnchorTo(O,0)}}if(d&&!e.isVoid(d)&&s.offset===u.text.length){var w=r.getClosestBlock(s.path),x=r.getDepth(w.key),A=v.j.drop(s.path,x),C=w.texts({path:A}),E=G(C,1)[0];if(E){var N=G(E,2)[1],T=s.path.slice(0,x).concat(N);o=o.moveFocusTo(T,0)}}var S=r.createSelection(o);return S=(S=S.setIsFocused(!0)).set("marks",n.selection.marks)}}}}function Ce(e,t,n){for(var r=e.childNodes,o=r[t],a=t,i=!1,s=!1;(8===o.nodeType||1===o.nodeType&&0===o.childNodes.length||1===o.nodeType&&"false"===o.getAttribute("contenteditable"))&&(!i||!s);)a>=r.length?(i=!0,a=t-1,n="backward"):a<0?(s=!0,a=t+1,n="forward"):(o=r[a],"forward"===n&&a++,"backward"===n&&a--);return o||null}function Ee(e,t){if(e===t)return null;var n=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length!==t.length?n:null}(e,t),r=function(e,t,n){for(var r=e.length,o=t.length,a=Math.min(r,o,n),i=0;i<a;i++){if(e.charAt(r-i-1)!==t.charAt(o-i-1))return i}return e.length!==t.length?a:null}(e,t,Math.min(e.length-n,t.length-n));return{start:n,end:r,total:n+r}}function Ne(e,t){return e.slice(t.start,e.length-t.end)}var Te=d()("slate:composition-manager"),Se=String.fromCharCode(65279),Fe=E.a.unstable_flushControlled;function Pe(e,t){Fe((function(){t(),e.controller.flush()}))}function je(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t,o=e,a=0;-1!==a&&-1!==(a=o.indexOf(Se,a));)r>a&&r--,o=""+o.slice(0,a)+o.slice(a+1);var i=o.charAt(o.length-1);n&&"\n"===i&&(o=o.slice(0,-1));var s=o.length;return r>s&&(r=s),{text:o,offset:r}}function De(e){var t=new window.MutationObserver((function(e){var t;Te("flush"),(t=c).push.apply(t,$(e)),d()})),n=null,r={rootEl:null,diff:null,range:null,domNode:null};function o(){Te("clearAction"),r.diff=null,r.domNode=null}function a(){Te("applyDiff");var t=r.diff;if(null!=t){Te("applyDiff:run");var n=e.value.document,o=e.value.selection.moveAnchorTo(t.path,t.start).moveFocusTo(t.path,t.end);o=n.resolveRange(o),e.insertTextAtRange(o,t.insertText)}}function i(){Te("splitBlock"),Pe(e,(function(){a(),r.range?e.select(r.range):Te("splitBlock:NO-SELECTION"),e.splitBlock().focus().restoreDOM(),o()}))}var s=null,c=[],u=null,l=!1;function d(){s&&(window.cancelAnimationFrame(s),s=null),l=!0,u&&window.cancelAnimationFrame(u),u=window.requestAnimationFrame((function(){c.length>0&&function(t){if(Te("flushAction",t.length,t),r.range&&!r.range.isCollapsed)return void Pe(e,(function(){e.select(r.range).deleteBackward().focus().restoreDOM()}));if(t.length>1){if(t.find((function(t){if("childList"!==t.type)return!1;if(0===t.addedNodes.length)return!1;var n=t.addedNodes[0];if(n.nodeType===window.Node.TEXT_NODE&&"\n"===n.textContent)return!0;if(n.nodeType!==window.Node.ELEMENT_NODE)return!1;var r=n.dataset.key;return null!=r&&!!e.value.document.getClosestBlock(r)})))return void i()}var s=t[0];"characterData"===s.type?function(t){Te("resolveDOMNode");var n=e.value.document,o=t.closest("[data-key]").dataset.key,a=n.getPath(o),i=n.getClosestBlock(o),s=n.getDescendant(o),c=s.text,u=i.nodes.last()===s,l=je(t.textContent,0,u).text;if(l===c)return void(r.diff=null);var d=function(e,t){var n=Ee(e,t);if(null==n)return null;var r=Ne(t,n),o=Ne(e,n);return{start:n.start,end:e.length-n.end,cursor:n.start+r.length,insertText:r,removeText:o}}(c,l);r.diff={path:a,start:d.start,end:d.end,insertText:d.insertText},Te("resolveDOMNode:diff",r.diff)}(s.target.parentNode):"childList"===s.type&&(s.removedNodes.length>0?1===t.length?function(t){if(Te("removeNode"),t.nodeType!==window.Node.ELEMENT_NODE)return;var n=e.value,r=n.document,o=n.selection,a=e.findNode(t),i=r.resolveRange(o.moveToRangeOfNode(a));Pe(e,(function(){e.select(i).delete().restoreDOM()}))}(s.removedNodes[0]):(Te("mergeBlock"),n.requestAnimationFrame((function(){Pe(e,(function(){a(),e.select(r.range).deleteBackward().focus().restoreDOM(),o()}))}))):s.addedNodes.length>0&&i())}(c),u=null,c=[],l=!1}))}return{clearDiff:function(){Te("clearDIff"),r.diff=null},connect:function(){Te("connect",{rootEl:o});var o=e.findDOMNode([]);r.rootEl!==o&&(Te("connect:run"),n=p()(o),t.observe(o,{childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0}))},disconnect:function(){Te("disconnect"),t.disconnect(),r.rootEl=null},onKeyDown:d,onCompositionStart:function(){Te("onCompositionStart")},onCompositionEnd:function(){Te("onCompositionEnd"),window.setTimeout((function(){r.diff&&(Te("onCompositionEnd:applyDiff"),Pe(e,(function(){a();var t=n.getSelection().getRangeAt(0),r=je(t.startContainer.textContent,t.startOffset),o=e.findRange({anchorNode:t.startContainer,anchorOffset:0,focusNode:t.startContainer,focusOffset:0,isCollapsed:!0}).moveTo(r.offset);e.select(o).focus().restoreDOM()}))),o()}),20)},onSelect:function(t){Te("onSelect:try"),t=t.nativeEvent?t.nativeEvent:t,window.cancelAnimationFrame(s),s=null,l||(s=window.requestAnimationFrame((function(){Te("onSelect:save-selection");var n,i=p()(t.target).getSelection(),s=e.findRange(i),c=je(i.anchorNode.textContent,i.anchorOffset),u=je(i.focusNode.textContent,i.focusOffset);s.anchor.offset!==c.offset&&(s=s.set("anchor",s.anchor.set("offset",c.offset))),s.focus.offset!==u.offset&&(s=s.set("focus",s.focus.set("offset",u.offset))),Te("onSelect:save-data",{domSelection:(n=i,{anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),range:s.toJS()}),i.isCollapsed&&r.node!==i.anchorNode&&null!=r.diff&&(Te("onSelect:applyDiff",r.diff),a(),e.select(s),o()),r.range=s,r.node=i.anchorNode})))}}}function Be(e){var t=new De(e.editor);return{onComponentDidMount:function(){t.connect()},onComponentDidUpdate:function(){t.connect()},onComponentWillUnmount:function(){t.disconnect()},onCompositionEnd:function(){t.onCompositionEnd()},onCompositionStart:function(){t.onCompositionStart()},onRender:function(){t.disconnect(),t.clearDiff()},onSelect:function(e){!function(e){var t=e.getSelection(),n=t.anchorNode;if(null!=n){var r=n.parentElement.dataset;if(!!r&&"n"===r.slateZeroWidth&&1===n.textContent.length&&0!==t.anchorOffset){var o=e.document.createRange();o.setStart(n,0),o.setEnd(n,0),t.removeAllRanges(),t.addRange(o)}}}(p()(e.target)),t.onSelect(e)}}}function Re(){var e={},t=!0,n=!1,r=void 0;try{for(var o,a=j[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){e[o.value]=function(e,t,n){}}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return e}var _e={FRAGMENT:"application/x-slate-fragment",HTML:"text/html",NODE:"application/x-slate-node",RICH:"text/rtf",TEXT:"text/plain"},Me=_e.FRAGMENT,Le=_e.HTML,Ie=_e.TEXT;function ze(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};Object(S.a)(!v.n.isValue(t),"As of Slate 0.42.0, the `cloneFragment` utility takes an `editor` instead of a `value`.");var r=p()(e.target),o=r.getSelection(),a=t.value,i=a.document,s=a.fragment,c=a.selection,u=c.start,l=c.end,d=i.getClosestVoid(u.path,t),f=i.getClosestVoid(l.path,t);if(!o.isCollapsed||d){var h=N.a.serializeNode(s),y=o.getRangeAt(0),m=y.cloneContents(),k=m.childNodes[0];if(m.childNodes.forEach((function(e){e.textContent&&""!==e.textContent.trim()&&(k=e)})),f){var b=y.cloneRange(),O=i.getPath(f.key);if(O){var w=t.findDOMNode(O);b.setEndAfter(w),m=b.cloneContents()}}if(d&&(k=m.childNodes[0].childNodes[1].firstChild),[].slice.call(m.querySelectorAll(W.ZERO_WIDTH)).forEach((function(e){var t="n"===e.getAttribute(U);e.textContent=t?"\n":""})),3===k.nodeType){var x=r.document.createElement("span");x.style.whiteSpace="pre",x.appendChild(k),m.appendChild(x),k=x}k.setAttribute(B,h);var A=v.n.create({document:s}),C=T.a.serialize(A),E=r.document.createElement("div");if(E.appendChild(m),e.clipboardData&&e.clipboardData.setData&&!g.e)return e.preventDefault(),e.clipboardData.setData(Ie,C),e.clipboardData.setData(Me,h),e.clipboardData.setData(Le,E.innerHTML),void n();var F=e.target.closest(W.EDITOR);E.setAttribute("contenteditable",!0),E.style.position="absolute",E.style.left="-9999px",F.appendChild(E),o.selectAllChildren(E),r.requestAnimationFrame((function(){F.removeChild(E),me(o),o.addRange(y),n()}))}}var qe=_e.FRAGMENT,Ke=_e.HTML,Ue=_e.NODE,We=_e.RICH,Je=_e.TEXT,Ve=/ data-slate-fragment="([^\s"]+)"/;function He(e){!g.e&&e.nativeEvent&&(e=e.nativeEvent);var t=e.dataTransfer||e.clipboardData,n=Xe(t,qe),r=Xe(t,Ue),o=Xe(t,Ke),a=Xe(t,We),i=Xe(t,Je),s=void 0;if(!n&&o&&~o.indexOf(" "+B+'="')){var c=Ve.exec(o),u=G(c,2),l=(u[0],u[1]);l&&(n=l)}if(i){var d=function(e){var t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!==t)return{TEXT:e};try{return JSON.parse(e.substring(t.length))}catch(e){throw new Error("Unable to parse custom Slate drag event data.")}}(i);d[qe]&&(n=d[qe]),d[Ue]&&(r=d[Ue]),d[Je]&&(i=d[Je])}n&&(n=N.a.deserializeNode(n)),r&&(r=N.a.deserializeNode(r));try{t.items&&t.items.length?s=Array.from(t.items).map((function(e){return"file"===e.kind?e.getAsFile():null})).filter((function(e){return e})):t.files&&t.files.length&&(s=Array.from(t.files))}catch(e){t.files&&t.files.length&&(s=Array.from(t.files))}var f={files:s,fragment:n,html:o,node:r,rich:a,text:i};return f.type=function(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}(f),f}function Xe(e,t){return e.types&&e.types.length?-1!==Array.from(e.types).indexOf(t)&&e.getData(t)||null:t===Je&&e.getData("Text")||null}var Ye=_e.TEXT;function Ze(e,t,n){var r=_e[t.toUpperCase()];if(!r)throw new Error('Cannot set unknown transfer type "'+r+'".');e.nativeEvent&&(e=e.nativeEvent);var o=e.dataTransfer||e.clipboardData;try{o.setData(r,n),o.setData("text",o.getData("text"))}catch(e){var a="SLATE-DATA-EMBED::",i=o.getData(Ye),s={};if(i.substring(0,a.length)===a)try{s=JSON.parse(i.substring(a.length))}catch(e){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else s[Ye]=i;s[r]=n;var c=""+a+JSON.stringify(s);o.setData(Ye,c)}}var Ge=d()("slate:after");function $e(){var e=null,t=!1;return{onBeforeInput:function(e,t,n){var r=t.value;if(!!e.nativeEvent)return e.preventDefault(),t.insertText(e.data),n();var o=e.getTargetRanges(),a=G(o,1)[0];if(!a)return n();Ge("onBeforeInput",{event:e}),e.preventDefault();var i=r.document,s=r.selection,c=t.findRange(a);switch(e.inputType){case"deleteByDrag":case"deleteByCut":case"deleteContent":case"deleteContentBackward":case"deleteContentForward":t.deleteAtRange(c);break;case"deleteWordBackward":t.deleteWordBackwardAtRange(c);break;case"deleteWordForward":t.deleteWordForwardAtRange(c);break;case"deleteSoftLineBackward":case"deleteHardLineBackward":t.deleteLineBackwardAtRange(c);break;case"deleteSoftLineForward":case"deleteHardLineForward":t.deleteLineForwardAtRange(c);break;case"insertLineBreak":case"insertParagraph":i.hasVoidParent(s.start.path,t)?t.moveToStartOfNextText():t.splitBlockAtRange(c);break;case"insertFromYank":case"insertReplacementText":case"insertText":var u=null==e.data?e.dataTransfer.getData("text/plain"):e.data;if(null==u)break;t.insertTextAtRange(c,u,s.marks),s.marks&&r.document!==t.value.document&&t.select({marks:null})}n()},onBlur:function(e,t,n){Ge("onBlur",{event:e}),t.blur(),n()},onClick:function(e,t,n){if(t.readOnly)return n();var r=t.value.document,o=t.findPath(e.target);if(!o)return n();Ge("onClick",{event:e});var a=r.getNode(o),i=r.getAncestors(o);a&&(t.isVoid(a)||i.some((function(e){return t.isVoid(e)})))&&t.focus().moveToEndOfNode(a),n()},onCopy:function(e,t,n){Ge("onCopy",{event:e}),ze(e,t),n()},onCut:function(e,t,n){Ge("onCut",{event:e}),ze(e,t,(function(){var e=t.value,n=e.document,r=e.selection,o=r.end,a=void 0;if(r.isCollapsed){var i=!0,s=!1,c=void 0;try{for(var u,l=n.ancestors(o.path)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value,f=G(d,2),v=f[0],h=f[1];if(t.isVoid(v)){a=h;break}}}catch(e){s=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}}a?t.removeNodeByKey(a):t.delete()})),n()},onDragEnd:function(t,n,r){Ge("onDragEnd",{event:t}),e=null,r()},onDragStart:function(t,n,r){Ge("onDragStart",{event:t}),e=!0;var o=n.value,a=o.document,i=n.findPath(t.target),s=a.getNode(i),c=a.getAncestors(i),u=s&&(n.isVoid(s)||c.some((function(e){return n.isVoid(e)}))),l=o.blocks.some((function(e){return e===s}));u&&!l&&n.moveToRangeOfNode(s);var d=n.value.fragment;Ze(t,"fragment",N.a.serializeNode(d)),r()},onDrop:function(t,n,r){var o=n.value,a=o.document,i=o.selection,s=p()(t.target),c=n.findEventRange(t);if(!c)return r();Ge("onDrop",{event:t});var u=He(t),l=u.type,d=u.fragment,f=u.text;n.focus();var v=n.findDOMNode(c.focus.path);v&&v.dispatchEvent(new MouseEvent("mouseup",{view:s,bubbles:!0,cancelable:!0}));var h=i;if(n.select(c),e&&n.deleteAtRange(h),"text"===l||"html"===l){var y=c.anchor,m=a.hasVoidParent(y.path,n);if(m){for(var g=y.path,k=a.getNode(y.path);m;){var b=a.texts({path:g}),O=G(b,1)[0];if(!O)break;var w=G(O,2);k=w[0],g=w[1],m=a.hasVoidParent(g,n)}k&&n.moveToStartOfNode(k)}f&&f.split("\n").forEach((function(e,t){t>0&&n.splitBlock(),n.insertText(e)}))}"fragment"===l&&n.insertFragment(d),r()},onFocus:function(e,n,r){Ge("onFocus",{event:e}),!t||g.e||g.c?n.focus():n.deselect().focus(),r()},onInput:function(e,t,n){Ge("onInput");var r=p()(e.target).getSelection(),o=t.findSelection(r);o?t.select(o):t.blur();var a=r.anchorNode;t.reconcileDOMNode(a),n()},onKeyDown:function(e,t,n){Ge("onKeyDown",{event:e});var r=t.value,o=r.document,a=r.selection,i=a.start,s=o.hasVoidParent(i.path,t);if(A.a.isSplitBlock(e)&&!g.f)return s?t.moveToStartOfNextText():t.splitBlock();if(A.a.isDeleteBackward(e)&&!g.f)return t.deleteCharBackward();if(A.a.isDeleteForward(e)&&!g.f)return t.deleteCharForward();if(A.a.isDeleteLineBackward(e))return t.deleteLineBackward();if(A.a.isDeleteLineForward(e))return t.deleteLineForward();if(A.a.isDeleteWordBackward(e))return t.deleteWordBackward();if(A.a.isDeleteWordForward(e))return t.deleteWordForward();if(A.a.isRedo(e))return t.redo();if(A.a.isUndo(e))return t.undo();if(A.a.isMoveLineBackward(e))return e.preventDefault(),t.moveToStartOfBlock();if(A.a.isMoveLineForward(e))return e.preventDefault(),t.moveToEndOfBlock();if(A.a.isExtendLineBackward(e))return e.preventDefault(),t.moveFocusToStartOfBlock();if(A.a.isExtendLineForward(e))return e.preventDefault(),t.moveFocusToEndOfBlock();if(A.a.isMoveBackward(e))return e.preventDefault(),a.isCollapsed?t.moveBackward():t.moveToStart();if(A.a.isMoveForward(e))return e.preventDefault(),a.isCollapsed?t.moveForward():t.moveToEnd();if(A.a.isMoveWordBackward(e))return e.preventDefault(),t.moveWordBackward();if(A.a.isMoveWordForward(e))return e.preventDefault(),t.moveWordForward();if(A.a.isExtendBackward(e)){var c=o.getNode(i.path),u=o.texts({path:i.path,direction:"backward"}),l=G(u,1)[0],d=!1;if(l){var f=G(l,2)[1];d=o.hasVoidParent(f,t)}if(s||d||""===c.text)return e.preventDefault(),t.moveFocusBackward()}if(A.a.isExtendForward(e)){var v=o.getNode(i.path),h=o.texts({path:i.path}),p=G(h,1)[0],y=!1;if(p){var m=G(p,2)[1];y=o.hasVoidParent(m,t)}if(s||y||""===v.text)return e.preventDefault(),t.moveFocusForward()}n()},onMouseDown:function(e,n,r){Ge("onMouseDown",{event:e}),t=!0,r()},onMouseUp:function(e,n,r){Ge("onMouseUp",{event:e}),t=!1,r()},onPaste:function(e,t,n){Ge("onPaste",{event:e});var r=t.value,o=He(e),a=o.type,i=o.fragment,s=o.text;if("fragment"===a&&t.insertFragment(i),"text"===a||"html"===a){if(!s)return n();var c=r.document,u=r.selection,l=r.startBlock;if(t.isVoid(l))return n();var d=l,f=c.getInsertMarksAtRange(u),v=T.a.deserialize(s,{defaultBlock:d,defaultMarks:f}).document;t.insertFragment(v)}n()},onSelect:function(e,n,r){Ge("onSelect",{event:e});var o=p()(e.target).getSelection(),a=n.findSelection(o);a?n.select(a):n.blur(),t=!1,r()}}}var Qe=d()("slate:before");function et(){var e=null,t=0,n=!1,r=!1,o=!1,a=!1;return{onBeforeInput:function(e,t,n){var r=!!e.nativeEvent;t.readOnly||(a=!0,r&&g.a||(Qe("onBeforeInput",{event:e}),n()))},onBlur:function(t,n,o){if(!r&&!n.readOnly){var a=t.relatedTarget,i=t.target,s=p()(i);if(e!==s.document.activeElement){if(a){var c=n.findDOMNode([]);if(a===c)return;if(a.hasAttribute(z))return;var u=n.findNode(a);if(c.contains(a)&&u&&!n.isVoid(u))return}Qe("onBlur",{event:t}),o()}}},onClick:function(e,t,n){Qe("onClick",{event:e}),a=!0,n()},onCompositionEnd:function(e,r,o){var i=t;a=!0,window.requestAnimationFrame((function(){t>i||(n=!1)})),Qe("onCompositionEnd",{event:e}),o()},onCompositionStart:function(e,r,o){n=!0,t++;var i=r.value.selection;a=!0,i.isCollapsed||r.delete(),Qe("onCompositionStart",{event:e}),o()},onCopy:function(e,t,n){var o=p()(e.target);r=!0,o.requestAnimationFrame((function(){return r=!1})),Qe("onCopy",{event:e}),n()},onCut:function(e,t,n){if(!t.readOnly){var o=p()(e.target);r=!0,o.requestAnimationFrame((function(){return r=!1})),Qe("onCut",{event:e}),n()}},onDragEnd:function(e,t,n){o=!1,Qe("onDragEnd",{event:e}),n()},onDragEnter:function(e,t,n){Qe("onDragEnter",{event:e}),n()},onDragExit:function(e,t,n){Qe("onDragExit",{event:e}),n()},onDragLeave:function(e,t,n){Qe("onDragLeave",{event:e}),n()},onDragOver:function(e,t,n){var r=t.findNode(e.target);r&&!t.isVoid(r)||e.preventDefault(),g.e&&e.preventDefault(),o||(o=!0,g.e||(e.nativeEvent.dataTransfer.dropEffect="move")),Qe("onDragOver",{event:e}),n()},onDragStart:function(e,t,n){o=!0,Qe("onDragStart",{event:e}),n()},onDrop:function(e,t,n){t.readOnly||(a=!0,e.preventDefault(),Qe("onDrop",{event:e}),n())},onFocus:function(t,n,o){if(!r&&!n.readOnly){var a=n.findDOMNode([]),i=p()(t.target);e=i.document.activeElement,g.d&&t.target!==a?a.focus():(Qe("onFocus",{event:t}),o())}},onInput:function(e,t,r){n||t.value.selection.isBlurred||(a=!0,Qe("onInput",{event:e}),r())},onKeyDown:function(e,t,r){t.readOnly||(n?A.a.isCompose(e)&&e.preventDefault():(!g.f&&(A.a.isBold(e)||A.a.isDeleteBackward(e)||A.a.isDeleteForward(e)||A.a.isDeleteLineBackward(e)||A.a.isDeleteLineForward(e)||A.a.isDeleteWordBackward(e)||A.a.isDeleteWordForward(e)||A.a.isItalic(e)||A.a.isRedo(e)||A.a.isSplitBlock(e)||A.a.isTransposeCharacter(e)||A.a.isUndo(e))&&e.preventDefault(),a=!0,Qe("onKeyDown",{event:e}),r()))},onPaste:function(e,t,n){t.readOnly||(a=!0,e.preventDefault(),Qe("onPaste",{event:e}),n())},onSelect:function(t,o,i){if(!r&&!n&&!o.readOnly){var s=p()(t.target);e=s.document.activeElement,a=!0,Qe("onSelect",{event:t}),i()}},queries:{userActionPerformed:function(){return a}},commands:{clearUserActionPerformed:function(){return a=!1,null}}}}function tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=void 0===t?[]:t,r=et(),o=$e(),a=g.b?[Be(e),Re()]:[];return[].concat(a,[r],$(n),[o])}function nt(e){var t=e.nativeEvent||e;switch(t.type){case"keydown":return t.type+" "+JSON.stringify(t.key);case"input":case"beforeinput":case"textInput":return t.type+":"+t.inputType+" "+JSON.stringify(t.data);default:return t.type}}var rt=d()("slate:events");function ot(){var e={},t=!0,n=!1,r=void 0;try{for(var o,a=j[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){e[o.value]=function(e,t,n){var r=nt(e);rt(r),n()}}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return e}var at=d()("slate:batch-events");function it(){var e=null,t=null,n=[];function r(){at("\n"+n.join("\n")),n.length=0}function o(o){0===n.length&&(e=new Date);var a=nt(o),i=new Date;n.push("- "+(i-e)+" - "+a),clearTimeout(t),t=setTimeout(r,2e3)}var a={},i=!0,s=!1,c=void 0;try{for(var u,l=j[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){a[u.value]=function(e,t,n){o(e),n()}}}catch(e){s=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}return a}var st=d()("slate:mutations"),ct=["type","oldValue","target","addedNodes","removedNodes","attributeName","attributeNamespace","nextSibling","previousSibling"];function ut(e){if(e.nodeType===window.Node.TEXT_NODE)return e.textContent;if(e.nodeType===window.Node.ELEMENT_NODE){var t=e.outerHTML,n=e.innerHTML;return null==t?JSON.stringify(e.textContent):t.slice(0,t.indexOf(n))}return"Node(type="+e.nodeType}function lt(){var e=new window.MutationObserver((function(e){var t=Array.from(e).map((function(e){var t={};return ct.forEach((function(n){var r=e[n];if(null!=r)if(r instanceof window.NodeList){if(0===r.length)return;t[n]=Array.from(r).map(ut).join(", ")}else r instanceof window.Node&&(r=ut(r)),t[n]=r})),t}));st.apply(void 0,[t.length+" Mutations"].concat($(t)))})),t=null;function n(n,r,o){var a=r.findDOMNode([]);if(a===t)return o();st("start"),e.observe(a,{childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0}),t=a,o()}return{onComponentDidMount:n,onComponentDidUpdate:n,onComponentWillUnmount:function(n,r,o){st("stop"),e.disconnect(),t=null,o()}}}function dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.placeholder,n=void 0===t?"":t,r=d.a.enabled("slate:events")?ot():null,o=d.a.enabled("slate:batch-events")?it():null,a=d.a.enabled("slate:mutations")?lt():null,i=xe(),s={commands:{reconcileNode:function(e,t){var n=e.value,r=n.document,o=n.selection,a=r.getPath(t.key),i=e.findDOMNode(a),s=r.getClosestBlock(a),c=t.text,u=i.textContent,l=s.nodes.last()===t,d=u.charAt(u.length-1);if(l&&"\n"===d&&(u=u.slice(0,-1)),c!==u){var f=o.moveAnchorTo(a,0).moveFocusTo(a,c.length);f=r.resolveRange(f),e.insertTextAtRange(f,u,t.marks)}},reconcileDOMNode:function(e,t){var n=t.parentElement.closest("[data-key]"),r=e.findNode(n);e.reconcileNode(r)}}},c=Ae(),u=we(e),l=tt(e),f={commands:{restoreDOM:function(e){var t=e.tmp.contentRef.current.tmp;t.contentKey=t.contentKey+1}}},v=g.b?null:Object(F.a)({placeholder:n,when:function(e,t){return"document"===t.object&&""===t.text&&1===t.nodes.size&&1===Array.from(t.texts()).length}});return[r,o,a,u,l,f,v,i,s,c]}var ft=d()("slate:editor"),vt=function(e){function t(){var e,n,r;J(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Z(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={value:r.props.defaultValue,contentKey:0},r.tmp={mounted:!1,change:null,resolves:0,updates:0,contentRef:o.a.createRef()},r.resolveController=Object(P.a)((function(){var e=arguments[5];Object(f.a)(r.tmp.resolves<5||r.tmp.resolves!==r.tmp.updates,"A Slate <Editor> component is re-resolving the `plugins`, `schema`, `commands`, `queries` or `placeholder` prop on each update, which leads to poor performance. This is often due to passing in a new references for these props with each render by declaring them inline in your render function. Do not do this! Declare them outside your render function, or memoize them instead."),r.tmp.resolves++;var t=e(X({},r.props,{editor:r,value:r.props.value||r.state.value})),n=function(e){r.tmp.mounted?r.handleChange(e):r.tmp.change=e};r.controller=new v.e({plugins:[t],onChange:n},{controller:r,construct:!1}),r.controller.run("onConstruct")})),Z(r,n)}return Y(t,e),V(t,[{key:"componentDidMount",value:function(){this.tmp.mounted=!0,this.tmp.updates++,this.props.autoFocus&&this.focus(),this.tmp.change&&(this.handleChange(this.tmp.change),this.tmp.change=null)}},{key:"componentDidUpdate",value:function(){this.tmp.updates++,this.tmp.change&&(this.handleChange(this.tmp.change),this.tmp.change=null)}},{key:"componentWillUnmount",value:function(){this.tmp.mounted=!1}},{key:"render",value:function(){var e=this;ft("render",this);var n=this.props,r=n.commands,a=n.placeholder,i=n.plugins,s=n.queries,c=n.schema;this.resolveController(i,c,r,s,a,dt);var u=this.props,l=u.options,d=u.readOnly,f=u.value,v=this.state.value,h=f||v,p=this.state.contentKey;this.controller.setReadOnly(d),this.controller.setValue(h,l);var y=this.props,m=y.autoCorrect,g=y.className,k=y.id,b=y.role,O=y.spellCheck,x=y.tabIndex,A=y.style,C=y.tagName,E=w()(this.props,Object.keys(t.propTypes)),N=o.a.createElement(be,X({},E,{ref:this.tmp.contentRef,autoCorrect:m,className:g,contentKey:p,editor:this,id:k,onEvent:function(t,n){return e.run(t,n)},readOnly:d,role:b,spellCheck:O,style:A,tabIndex:x,tagName:C}));return this.controller.run("renderEditor",X({},this.props,{editor:this,children:N}))}},{key:"handleChange",value:function(e){var t=this.props.onChange;this.state.value&&this.setState({value:e.value}),t(e)}},{key:"applyOperation",value:function(){var e;return(e=this.controller).applyOperation.apply(e,arguments)}},{key:"command",value:function(){var e;return(e=this.controller).command.apply(e,arguments)}},{key:"hasCommand",value:function(){var e;return(e=this.controller).hasCommand.apply(e,arguments)}},{key:"hasQuery",value:function(){var e;return(e=this.controller).hasQuery.apply(e,arguments)}},{key:"normalize",value:function(){var e;return(e=this.controller).normalize.apply(e,arguments)}},{key:"query",value:function(){var e;return(e=this.controller).query.apply(e,arguments)}},{key:"registerCommand",value:function(){var e;return(e=this.controller).registerCommand.apply(e,arguments)}},{key:"registerQuery",value:function(){var e;return(e=this.controller).registerQuery.apply(e,arguments)}},{key:"run",value:function(){var e;return(e=this.controller).run.apply(e,arguments)}},{key:"withoutNormalizing",value:function(){var e;return(e=this.controller).withoutNormalizing.apply(e,arguments)}},{key:"call",value:function(){var e;return(e=this.controller).call.apply(e,arguments)}},{key:"change",value:function(){var e;return(e=this.controller).change.apply(e,arguments)}},{key:"onChange",value:function(){var e;return(e=this.controller).onChange.apply(e,arguments)}},{key:"applyOperations",value:function(){var e;return(e=this.controller).applyOperations.apply(e,arguments)}},{key:"setOperationFlag",value:function(){var e;return(e=this.controller).setOperationFlag.apply(e,arguments)}},{key:"getFlag",value:function(){var e;return(e=this.controller).getFlag.apply(e,arguments)}},{key:"unsetOperationFlag",value:function(){var e;return(e=this.controller).unsetOperationFlag.apply(e,arguments)}},{key:"withoutNormalization",value:function(){var e;return(e=this.controller).withoutNormalization.apply(e,arguments)}},{key:"operations",get:function(){return this.controller.operations}},{key:"readOnly",get:function(){return this.controller.readOnly}},{key:"value",get:function(){return this.controller.value}},{key:"editor",get:function(){return this.controller.editor}},{key:"schema",get:function(){Object(S.a)(!1,"As of Slate 0.42, the `editor.schema` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}},{key:"stack",get:function(){Object(S.a)(!1,"As of Slate 0.42, the `editor.stack` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}}]),t}(o.a.Component);vt.propTypes=X({autoCorrect:i.a.bool,autoFocus:i.a.bool,className:i.a.string,defaultValue:s.a.value,id:i.a.string,onChange:i.a.func,options:i.a.object,placeholder:i.a.any,plugins:i.a.array,readOnly:i.a.bool,role:i.a.string,schema:i.a.object,spellCheck:i.a.bool,style:i.a.object,tabIndex:i.a.number,value:s.a.value},j.reduce((function(e,t){return e[t]=i.a.func,e}),{}),["decorateNode","renderAnnotation","renderBlock","renderDecoration","renderDocument","renderEditor","renderInline","renderMark"].reduce((function(e,t){return e[t]=i.a.func,e}),{})),vt.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:function(){},options:{},placeholder:"",plugins:[],readOnly:!1,schema:{},spellCheck:!0}},1860:function(e,t,n){"use strict";(function(r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(1861)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(148))},1861:function(e,t,n){"use strict";e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var n;function i(){if(i.enabled){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a=i,s=Number(new Date),c=s-(n||s);a.diff=c,a.prev=n,a.curr=s,n=s,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;u++;var o=r.formatters[n];if("function"==typeof o){var i=t[u];e=o.call(a,i),t.splice(u,1),u--}return e})),r.formatArgs.call(a,t);var l=a.log||r.log;l.apply(a,t)}}return i.namespace=e,i.enabled=r.enabled(e),i.useColors=r.useColors(),i.color=t(e),i.destroy=o,i.extend=a,"function"==typeof r.init&&r.init(i),r.instances.push(i),i}function o(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function a(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var a=r.instances[t];a.enabled=r.enabled(a.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(1721),Object.keys(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},1863:function(e,t,n){"use strict";(function(r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(1864)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(148))},1864:function(e,t,n){"use strict";e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var n;function i(){if(i.enabled){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a=i,s=Number(new Date),c=s-(n||s);a.diff=c,a.prev=n,a.curr=s,n=s,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;u++;var o=r.formatters[n];if("function"==typeof o){var i=t[u];e=o.call(a,i),t.splice(u,1),u--}return e})),r.formatArgs.call(a,t);var l=a.log||r.log;l.apply(a,t)}}return i.namespace=e,i.enabled=r.enabled(e),i.useColors=r.useColors(),i.color=t(e),i.destroy=o,i.extend=a,"function"==typeof r.init&&r.init(i),r.instances.push(i),i}function o(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function a(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var a=r.instances[t];a.enabled=r.enabled(a.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(1721),Object.keys(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},1865:function(e,t,n){"use strict";(function(r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(1866)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(148))},1866:function(e,t,n){"use strict";e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var n;function i(){if(i.enabled){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a=i,s=Number(new Date),c=s-(n||s);a.diff=c,a.prev=n,a.curr=s,n=s,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;u++;var o=r.formatters[n];if("function"==typeof o){var i=t[u];e=o.call(a,i),t.splice(u,1),u--}return e})),r.formatArgs.call(a,t);var l=a.log||r.log;l.apply(a,t)}}return i.namespace=e,i.enabled=r.enabled(e),i.useColors=r.useColors(),i.color=t(e),i.destroy=o,i.extend=a,"function"==typeof r.init&&r.init(i),r.instances.push(i),i}function o(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function a(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var a=r.instances[t];a.enabled=r.enabled(a.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(1721),Object.keys(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return $e})),n.d(t,"b",(function(){return Re})),n.d(t,"c",(function(){return Xe})),n.d(t,"d",(function(){return He})),n.d(t,"e",(function(){return Q})),n.d(t,"f",(function(){return pe})),n.d(t,"g",(function(){return oe})),n.d(t,"h",(function(){return Ge}));var r=n(0),o=n.n(r),a=n(11),i=n(1747),s=n.n(i),c=n(491),u=n.n(c),l=n(1761),d=n(1748),f=n(1749),v=n(6),h=n.n(v);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=e=>{var{isLast:t,leaf:n,parent:r,text:i}=e,s=oe(),c=Re.findPath(s,i),u=a.e.parent(c);return s.isVoid(r)?o.a.createElement(k,{length:a.c.string(r).length}):""!==n.text||r.children[r.children.length-1]!==i||s.isInline(r)||""!==a.a.string(s,u)?""===n.text?o.a.createElement(k,null):t&&"\n"===n.text.slice(-1)?o.a.createElement(g,{isTrailing:!0,text:n.text}):o.a.createElement(g,{text:n.text}):o.a.createElement(k,{isLineBreak:!0})},g=e=>{var{text:t,isTrailing:n=!1}=e;return o.a.createElement("span",{"data-slate-string":!0},t,n?"\n":null)},k=e=>{var{length:t=0,isLineBreak:n=!1}=e;return o.a.createElement("span",{"data-slate-zero-width":n?"n":"z","data-slate-length":t},"\ufeff",n?o.a.createElement("br",null):null)},b=new WeakMap,O=new WeakMap,w=new WeakMap,x=new WeakMap,A=new WeakMap,C=new WeakMap,E=new WeakMap,N=new WeakMap,T=new WeakMap,S=new WeakMap,F=new WeakMap,P=new WeakMap,j=Symbol("placeholder"),D=0,B=e=>{var{leaf:t,isLast:n,text:a,parent:i,renderPlaceholder:s,renderLeaf:c=(e=>o.a.createElement(_,Object.assign({},e)))}=e,u=Object(r.useRef)(null);Object(r.useEffect)(()=>{var e=null==u?void 0:u.current,t=document.querySelector('[data-slate-editor="true"]');if(e&&t)return t.style.minHeight="".concat(e.clientHeight,"px"),()=>{t.style.minHeight="auto"}},[u,t]);var l=o.a.createElement(m,{key:D++,isLast:n,leaf:t,parent:i,text:a});if(t[j]){var d={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:u}};l=o.a.createElement(o.a.Fragment,null,s(d),l)}return c({attributes:{"data-slate-leaf":!0},children:l,leaf:t,text:a})},R=o.a.memo(B,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&t.leaf.text===e.leaf.text&&a.i.matches(t.leaf,e.leaf)&&t.leaf[j]===e.leaf[j]),_=e=>{var{attributes:t,children:n}=e;return o.a.createElement("span",Object.assign({},t),n)},M=("undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,"undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent)),L="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),I="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),z="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),q="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),K="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),U="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),W="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),J=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),V=!U&&!q&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,H=J?r.useLayoutEffect:r.useEffect,X=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(n=>t.hasOwnProperty(n)&&e[n]===t[n]),Y=(e,t)=>{if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],o=t[n],i=y(r,["anchor","focus"]),s=y(o,["anchor","focus"]);if(!a.g.equals(r,o)||r[j]!==o[j]||!X(i,s))return!1}return!0},Z=e=>{for(var{decorations:t,isLast:n,parent:i,renderPlaceholder:s,renderLeaf:c,text:u}=e,l=oe(),d=Object(r.useRef)(null),f=a.i.decorations(u,t),v=Re.findKey(l,u),h=[],p=0;p<f.length;p++){var y=f[p];h.push(o.a.createElement(R,{isLast:n&&p===f.length-1,key:"".concat(v.id,"-").concat(p),renderPlaceholder:s,leaf:y,text:u,parent:i,renderLeaf:c}))}return H(()=>{d.current?(C.set(v,d.current),E.set(u,d.current),A.set(d.current,u)):(C.delete(v),E.delete(u))}),o.a.createElement("span",{"data-slate-node":"text",ref:d},h)},G=o.a.memo(Z,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text&&Y(t.decorations,e.decorations)),$=Object(r.createContext)(!1),Q=()=>Object(r.useContext)($),ee=e=>{var{decorations:t,element:n,renderElement:i=(e=>o.a.createElement(ne,Object.assign({},e))),renderPlaceholder:c,renderLeaf:u,selection:l}=e,d=Object(r.useRef)(null),f=oe(),v=ve(),h=f.isInline(n),p=Re.findKey(f,n),y=ie({decorations:t,node:n,renderElement:i,renderPlaceholder:c,renderLeaf:u,selection:l}),m={"data-slate-node":"element",ref:d};if(h&&(m["data-slate-inline"]=!0),!h&&a.a.hasInlines(f,n)){var g=a.c.string(n),k=s()(g);"rtl"===k&&(m.dir=k)}if(a.a.isVoid(f,n)){m["data-slate-void"]=!0,!v&&h&&(m.contentEditable=!1);var w=h?"span":"div",[[x]]=a.c.texts(n);y=v?null:o.a.createElement(w,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},o.a.createElement(G,{renderPlaceholder:c,decorations:[],isLast:!1,parent:n,text:x})),b.set(x,0),O.set(x,n)}return H(()=>{d.current?(C.set(p,d.current),E.set(n,d.current),A.set(d.current,n)):(C.delete(p),E.delete(n))}),o.a.createElement($.Provider,{value:!!l},i({attributes:m,children:y,element:n}))},te=o.a.memo(ee,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&Y(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&a.g.equals(e.selection,t.selection))),ne=e=>{var{attributes:t,children:n,element:r}=e,a=oe().isInline(r)?"span":"div";return o.a.createElement(a,Object.assign({},t,{style:{position:"relative"}}),n)},re=Object(r.createContext)(null),oe=()=>{var e=Object(r.useContext)(re);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},ae=Object(r.createContext)(()=>[]),ie=e=>{for(var{decorations:t,node:n,renderElement:i,renderPlaceholder:s,renderLeaf:c,selection:u}=e,l=Object(r.useContext)(ae),d=oe(),f=Re.findPath(d,n),v=[],h=a.b.isElement(n)&&!d.isInline(n)&&a.a.hasInlines(d,n),p=0;p<n.children.length;p++){var y=f.concat(p),m=n.children[p],g=Re.findKey(d,m),k=a.a.range(d,y),w=u&&a.g.intersection(k,u),x=l([m,y]);for(var A of t){var C=a.g.intersection(A,k);C&&x.push(C)}a.b.isElement(m)?v.push(o.a.createElement(te,{decorations:x,element:m,key:g.id,renderElement:i,renderPlaceholder:s,renderLeaf:c,selection:w})):v.push(o.a.createElement(G,{decorations:x,key:g.id,isLast:h&&p===n.children.length-1,parent:n,renderPlaceholder:s,renderLeaf:c,text:m})),b.set(m,p),O.set(m,n)}return v},se={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},ce={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},ue={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},le=e=>{var t=se[e],n=ce[e],r=ue[e],o=t&&Object(d.isKeyHotkey)(t),a=n&&Object(d.isKeyHotkey)(n),i=r&&Object(d.isKeyHotkey)(r);return e=>!(!o||!o(e))||(!!(M&&a&&a(e))||!(M||!i||!i(e)))},de={isBold:le("bold"),isCompose:le("compose"),isMoveBackward:le("moveBackward"),isMoveForward:le("moveForward"),isDeleteBackward:le("deleteBackward"),isDeleteForward:le("deleteForward"),isDeleteLineBackward:le("deleteLineBackward"),isDeleteLineForward:le("deleteLineForward"),isDeleteWordBackward:le("deleteWordBackward"),isDeleteWordForward:le("deleteWordForward"),isExtendBackward:le("extendBackward"),isExtendForward:le("extendForward"),isExtendLineBackward:le("extendLineBackward"),isExtendLineForward:le("extendLineForward"),isItalic:le("italic"),isMoveLineBackward:le("moveLineBackward"),isMoveLineForward:le("moveLineForward"),isMoveWordBackward:le("moveWordBackward"),isMoveWordForward:le("moveWordForward"),isRedo:le("redo"),isSplitBlock:le("splitBlock"),isTransposeCharacter:le("transposeCharacter"),isUndo:le("undo")},fe=Object(r.createContext)(!1),ve=()=>Object(r.useContext)(fe),he=Object(r.createContext)(null),pe=()=>{var e=Object(r.useContext)(he);if(!e)throw new Error("The `useSlate` hook must be used inside the <SlateProvider> component's context.");var[t]=e;return t},ye=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,me=e=>ge(e)&&1===e.nodeType,ge=e=>{var t=ye(e);return!!t&&e instanceof t.Node},ke=e=>{var t=e&&e.anchorNode&&ye(e.anchorNode);return!!t&&e instanceof t.Selection},be=e=>ge(e)&&3===e.nodeType,Oe=(e,t,n)=>{for(var r,{childNodes:o}=e,a=o[t],i=t,s=!1,c=!1;(ge(r=a)&&8===r.nodeType||me(a)&&0===a.childNodes.length||me(a)&&"false"===a.getAttribute("contenteditable"))&&(!s||!c);)i>=o.length?(s=!0,i=t-1,n="backward"):i<0?(c=!0,i=t+1,n="forward"):(a=o[i],t=i,i+="forward"===n?1:-1);return[a,t]},we=(e,t,n)=>{var[r]=Oe(e,t,n);return r},xe=e=>{var t="";if(be(e)&&e.nodeValue)return e.nodeValue;if(me(e)){for(var n of Array.from(e.childNodes))t+=xe(n);var r=getComputedStyle(e).getPropertyValue("display");"block"!==r&&"list"!==r&&"BR"!==e.tagName||(t+="\n")}return t};function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=e=>{var{attributes:t,children:n}=e;return o.a.createElement("span",Object.assign({},t),n)},Ne=()=>[],Te=(e,t)=>ge(t)&&Re.hasDOMNode(e,t),Se=(e,t)=>ge(t)&&Re.hasDOMNode(e,t,{editable:!0}),Fe=(e,t)=>{var n=Te(e,t)&&Re.toSlateNode(e,t);return a.a.isVoid(e,n)},Pe=(e,t)=>{if(!t)return!1;var n=t(e);return null!=n?n:e.isDefaultPrevented()||e.isPropagationStopped()},je=(e,t)=>{if(!t)return!1;var n=t(e);return null!=n?n:e.defaultPrevented},De=0;class Be{constructor(){this.id="".concat(De++)}}var Re={getWindow(e){var t=w.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},findKey(e,t){var n=N.get(t);return n||(n=new Be,N.set(t,n)),n},findPath(e,t){for(var n=[],r=t;;){var o=O.get(r);if(null==o){if(a.a.isEditor(r))return n;break}var i=b.get(r);if(null==i)break;n.unshift(i),r=o}throw new Error("Unable to find the path for Slate node: ".concat(JSON.stringify(t)))},findDocumentOrShadowRoot(e){var t=Re.toDOMNode(e,e),n=t.getRootNode();if(t.ownerDocument!==document)return t.ownerDocument;if(!(n instanceof Document||n instanceof ShadowRoot))throw new Error("Unable to find DocumentOrShadowRoot for editor element: ".concat(t));return void 0===n.getSelection&&null!==t.ownerDocument?t.ownerDocument:n},isFocused:e=>!!S.get(e),isReadOnly:e=>!!T.get(e),blur(e){var t=Re.toDOMNode(e,e),n=Re.findDocumentOrShadowRoot(e);S.set(e,!1),n.activeElement===t&&t.blur()},focus(e){var t=Re.toDOMNode(e,e),n=Re.findDocumentOrShadowRoot(e);S.set(e,!0),n.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){Re.toDOMNode(e,e);var{selection:t}=e,n=Re.findDocumentOrShadowRoot(e).getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),t&&a.j.deselect(e)},hasDOMNode(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:o=!1}=r,a=Re.toDOMNode(e,e);try{n=me(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!n&&(n.closest("[data-slate-editor]")===a&&(!o||n.isContentEditable||!!n.getAttribute("data-slate-zero-width")))},insertData(e,t){e.insertData(t)},setFragmentData(e,t){e.setFragmentData(t)},toDOMNode(e,t){var n=a.a.isEditor(t)?x.get(e):C.get(Re.findKey(e,t));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(JSON.stringify(t)));return n},toDOMPoint(e,t){var n,[r]=a.a.node(e,t.path),o=Re.toDOMNode(e,r);a.a.void(e,{at:t})&&(t={path:t.path,offset:0});var i=Array.from(o.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),s=0;for(var c of i){var u=c.childNodes[0];if(null!=u&&null!=u.textContent){var{length:l}=u.textContent,d=c.getAttribute("data-slate-length"),f=s+(null==d?l:parseInt(d,10));if(t.offset<=f){n=[u,Math.min(l,Math.max(0,t.offset-s))];break}s=f}}if(!n)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(JSON.stringify(t)));return n},toDOMRange(e,t){var{anchor:n,focus:r}=t,o=a.g.isBackward(t),i=Re.toDOMPoint(e,n),s=a.g.isCollapsed(t)?i:Re.toDOMPoint(e,r),c=Re.getWindow(e).document.createRange(),[u,l]=o?s:i,[d,f]=o?i:s,v=!!(me(u)?u:u.parentElement).getAttribute("data-slate-zero-width"),h=!!(me(d)?d:d.parentElement).getAttribute("data-slate-zero-width");return c.setStart(u,v?1:l),c.setEnd(d,h?1:f),c},toSlateNode(e,t){var n=me(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?A.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},findEventRange(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:n,clientY:r,target:o}=t;if(null==n||null==r)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var i,s=Re.toSlateNode(e,t.target),c=Re.findPath(e,s);if(a.a.isVoid(e,s)){var u=o.getBoundingClientRect(),l=e.isInline(s)?n-u.left<u.left+u.width-n:r-u.top<u.top+u.height-r,d=a.a.point(e,c,{edge:l?"start":"end"}),f=l?a.a.before(e,d):a.a.after(e,d);if(f)return a.a.range(e,f)}var{document:v}=window;if(v.caretRangeFromPoint)i=v.caretRangeFromPoint(n,r);else{var h=v.caretPositionFromPoint(n,r);h&&((i=v.createRange()).setStart(h.offsetNode,h.offset),i.setEnd(h.offsetNode,h.offset))}if(!i)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return Re.toSlateRange(e,i,{exactMatch:!1})},toSlatePoint(e,t,n){var[r,o]=n?t:(e=>{var[t,n]=e;if(me(t)&&t.childNodes.length){var r=n===t.childNodes.length,o=r?n-1:n;for([t,o]=Oe(t,o,r?"backward":"forward"),r=o<n;me(t)&&t.childNodes.length;){var a=r?t.childNodes.length-1:0;t=we(t,a,r?"backward":"forward")}n=r&&null!=t.textContent?t.textContent.length:0}return[t,n]})(t),a=r.parentNode,i=null,s=0;if(a){var c=a.closest('[data-slate-void="true"]'),u=a.closest("[data-slate-leaf]"),l=null;if(u){i=u.closest('[data-slate-node="text"]');var d=Re.getWindow(e).document.createRange();d.setStart(i,0),d.setEnd(r,o);var f=d.cloneContents();[...Array.prototype.slice.call(f.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(f.querySelectorAll("[contenteditable=false]"))].forEach(e=>{e.parentNode.removeChild(e)}),s=f.textContent.length,l=i}else c&&((u=c.querySelector("[data-slate-leaf]"))?(i=u.closest('[data-slate-node="text"]'),s=(l=u).textContent.length,l.querySelectorAll("[data-slate-zero-width]").forEach(e=>{s-=e.textContent.length})):s=1);l&&s===l.textContent.length&&a.hasAttribute("data-slate-zero-width")&&s--}if(!i){if(n)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var v=Re.toSlateNode(e,i);return{path:Re.findPath(e,v),offset:s}},toSlateRange(e,t,n){var r,o,a,i,s,{exactMatch:c}=n;if((ke(t)?t.anchorNode:t.startContainer)&&(ke(t)?(r=t.anchorNode,o=t.anchorOffset,a=t.focusNode,i=t.focusOffset,s=K&&window.document.activeElement&&window.document.activeElement.shadowRoot?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed):(r=t.startContainer,o=t.startOffset,a=t.endContainer,i=t.endOffset,s=t.collapsed)),null==r||null==a||null==o||null==i)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));var u=Re.toSlatePoint(e,[r,o],c);if(!u)return null;var l=s?u:Re.toSlatePoint(e,[a,i],c);return l?{anchor:u,focus:l}:null},hasRange(e,t){var{anchor:n,focus:r}=t;return a.a.hasPath(e,n.path)&&a.a.hasPath(e,r.path)}};function _e(e,t){if(e===t)return null;var n=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length!==t.length?n:null}(e,t);if(null===n)return null;var r=function(e,t,n){for(var r=e.length,o=t.length,a=Math.min(r,o,n),i=0;i<a;i++){if(e.charAt(r-i-1)!==t.charAt(o-i-1))return i}return e.length!==t.length?a:null}(e,t,Math.min(e.length-n,t.length-n));return null===r?null:{start:n,end:r}}function Me(e,t){return e.slice(t.start,e.length-t.end)}function Le(e,t){var n=Re.toSlateNode(e,t);if(a.i.isText(n)){var r=n.text,o=t.textContent;if(o.endsWith("\n")&&(o=o.slice(0,o.length-1)),o!==r){var i=function(e,t){if(void 0===e||void 0===t)return null;var n=_e(e,t);if(null==n)return null;var r=Me(t,n),o=Me(e,n);return{start:n.start,end:e.length-n.end,insertText:r,removeText:o}}(r,o);if(null!==i)return{text:i,path:Re.findPath(e,n)}}}}function Ie(e,t,n){var{path:r,text:o}=n,i={anchor:{path:r,offset:o.start},focus:{path:r,offset:o.end}};if(!t||!a.g.isCollapsed(t))return i;var{insertText:s,removeText:c}=o;if((1===s.length||1===c.length)&&a.e.equals(t.anchor.path,r)){var[u]=Array.from(a.a.nodes(e,{at:t,match:a.i.isText}));if(u){var[l]=u,{anchor:d}=t,f=l.text[d.offset-1],v=l.text[d.offset];if(1===s.length&&s===v)return t;if(1===c.length&&c===f)return{anchor:{path:r,offset:d.offset-1},focus:{path:r,offset:d.offset}}}}return i}function ze(e){try{var t=P.get(e);t&&t()}catch(e){console.error(e)}}class qe{constructor(e){this.editor=e,this.flush=e=>{try{this.reconcileMutations(e)}catch(e){console.error(e),ze(this.editor)}},this.reconcileMutations=e=>{var t=function(e,t){var n=[],r=[],o=[],i=[];return t.forEach(t=>{switch(t.type){case"childList":t.addedNodes.length&&t.addedNodes.forEach(e=>{n.push(e)}),t.removedNodes.forEach(e=>{r.push(e)});break;case"characterData":i.push(t);var{parentNode:s}=t.target;if(!s)return;var c=Le(e,s);if(!c)return;if(o.some(e=>{var{path:t}=e;return a.e.equals(t,c.path)}))return;o.push(c)}}),{addedNodes:n,removedNodes:r,insertedText:o,characterDataMutations:i}}(this.editor,e),{insertedText:n,removedNodes:r}=t;if(((e,t)=>{var{selection:n}=e,{removedNodes:r}=t;return!!n&&(a.g.isExpanded(n)&&r.length>0)})(this.editor,t)){var o=function(e){return e.reduce((e,t)=>{var{text:n}=t;return"".concat(e).concat(n.insertText)},"")}(n);this.replaceExpandedSelection(o)}else((e,t)=>{var{addedNodes:n}=t,{selection:r}=e,o=r?a.c.parent(e,r.anchor.path):null,i=o?Re.toDOMNode(e,o):null;return!!i&&n.some(e=>e instanceof HTMLElement&&e.tagName===(null==i?void 0:i.tagName))})(this.editor,t)?this.insertBreak():((e,t)=>{var{addedNodes:n,characterDataMutations:r,removedNodes:o}=t;return o.length>0&&0===n.length&&r.length>0})(this.editor,t)?this.removeLeafNodes(r):((e,t)=>{var{removedNodes:n}=t;return n.length>0})(this.editor,t)?this.deleteBackward():((e,t)=>{var{insertedText:n}=t;return n.length>0})(this.editor,t)&&this.insertText(n)},this.insertText=e=>{var{selection:t}=this.editor;e.forEach(e=>{a.j.insertText(this.editor,e.text.insertText,{at:Ie(this.editor,t,e)})})},this.insertBreak=()=>{var{selection:e}=this.editor;a.a.insertBreak(this.editor),ze(this.editor),e&&setTimeout(()=>{this.editor.selection&&a.g.equals(e,this.editor.selection)&&a.j.move(this.editor)},100)},this.replaceExpandedSelection=e=>{a.a.deleteFragment(this.editor),e.length&&a.a.insertText(this.editor,e),ze(this.editor)},this.deleteBackward=()=>{a.a.deleteBackward(this.editor),Re.focus(this.editor),ze(this.editor)},this.removeLeafNodes=e=>{for(var t of e){var n=Re.toSlateNode(this.editor,t);if(n){var r=Re.findPath(this.editor,n);a.j.delete(this.editor,{at:r}),ze(this.editor)}}},this.editor=e}}var Ke={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};function Ue(e){var t=oe(),[n]=Object(r.useState)(()=>new qe(t)),{receivedUserInput:o,onUserInput:a}=function(){var e=oe(),t=Object(r.useRef)(!1),n=Object(r.useRef)(null),o=Object(r.useCallback)(()=>{if(!1===t.current){var r=Re.getWindow(e);t.current=!0,n.current&&r.cancelAnimationFrame(n.current),n.current=r.requestAnimationFrame(()=>{t.current=!1,n.current=null})}},[]);return Object(r.useEffect)(()=>{t.current&&(t.current=!1)}),{receivedUserInput:t,onUserInput:o}}(),i=Object(r.useRef)(null),s=Object(r.useRef)(!1);return function(e,t,n){var[o]=Object(r.useState)(()=>new MutationObserver(t));H(()=>{o.disconnect()}),Object(r.useEffect)(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return o.observe(e.current,n),o.disconnect.bind(o)})}(e,Object(r.useCallback)(e=>{o.current&&(s.current=!0,n.flush(e),i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{s.current=!1,i.current=null},250))},[]),Ke),{isReconciling:s,onUserInput:a}}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve=Object(r.createContext)(!1),He=()=>Object(r.useContext)(Ve),Xe=e=>{var{editor:t,children:n,onChange:i,value:s}=e,c=y(e,["editor","children","onChange","value"]),[u,l]=Object(r.useState)(0),d=Object(r.useMemo)(()=>(Object(f.a)(a.c.isNodeList(s),"[Slate] value is invalid! Expected a list of elements but got: ".concat(JSON.stringify(s))),Object(f.a)(a.a.isEditor(t),"[Slate] editor is invalid! you passed: ".concat(JSON.stringify(t))),t.children=s,Object.assign(t,c),[t]),[u,s,...Object.values(c)]),v=Object(r.useCallback)(()=>{i(t.children),l(u+1)},[u,i]);F.set(t,v),Object(r.useEffect)(()=>()=>{F.set(t,()=>{})},[]);var[h,p]=Object(r.useState)(Re.isFocused(t));return Object(r.useEffect)(()=>{p(Re.isFocused(t))}),H(()=>{var e=()=>p(Re.isFocused(t));return document.addEventListener("focus",e,!0),()=>document.removeEventListener("focus",e,!0)},[]),H(()=>{var e=()=>p(Re.isFocused(t));return document.addEventListener("blur",e,!0),()=>document.removeEventListener("blur",e,!0)},[]),o.a.createElement(he.Provider,{value:d},o.a.createElement(re.Provider,{value:t},o.a.createElement(Ve.Provider,{value:h},n)))},Ye=(e,t)=>{var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},Ze=(e,t,n)=>{var r=Re.toDOMRange(e,t).getBoundingClientRect(),o=Re.toDOMRange(e,n).getBoundingClientRect();return Ye(r,o)&&Ye(o,r)},Ge=e=>{var t=e,{apply:n,onChange:r,deleteBackward:o}=t;return t.deleteBackward=n=>{if("line"!==n)return o(n);if(e.selection&&a.g.isCollapsed(e.selection)){var r=a.a.above(e,{match:t=>a.a.isBlock(e,t),at:e.selection});if(r){var[,i]=r,s=a.a.range(e,i,e.selection.anchor),c=((e,t)=>{var n=a.a.range(e,a.g.end(t)),r=Array.from(a.a.positions(e,{at:t})),o=0,i=r.length,s=Math.floor(i/2);if(Ze(e,a.a.range(e,r[o]),n))return a.a.range(e,r[o],n);if(r.length<2)return a.a.range(e,r[r.length-1],n);for(;s!==r.length&&s!==o;)Ze(e,a.a.range(e,r[s]),n)?i=s:o=s,s=Math.floor((o+i)/2);return a.a.range(e,r[i],n)})(t,s);a.g.isCollapsed(c)||a.j.delete(e,{at:c})}}},t.apply=e=>{var r=[];switch(e.type){case"insert_text":case"remove_text":case"set_node":for(var[o,i]of a.a.levels(t,{at:e.path})){var s=Re.findKey(t,o);r.push([i,s])}break;case"insert_node":case"remove_node":case"merge_node":case"split_node":for(var[c,u]of a.a.levels(t,{at:a.e.parent(e.path)})){var l=Re.findKey(t,c);r.push([u,l])}break;case"move_node":for(var[d,f]of a.a.levels(t,{at:a.e.common(a.e.parent(e.path),a.e.parent(e.newPath))})){var v=Re.findKey(t,d);r.push([f,v])}}for(var[h,p]of(n(e),r)){var[y]=a.a.node(t,h);N.set(y,p)}},t.setFragmentData=e=>{var{selection:n}=t;if(n){var[r,o]=a.g.edges(n),i=a.a.void(t,{at:r.path}),s=a.a.void(t,{at:o.path});if(!a.g.isCollapsed(n)||i){var c=Re.toDOMRange(t,n),u=c.cloneContents(),l=u.childNodes[0];if(u.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(l=e)}),s){var[d]=s,f=c.cloneRange(),v=Re.toDOMNode(t,d);f.setEndAfter(v),u=f.cloneContents()}if(i&&(l=u.querySelector("[data-slate-spacer]")),Array.from(u.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),be(l)){var h=document.createElement("span");h.style.whiteSpace="pre",h.appendChild(l),u.appendChild(h),l=h}var p=t.getFragment(),y=JSON.stringify(p),m=window.btoa(encodeURIComponent(y));l.setAttribute("data-slate-fragment",m),e.setData("application/x-slate-fragment",m);var g=document.createElement("div");g.appendChild(u),g.setAttribute("hidden","true"),document.body.appendChild(g),e.setData("text/html",g.innerHTML),e.setData("text/plain",xe(g)),document.body.removeChild(g)}}},t.insertData=e=>{var n=e.getData("application/x-slate-fragment");if(n){var r=decodeURIComponent(window.atob(n)),o=JSON.parse(r);t.insertFragment(o)}else{var i=e.getData("text/plain");if(i){var s=i.split(/\r\n|\r|\n/),c=!1;for(var u of s)c&&a.j.splitNodes(t,{always:!0}),t.insertText(u),c=!0}}},t.onChange=()=>{h.a.unstable_batchedUpdates(()=>{var e=F.get(t);e&&e(),r()})},t},$e=L?e=>{var{autoFocus:t,decorate:n=Ne,onDOMBeforeInput:i,placeholder:s,readOnly:c=!1,renderElement:d,renderLeaf:f,renderPlaceholder:v=(e=>o.a.createElement(Ee,Object.assign({},e))),style:h={},as:p="div"}=e,m=y(e,["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","style","as"]),g=pe(),k=Object(r.useRef)(null),b=Ue(k);T.set(g,c);var O=Object(r.useMemo)(()=>({isUpdatingSelection:!1,latestElement:null}),[]),[C,N]=Object(r.useState)(0),F=Object(r.useCallback)(()=>{N(e=>e+1)},[C]);H(()=>{var e;k.current&&(e=ye(k.current))?(w.set(g,e),x.set(g,k.current),E.set(g,k.current),A.set(k.current,g),P.set(g,F)):(E.delete(g),P.delete(g));try{var{selection:t}=g,n=Re.findDocumentOrShadowRoot(g).getSelection();if(!n||!Re.isFocused(g))return;var r="None"!==n.type;if(!t&&!r)return;var o=x.get(g),i=!1;if(o.contains(n.anchorNode)&&o.contains(n.focusNode)&&(i=!0),r&&i&&t){var s=Re.toSlateRange(g,n,{exactMatch:!0});if(s&&a.g.equals(s,t))return}if(t&&!Re.hasRange(g,t))return void(g.selection=Re.toSlateRange(g,n,{exactMatch:!1}));var c=Re.toDOMNode(g,g);O.isUpdatingSelection=!0;var u=t&&Re.toDOMRange(g,t);if(u){a.g.isBackward(t)?n.setBaseAndExtent(u.endContainer,u.endOffset,u.startContainer,u.startOffset):n.setBaseAndExtent(u.startContainer,u.startOffset,u.endContainer,u.endOffset);var d=u.startContainer.parentElement;d.getBoundingClientRect=u.getBoundingClientRect.bind(u),Object(l.a)(d,{scrollMode:"if-needed",boundary:c}),delete d.getBoundingClientRect}else n.removeAllRanges();setTimeout(()=>{O.isUpdatingSelection=!1})}catch(e){O.isUpdatingSelection=!1}}),Object(r.useEffect)(()=>{k.current&&t&&k.current.focus()},[t]);var D=Object(r.useCallback)(e=>{c||!Se(g,e.target)||je(e,i)||b.onUserInput()},[c,i]);H(()=>{var e=k.current;return null==e||e.addEventListener("beforeinput",D),()=>null==e?void 0:e.removeEventListener("beforeinput",D)},[C,i]);var B=Object(r.useCallback)(u()(()=>{try{if(!c&&!O.isUpdatingSelection&&!b.isReconciling.current){var e=Re.findDocumentOrShadowRoot(g),{activeElement:t}=e,n=Re.toDOMNode(g,g),r=e.getSelection();if(t===n?(O.latestElement=t,S.set(g,!0)):S.delete(g),!r)return a.j.deselect(g);var{anchorNode:o,focusNode:i}=r,s=Se(g,o)||Fe(g,o),u=Se(g,i)||Fe(g,i);if(s&&u){var l=Re.toSlateRange(g,r,{exactMatch:!1});a.j.select(g,l)}else a.j.deselect(g)}}catch(e){}},100),[c]);H(()=>{var e=Re.getWindow(g);return e.document.addEventListener("selectionchange",B),()=>{e.document.removeEventListener("selectionchange",B)}});var R=n([g,[]]);if(s&&1===g.children.length&&1===Array.from(a.c.texts(g)).length&&""===a.c.string(g)){var _=a.a.start(g,[]);R.push({[j]:!0,placeholder:s,anchor:_,focus:_})}return o.a.createElement(fe.Provider,{value:c},o.a.createElement(ae.Provider,{value:n},o.a.createElement(p,Object.assign({key:C,role:c?void 0:"textbox"},m,{spellCheck:m.spellCheck,autoCorrect:m.autoCorrect,autoCapitalize:m.autoCapitalize,"data-slate-editor":!0,"data-slate-node":"value",contentEditable:!c||void 0,suppressContentEditableWarning:!0,ref:k,style:Je({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},h),onCopy:Object(r.useCallback)(e=>{Se(g,e.target)&&!Pe(e,m.onCopy)&&(e.preventDefault(),Re.setFragmentData(g,e.clipboardData))},[m.onCopy]),onCut:Object(r.useCallback)(e=>{if(!c&&Se(g,e.target)&&!Pe(e,m.onCut)){e.preventDefault(),Re.setFragmentData(g,e.clipboardData);var{selection:t}=g;if(t)if(a.g.isExpanded(t))a.a.deleteFragment(g);else{var n=a.c.parent(g,t.anchor.path);a.a.isVoid(g,n)&&a.j.delete(g)}}},[c,m.onCut]),onFocus:Object(r.useCallback)(e=>{if(!c&&!O.isUpdatingSelection&&Se(g,e.target)&&!Pe(e,m.onFocus)){var t=Re.findDocumentOrShadowRoot(g);O.latestElement=t.activeElement,S.set(g,!0)}},[c,m.onFocus]),onBlur:Object(r.useCallback)(e=>{if(!c&&!O.isUpdatingSelection&&Se(g,e.target)&&!Pe(e,m.onBlur)){var t=Re.findDocumentOrShadowRoot(g);if(O.latestElement!==t.activeElement){var{relatedTarget:n}=e;if(!(n===Re.toDOMNode(g,g)||me(n)&&n.hasAttribute("data-slate-spacer"))){if(null!=n&&ge(n)&&Re.hasDOMNode(g,n)){var r=Re.toSlateNode(g,n);if(a.b.isElement(r)&&!g.isVoid(r))return}S.delete(g)}}}},[c,m.onBlur]),onPaste:Object(r.useCallback)(e=>{!Se(g,e.target)||Pe(e,m.onPaste)||c||(e.preventDefault(),Re.insertData(g,e.clipboardData))},[c,m.onPaste])}),ie({decorations:R,node:g,renderElement:d,renderPlaceholder:v,renderLeaf:f,selection:g.selection}))))}:e=>{var{autoFocus:t,decorate:n=Ne,onDOMBeforeInput:i,placeholder:c,readOnly:d=!1,renderElement:f,renderLeaf:v,renderPlaceholder:h=(e=>o.a.createElement(Ee,Object.assign({},e))),style:p={},as:m="div"}=e,g=y(e,["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","style","as"]),k=pe(),b=Object(r.useRef)(null);T.set(k,d);var O=Object(r.useMemo)(()=>({isComposing:!1,isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null}),[]);H(()=>{var e;b.current&&(e=ye(b.current))?(w.set(k,e),x.set(k,b.current),E.set(k,b.current),A.set(b.current,k)):E.delete(k);var{selection:t}=k,n=Re.findDocumentOrShadowRoot(k).getSelection();if(!O.isComposing&&n&&Re.isFocused(k)){var r="None"!==n.type;if(t||r){var o=x.get(k),i=!1;if(o.contains(n.anchorNode)&&o.contains(n.focusNode)&&(i=!0),r&&i&&t){var s=Re.toSlateRange(k,n,{exactMatch:!0});if(s&&a.g.equals(s,t))return}if(!t||Re.hasRange(k,t)){var c=Re.toDOMNode(k,k);O.isUpdatingSelection=!0;var u=t&&Re.toDOMRange(k,t);if(u){a.g.isBackward(t)?n.setBaseAndExtent(u.endContainer,u.endOffset,u.startContainer,u.startOffset):n.setBaseAndExtent(u.startContainer,u.startOffset,u.endContainer,u.endOffset);var d=u.startContainer.parentElement;d.getBoundingClientRect=u.getBoundingClientRect.bind(u),Object(l.a)(d,{scrollMode:"if-needed",boundary:c}),delete d.getBoundingClientRect}else n.removeAllRanges();setTimeout(()=>{u&&I&&c.focus(),O.isUpdatingSelection=!1})}else k.selection=Re.toSlateRange(k,n,{exactMatch:!1})}}}),Object(r.useEffect)(()=>{b.current&&t&&b.current.focus()},[t]);var C=Object(r.useCallback)(e=>{if(!d&&Se(k,e.target)&&!je(e,i)){var{selection:t}=k,{inputType:n}=e,r=e.dataTransfer||e.data||void 0;if("insertCompositionText"===n||"deleteCompositionText"===n)return;if(e.preventDefault(),!n.startsWith("delete")||n.startsWith("deleteBy")){var[o]=e.getTargetRanges();if(o){var s=Re.toSlateRange(k,o,{exactMatch:!1});t&&a.g.equals(t,s)||a.j.select(k,s)}}if(t&&a.g.isExpanded(t)&&n.startsWith("delete")){var c=n.endsWith("Backward")?"backward":"forward";return void a.a.deleteFragment(k,{direction:c})}switch(n){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":a.a.deleteFragment(k);break;case"deleteContent":case"deleteContentForward":a.a.deleteForward(k);break;case"deleteContentBackward":a.a.deleteBackward(k);break;case"deleteEntireSoftLine":a.a.deleteBackward(k,{unit:"line"}),a.a.deleteForward(k,{unit:"line"});break;case"deleteHardLineBackward":a.a.deleteBackward(k,{unit:"block"});break;case"deleteSoftLineBackward":a.a.deleteBackward(k,{unit:"line"});break;case"deleteHardLineForward":a.a.deleteForward(k,{unit:"block"});break;case"deleteSoftLineForward":a.a.deleteForward(k,{unit:"line"});break;case"deleteWordBackward":a.a.deleteBackward(k,{unit:"word"});break;case"deleteWordForward":a.a.deleteForward(k,{unit:"word"});break;case"insertLineBreak":case"insertParagraph":a.a.insertBreak(k);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===n&&(O.isComposing=!1),r instanceof Re.getWindow(k).DataTransfer?Re.insertData(k,r):"string"==typeof r&&a.a.insertText(k,r)}}},[d,i]);H(()=>(b.current&&V&&b.current.addEventListener("beforeinput",C),()=>{b.current&&V&&b.current.removeEventListener("beforeinput",C)}),[C]);var N=Object(r.useCallback)(u()(()=>{if(!(d||O.isComposing||O.isUpdatingSelection||O.isDraggingInternally)){var e=Re.findDocumentOrShadowRoot(k),{activeElement:t}=e,n=Re.toDOMNode(k,k),r=e.getSelection();if(t===n?(O.latestElement=t,S.set(k,!0)):S.delete(k),!r)return a.j.deselect(k);var{anchorNode:o,focusNode:i}=r,s=Se(k,o)||Fe(k,o),c=Se(k,i)||Fe(k,i);if(s&&c){var u=Re.toSlateRange(k,r,{exactMatch:!1});a.j.select(k,u)}else a.j.deselect(k)}},100),[d]);H(()=>{var e=Re.getWindow(k);return e.document.addEventListener("selectionchange",N),()=>{e.document.removeEventListener("selectionchange",N)}},[N]);var F=n([k,[]]);if(c&&1===k.children.length&&1===Array.from(a.c.texts(k)).length&&""===a.c.string(k)){var P=a.a.start(k,[]);F.push({[j]:!0,placeholder:c,anchor:P,focus:P})}return o.a.createElement(fe.Provider,{value:d},o.a.createElement(ae.Provider,{value:n},o.a.createElement(m,Object.assign({"data-gramm":!1,role:d?void 0:"textbox"},g,{spellCheck:!!V&&g.spellCheck,autoCorrect:V?g.autoCorrect:"false",autoCapitalize:V?g.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!d||void 0,suppressContentEditableWarning:!0,ref:b,style:Ce({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},p),onBeforeInput:Object(r.useCallback)(e=>{if(!V&&!d&&!Pe(e,g.onBeforeInput)&&Se(k,e.target)&&(e.preventDefault(),!O.isComposing)){var t=e.data;a.a.insertText(k,t)}},[d]),onBlur:Object(r.useCallback)(e=>{if(!d&&!O.isUpdatingSelection&&Se(k,e.target)&&!Pe(e,g.onBlur)){var t=Re.findDocumentOrShadowRoot(k);if(O.latestElement!==t.activeElement){var{relatedTarget:n}=e;if(!(n===Re.toDOMNode(k,k)||me(n)&&n.hasAttribute("data-slate-spacer"))){if(null!=n&&ge(n)&&Re.hasDOMNode(k,n)){var r=Re.toSlateNode(k,n);if(a.b.isElement(r)&&!k.isVoid(r))return}if(z){var o=t.getSelection();null==o||o.removeAllRanges()}S.delete(k)}}}},[d,g.onBlur]),onClick:Object(r.useCallback)(e=>{if(!d&&Te(k,e.target)&&!Pe(e,g.onClick)&&ge(e.target)){var t=Re.toSlateNode(k,e.target),n=Re.findPath(k,t),r=a.a.start(k,n),o=a.a.end(k,n),i=a.a.void(k,{at:r}),s=a.a.void(k,{at:o});if(i&&s&&a.e.equals(i[1],s[1])){var c=a.a.range(k,r);a.j.select(k,c)}}},[d,g.onClick]),onCompositionEnd:Object(r.useCallback)(e=>{Se(k,e.target)&&!Pe(e,g.onCompositionEnd)&&(O.isComposing=!1,z||W||!e.data||a.a.insertText(k,e.data))},[g.onCompositionEnd]),onCompositionUpdate:Object(r.useCallback)(e=>{Se(k,e.target)&&!Pe(e,g.onCompositionUpdate)&&(O.isComposing=!0)},[g.onCompositionUpdate]),onCompositionStart:Object(r.useCallback)(e=>{if(Se(k,e.target)&&!Pe(e,g.onCompositionStart)){var{selection:t}=k;t&&a.g.isExpanded(t)&&a.a.deleteFragment(k)}},[g.onCompositionStart]),onCopy:Object(r.useCallback)(e=>{Se(k,e.target)&&!Pe(e,g.onCopy)&&(e.preventDefault(),Re.setFragmentData(k,e.clipboardData))},[g.onCopy]),onCut:Object(r.useCallback)(e=>{if(!d&&Se(k,e.target)&&!Pe(e,g.onCut)){e.preventDefault(),Re.setFragmentData(k,e.clipboardData);var{selection:t}=k;if(t)if(a.g.isExpanded(t))a.a.deleteFragment(k);else{var n=a.c.parent(k,t.anchor.path);a.a.isVoid(k,n)&&a.j.delete(k)}}},[d,g.onCut]),onDragOver:Object(r.useCallback)(e=>{if(Te(k,e.target)&&!Pe(e,g.onDragOver)){var t=Re.toSlateNode(k,e.target);a.a.isVoid(k,t)&&e.preventDefault()}},[g.onDragOver]),onDragStart:Object(r.useCallback)(e=>{if(Te(k,e.target)&&!Pe(e,g.onDragStart)){var t=Re.toSlateNode(k,e.target),n=Re.findPath(k,t);if(a.a.isVoid(k,t)||a.a.void(k,{at:n,voids:!0})){var r=a.a.range(k,n);a.j.select(k,r)}O.isDraggingInternally=!0,Re.setFragmentData(k,e.dataTransfer)}},[g.onDragStart]),onDrop:Object(r.useCallback)(e=>{if(!d&&Te(k,e.target)&&!Pe(e,g.onDrop)){e.preventDefault();var t=k.selection,n=Re.findEventRange(k,e),r=e.dataTransfer;a.j.select(k,n),O.isDraggingInternally&&(t&&a.j.delete(k,{at:t}),O.isDraggingInternally=!1),Re.insertData(k,r),Re.isFocused(k)||Re.focus(k)}},[d,g.onDrop]),onDragEnd:Object(r.useCallback)(e=>{!d&&O.isDraggingInternally&&Te(k,e.target)&&!Pe(e,g.onDragEnd)&&(O.isDraggingInternally=!1)},[d,g.onDragEnd]),onFocus:Object(r.useCallback)(e=>{if(!d&&!O.isUpdatingSelection&&Se(k,e.target)&&!Pe(e,g.onFocus)){var t=Re.toDOMNode(k,k),n=Re.findDocumentOrShadowRoot(k);if(O.latestElement=n.activeElement,I&&e.target!==t)return void t.focus();S.set(k,!0)}},[d,g.onFocus]),onKeyDown:Object(r.useCallback)(e=>{if(!d&&Se(k,e.target)&&!Pe(e,g.onKeyDown)){var{nativeEvent:t}=e,{selection:n}=k,r=k.children[null!==n?n.focus.path[0]:0],o="rtl"===s()(a.c.string(r));if(de.isRedo(t)){e.preventDefault();var i=k;return void("function"==typeof i.redo&&i.redo())}if(de.isUndo(t)){e.preventDefault();var c=k;return void("function"==typeof c.undo&&c.undo())}if(de.isMoveLineBackward(t))return e.preventDefault(),void a.j.move(k,{unit:"line",reverse:!0});if(de.isMoveLineForward(t))return e.preventDefault(),void a.j.move(k,{unit:"line"});if(de.isExtendLineBackward(t))return e.preventDefault(),void a.j.move(k,{unit:"line",edge:"focus",reverse:!0});if(de.isExtendLineForward(t))return e.preventDefault(),void a.j.move(k,{unit:"line",edge:"focus"});if(de.isMoveBackward(t))return e.preventDefault(),void(n&&a.g.isCollapsed(n)?a.j.move(k,{reverse:!o}):a.j.collapse(k,{edge:"start"}));if(de.isMoveForward(t))return e.preventDefault(),void(n&&a.g.isCollapsed(n)?a.j.move(k,{reverse:o}):a.j.collapse(k,{edge:"end"}));if(de.isMoveWordBackward(t))return e.preventDefault(),n&&a.g.isExpanded(n)&&a.j.collapse(k,{edge:"focus"}),void a.j.move(k,{unit:"word",reverse:!o});if(de.isMoveWordForward(t))return e.preventDefault(),n&&a.g.isExpanded(n)&&a.j.collapse(k,{edge:"focus"}),void a.j.move(k,{unit:"word",reverse:o});if(V){if((K||z)&&n&&(de.isDeleteBackward(t)||de.isDeleteForward(t))&&a.g.isCollapsed(n)){var u=a.c.parent(k,n.anchor.path);if(a.b.isElement(u)&&a.a.isVoid(k,u)&&a.a.isInline(k,u))return e.preventDefault(),void a.j.delete(k,{unit:"block"})}}else{if(de.isBold(t)||de.isItalic(t)||de.isTransposeCharacter(t))return void e.preventDefault();if(de.isSplitBlock(t))return e.preventDefault(),void a.a.insertBreak(k);if(de.isDeleteBackward(t))return e.preventDefault(),void(n&&a.g.isExpanded(n)?a.a.deleteFragment(k,{direction:"backward"}):a.a.deleteBackward(k));if(de.isDeleteForward(t))return e.preventDefault(),void(n&&a.g.isExpanded(n)?a.a.deleteFragment(k,{direction:"forward"}):a.a.deleteForward(k));if(de.isDeleteLineBackward(t))return e.preventDefault(),void(n&&a.g.isExpanded(n)?a.a.deleteFragment(k,{direction:"backward"}):a.a.deleteBackward(k,{unit:"line"}));if(de.isDeleteLineForward(t))return e.preventDefault(),void(n&&a.g.isExpanded(n)?a.a.deleteFragment(k,{direction:"forward"}):a.a.deleteForward(k,{unit:"line"}));if(de.isDeleteWordBackward(t))return e.preventDefault(),void(n&&a.g.isExpanded(n)?a.a.deleteFragment(k,{direction:"backward"}):a.a.deleteBackward(k,{unit:"word"}));if(de.isDeleteWordForward(t))return e.preventDefault(),void(n&&a.g.isExpanded(n)?a.a.deleteFragment(k,{direction:"forward"}):a.a.deleteForward(k,{unit:"word"}))}}},[d,g.onKeyDown]),onPaste:Object(r.useCallback)(e=>{d||!Se(k,e.target)||Pe(e,g.onPaste)||V&&!(e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length)(e.nativeEvent)||(e.preventDefault(),Re.insertData(k,e.clipboardData))},[d,g.onPaste])}),ie({decorations:F,node:k,renderElement:f,renderPlaceholder:h,renderLeaf:v,selection:k.selection}))))}}}]);